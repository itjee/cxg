# Manager Schema - Reorganized Structure

**ìŠ¤í‚¤ë§ˆ êµ¬ì¡° ê°œí¸ ì™„ë£Œ** | 2024-10-26 | ëª¨ë“ˆí™” êµ¬ì¡°ë¡œ ì „í™˜

## ğŸ“‹ ê°œìš”

Manager ë°ì´í„°ë² ì´ìŠ¤ëŠ” ConexGrow í”Œë«í¼ì˜ í•µì‹¬ ìš´ì˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” **13ê°œ ìŠ¤í‚¤ë§ˆ, 38ê°œ í…Œì´ë¸”**ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

ê¸°ì¡´ì˜ **ëª¨ë†€ë¦¬ì‹ SQL íŒŒì¼ êµ¬ì¡°**ì—ì„œ **í…Œì´ë¸” ë‹¨ìœ„ë¡œ ë¶„ë¦¬ëœ ëª¨ë“ˆí™” êµ¬ì¡°**ë¡œ ê°œí¸ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸ¯ ì£¼ìš” íŠ¹ì§•

### êµ¬ì¡°ì  ê°œì„ 

| í•­ëª© | ì „ | í›„ |
|-----|----|----|
| íŒŒì¼ ë°©ì‹ | ìŠ¤í‚¤ë§ˆë³„ 1ê°œ íŒŒì¼ | í…Œì´ë¸”ë³„ ê°œë³„ íŒŒì¼ |
| ê°€ë…ì„± | ë‚®ìŒ (ëŒ€ìš©ëŸ‰ íŒŒì¼) | ë†’ìŒ (ë‹¨ìœ„ë³„ êµ¬ë¶„) |
| ìœ ì§€ë³´ìˆ˜ | ì–´ë ¤ì›€ | ì‰¬ì›€ |
| ì´ˆê¸°í™” ë°©ì‹ | ì „ì²´ ë˜ëŠ” ìŠ¤í‚¤ë§ˆ ì „ì²´ | í…Œì´ë¸” ë‹¨ìœ„ ì„ íƒ ê°€ëŠ¥ |
| ë²„ì „ê´€ë¦¬ | ì¶”ì  ì–´ë ¤ì›€ | ì¶”ì  ìš©ì´ |

### ê¸°ìˆ ì  íŠ¹ì§•

âœ… **ì™„ì „í•œ ì œì•½ì¡°ê±´ ìœ ì§€**
- PRIMARY KEY, UNIQUE, FOREIGN KEY, CHECK ì œì•½ì¡°ê±´ ëª¨ë‘ ìœ ì§€
- ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥

âœ… **í’ë¶€í•œ ì¸ë±ì‹± ì „ëµ**
- B-tree ì¸ë±ìŠ¤: 32ê°œ ì´ìƒ
- GIN ì¸ë±ìŠ¤: JSONB ì»¬ëŸ¼ ê²€ìƒ‰
- ì¡°ê±´ë¶€ ì¸ë±ìŠ¤: WHERE ì ˆë¡œ ì„±ëŠ¥ ìµœì í™”

âœ… **ìƒì„¸í•œ ë¬¸ì„œí™”**
- COMMENT ON TABLE/COLUMNìœ¼ë¡œ ëª¨ë“  í•„ë“œ ì„¤ëª…
- ìŠ¤í‚¤ë§ˆ ëª©ì  ë° ìš©ë„ ëª…ì‹œ
- í…Œì´ë¸” ê°„ ê´€ê³„ë„ ì£¼ì„ìœ¼ë¡œ í‘œì‹œ

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
/packages/database/schemas/manager/
â”‚
â”œâ”€â”€ 01_tnnt/                  â† í…Œë„ŒíŠ¸ ê´€ë¦¬ (Root Domain)
â”‚   â”œâ”€â”€ 00_schema_init.sql    â† ìŠ¤í‚¤ë§ˆ ìƒì„±
â”‚   â”œâ”€â”€ 01_tenants.sql        â† í…Œë„ŒíŠ¸ ë§ˆìŠ¤í„°
â”‚   â”œâ”€â”€ 02_subscriptions.sql  â† êµ¬ë… ì •ë³´
â”‚   â”œâ”€â”€ 03_onboardings.sql    â† ì˜¨ë³´ë”©
â”‚   â”œâ”€â”€ 04_tenant_users.sql   â† í…Œë„ŒíŠ¸-ì‚¬ìš©ì
â”‚   â”œâ”€â”€ 05_tenant_roles.sql   â† í…Œë„ŒíŠ¸-ì—­í• 
â”‚   â””â”€â”€ 06_views_functions.sql â† ë·°/íŠ¸ë¦¬ê±°
â”‚
â”œâ”€â”€ 02_idam/                  â† ì‚¬ìš©ì ë° ì ‘ê·¼ ê´€ë¦¬
â”‚   â”œâ”€â”€ 00_schema_init.sql
â”‚   â”œâ”€â”€ 01_users.sql
â”‚   â”œâ”€â”€ 02_permissions.sql
â”‚   â”œâ”€â”€ 03_roles.sql
â”‚   â”œâ”€â”€ 04_role_permissions.sql
â”‚   â”œâ”€â”€ 05_user_roles.sql
â”‚   â”œâ”€â”€ 06_api_keys.sql
â”‚   â”œâ”€â”€ 07_sessions.sql
â”‚   â””â”€â”€ 08_login_logs.sql
â”‚
â”œâ”€â”€ 03_bill/                  â† ìš”ê¸ˆ ë° ì²­êµ¬
â”‚   â”œâ”€â”€ 00_schema_init.sql
â”‚   â”œâ”€â”€ 01_plans.sql
â”‚   â”œâ”€â”€ 02_invoices.sql
â”‚   â””â”€â”€ 03_transactions.sql
â”‚
â”œâ”€â”€ 04_ifra/                  â† ì¸í”„ë¼ ë° ë¦¬ì†ŒìŠ¤
â”œâ”€â”€ 05_stat/                  â† ì„±ëŠ¥ ë° ë¶„ì„
â”œâ”€â”€ 06_mntr/                  â† ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§
â”œâ”€â”€ 07_intg/                  â† ì™¸ë¶€ ì—°ë™
â”œâ”€â”€ 08_supt/                  â† ê³ ê° ì§€ì›
â”œâ”€â”€ 09_audt/                  â† ë³´ì•ˆ ë° ê°ì‚¬
â”œâ”€â”€ 10_auto/                  â† ìë™í™”
â”œâ”€â”€ 11_cnfg/                  â† ì„¤ì •
â”œâ”€â”€ 12_noti/                  â† ì•Œë¦¼ ë° ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ â­ ì‹ ê·œ
â”‚   â”œâ”€â”€ 00_schema.sql
â”‚   â”œâ”€â”€ 01_notifications.sql
â”‚   â”œâ”€â”€ 02_templates.sql
â”‚   â”œâ”€â”€ 03_campaigns.sql
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ 13_bkup/                  â† ë°±ì—… ë° ë³µêµ¬ â­ ì‹ ê·œ
â”‚   â”œâ”€â”€ 00_schema.sql
â”‚   â”œâ”€â”€ 01_executions.sql
â”‚   â”œâ”€â”€ 02_schedules.sql
â”‚   â”œâ”€â”€ 03_recovery_plans.sql
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ _00_init_all_schemas.sql  â† í†µí•© ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ â­
â”œâ”€â”€ MIGRATION_GUIDE.md        â† ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ
â”œâ”€â”€ README.md                 â† ì´ íŒŒì¼
â”‚
â””â”€â”€ [ì›ë³¸ íŒŒì¼ë“¤ - í•˜ìœ„í˜¸í™˜ì„±]
    â”œâ”€â”€ tnnt.sql
    â”œâ”€â”€ idam.sql
    â”œâ”€â”€ bill.sql
    â””â”€â”€ ...
```

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì „ì²´ Manager DB ì´ˆê¸°í™” (ê¶Œì¥)

```bash
psql -U postgres -d your_database -f _00_init_all_schemas.sql
```

**ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ìˆœì„œ**:
1. 13ê°œ ìŠ¤í‚¤ë§ˆ ìƒì„±
2. 38ê°œ í…Œì´ë¸” ìƒì„± (ì˜ì¡´ì„± ìˆœì„œ ê³ ë ¤)
3. ëª¨ë“  ì¸ë±ìŠ¤ ìƒì„±
4. ëª¨ë“  ì œì•½ì¡°ê±´ ì ìš©

### 2. íŠ¹ì • ìŠ¤í‚¤ë§ˆë§Œ ì´ˆê¸°í™”

```bash
# í…Œë„ŒíŠ¸ ê´€ë¦¬ ìŠ¤í‚¤ë§ˆ
cd 01_tnnt && for f in *.sql; do psql -f "$f"; done

# ì²­êµ¬ ê´€ë¦¬ ìŠ¤í‚¤ë§ˆ
cd 03_bill && for f in *.sql; do psql -f "$f"; done
```

### 3. íŠ¹ì • í…Œì´ë¸”ë§Œ ìƒì„±

```bash
# í…Œë„ŒíŠ¸ í…Œì´ë¸”ë§Œ
psql -f 01_tnnt/01_tenants.sql

# ì²­êµ¬ì„œ í…Œì´ë¸”ë§Œ
psql -f 03_bill/02_invoices.sql
```

## ğŸ“Š ìŠ¤í‚¤ë§ˆë³„ ì •ë³´

### 01_tnnt - í…Œë„ŒíŠ¸ ê´€ë¦¬ (Root Domain)

**ëª©ì **: ë©€í‹°í…Œë„ŒíŠ¸ ì‹œìŠ¤í…œì˜ í•µì‹¬ ë„ë©”ì¸

| í…Œì´ë¸” | ì„¤ëª… | í–‰ ìˆ˜ |
|-------|------|-------|
| tenants | í…Œë„ŒíŠ¸ ë§ˆìŠ¤í„° ì •ë³´ | ìˆ˜ë°± |
| subscriptions | êµ¬ë… ë° ìš”ê¸ˆì œ | ìˆ˜ë°± |
| onboardings | ì˜¨ë³´ë”© í”„ë¡œì„¸ìŠ¤ ì¶”ì  | ìˆ˜ì²œ |
| tenant_users | í…Œë„ŒíŠ¸-ì‚¬ìš©ì ê´€ê³„ | ìˆ˜ë§Œ |
| tenant_roles | í…Œë„ŒíŠ¸-ì—­í•  ë§ì¶¤ | ìˆ˜ë°± |

### 02_idam - ì‚¬ìš©ì ë° ì ‘ê·¼ ê´€ë¦¬

**ëª©ì **: ì‚¬ìš©ì ì¸ì¦, ê¶Œí•œ ê´€ë¦¬, ê°ì‚¬ ì¶”ì 

| í…Œì´ë¸” | ì„¤ëª… |
|-------|------|
| users | ìš´ì˜ì ì‚¬ìš©ì ê³„ì • |
| permissions | ê¶Œí•œ ì¹´íƒˆë¡œê·¸ |
| roles | ì—­í•  ì •ì˜ |
| role_permissions | ì—­í• -ê¶Œí•œ ë§¤í•‘ |
| user_roles | ì‚¬ìš©ì-ì—­í•  ë§¤í•‘ |
| api_keys | API í‚¤ ê´€ë¦¬ |
| sessions | ì„¸ì…˜ ê´€ë¦¬ |
| login_logs | ë¡œê·¸ì¸ ì´ë ¥ |

### 03_bill - ìš”ê¸ˆ ë° ì²­êµ¬

**ëª©ì **: SaaS ê³¼ê¸ˆ ë° ê²°ì œ ê´€ë¦¬

| í…Œì´ë¸” | ì„¤ëª… |
|-------|------|
| plans | ìš”ê¸ˆì œ ë§ˆìŠ¤í„° |
| invoices | ì²­êµ¬ì„œ |
| transactions | ê²°ì œ ê±°ë˜ ë‚´ì—­ |

### 04_ifra - ì¸í”„ë¼ ë° ë¦¬ì†ŒìŠ¤

**ëª©ì **: í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ ë¹„ìš© ê´€ë¦¬

- resources: í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ ì¹´íƒˆë¡œê·¸
- resource_usages: ì‚¬ìš©ëŸ‰ ë©”íŠ¸ë¦­

### 05_stat - ì„±ëŠ¥ ë° ë¶„ì„

**ëª©ì **: í…Œë„ŒíŠ¸ ì‚¬ìš© í˜„í™© ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­

- tenant_stats: í…Œë„ŒíŠ¸ë³„ ë¶„ì„ ë°ì´í„°
- usage_stats: ì‚¬ìš©ëŸ‰ ìš”ì•½ í†µê³„

### 06_mntr - ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§

**ëª©ì **: ì„œë¹„ìŠ¤ ê°€ìš©ì„± ë° ì„±ëŠ¥ ì¶”ì 

- health_checks: ì„œë¹„ìŠ¤ í—¬ìŠ¤ì²´í¬
- incidents: ì¥ì•  ì´ë ¥
- system_metrics: ì„±ëŠ¥ ë©”íŠ¸ë¦­

### 07_intg - ì™¸ë¶€ ì—°ë™

**ëª©ì **: ì œ3ì API ë° Webhook ê´€ë¦¬

- apis: ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™
- webhooks: ì›¹í›… ì—”ë“œí¬ì¸íŠ¸
- rate_limits: API í˜¸ì¶œ ì œí•œ

### 08_supt - ê³ ê° ì§€ì›

**ëª©ì **: ê³ ê° ë¬¸ì˜ ë° í”¼ë“œë°± ê´€ë¦¬

- tickets: ì§€ì› í‹°ì¼“
- ticket_comments: ëŒ“ê¸€ ë° ëŒ€í™”
- feedbacks: ê³ ê° í”¼ë“œë°±

### 09_audt - ë³´ì•ˆ ë° ê°ì‚¬

**ëª©ì **: ê°ì‚¬ ë¡œê·¸ ë° ì»´í”Œë¼ì´ì–¸ìŠ¤

- audit_logs: ë³´ì•ˆ ê°ì‚¬ ë¡œê·¸
- compliances: ì»´í”Œë¼ì´ì–¸ìŠ¤ ë³´ê³ ì„œ
- policies: ë³´ì•ˆ ì •ì±…

### 10_auto - ìë™í™”

**ëª©ì **: ì›Œí¬í”Œë¡œìš° ë° ìë™í™” ì‘ì—…

- workflows: ìë™í™” ì›Œí¬í”Œë¡œìš°
- executions: ì‹¤í–‰ ì´ë ¥
- tasks: ì‘ì—… ê´€ë¦¬

### 11_cnfg - ì„¤ì •

**ëª©ì **: ì‹œìŠ¤í…œ ì„¤ì • ë° ê¸°ëŠ¥ ì œì–´

- configurations: ì‹œìŠ¤í…œ ì„¤ì •
- feature_flags: ê¸°ëŠ¥ í† ê¸€
- tenant_features: í…Œë„ŒíŠ¸ë³„ ê¸°ëŠ¥
- service_quotas: ì„œë¹„ìŠ¤ í• ë‹¹ëŸ‰

### 12_noti - ì•Œë¦¼ ë° ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ â­ ì‹ ê·œ

**ëª©ì **: ë©€í‹°ì±„ë„ ì•Œë¦¼ ë° ì´ë©”ì¼ ìº í˜ì¸ ê´€ë¦¬

| í…Œì´ë¸” | ì„¤ëª… | ì£¼ìš” ê¸°ëŠ¥ |
|-------|------|---------|
| notifications | ì•Œë¦¼ ê´€ë¦¬ | ì‹œìŠ¤í…œ, ì²­êµ¬, ë³´ì•ˆ ì•Œë¦¼ í†µí•© ê´€ë¦¬ |
| templates | ì•Œë¦¼ í…œí”Œë¦¿ | ë‹¤êµ­ì–´, ë‹¤ì¤‘ ì±„ë„ í…œí”Œë¦¿ ë²„ì „ ê´€ë¦¬ |
| campaigns | ì´ë©”ì¼ ìº í˜ì¸ | ë§ˆì¼€íŒ…, ê³µì§€, ë‰´ìŠ¤ë ˆí„° ëŒ€ëŸ‰ ë°œì†¡ |

**ì£¼ìš” íŠ¹ì§•**:
- ë©€í‹°ì±„ë„ ì§€ì›: IN_APP, EMAIL, SMS, PUSH, WEBHOOK
- ë‹¤êµ­ì–´ í…œí”Œë¦¿: ë¡œì¼€ì¼ ê¸°ë°˜ ì½˜í…ì¸  ê´€ë¦¬
- ìº í˜ì¸ ë¶„ì„: ê°œë´‰ìœ¨, í´ë¦­ìœ¨, ë°˜ì†¡ë¥  ì¶”ì 
- A/B í…ŒìŠ¤íŠ¸: ìº í˜ì¸ ì„±ê³¼ ìµœì í™”
- ìë™ ë§Œë£Œ: ì•Œë¦¼ ìë™ ì •ë¦¬

ìì„¸í•œ ë‚´ìš©ì€ [12_noti/README.md](./12_noti/README.md) ì°¸ê³ 

### 13_bkup - ë°±ì—… ë° ë³µêµ¬ â­ ì‹ ê·œ

**ëª©ì **: ë°±ì—… ìŠ¤ì¼€ì¤„ ê´€ë¦¬ ë° ì¬í•´ë³µêµ¬ ê³„íš

| í…Œì´ë¸” | ì„¤ëª… | ì£¼ìš” ê¸°ëŠ¥ |
|-------|------|---------|
| executions | ë°±ì—… ì‹¤í–‰ | ë°±ì—… ì‘ì—… ì‹¤í–‰ ì´ë ¥ ë° ìƒíƒœ ì¶”ì  |
| schedules | ë°±ì—… ìŠ¤ì¼€ì¤„ | ìë™í™”ëœ ì£¼ê¸°ì  ë°±ì—… ì˜ˆì•½ |
| recovery_plans | ë³µêµ¬ ê³„íš | RTO/RPO ëª©í‘œì™€ ë³µêµ¬ ì ˆì°¨ ì •ì˜ |

**ì£¼ìš” íŠ¹ì§•**:
- ë°±ì—… ìœ í˜• ì§€ì›: FULL_SYSTEM, TENANT_DATA, DATABASE, FILES, CONFIGURATION
- ìœ ì—°í•œ ìŠ¤ì¼€ì¤„ë§: DAILY, WEEKLY, MONTHLY, QUARTERLY
- RTO/RPO ê´€ë¦¬: ë³µêµ¬ ì‹œê°„/ì‹œì  ëª©í‘œ ì„¤ì •
- ìë™í™”: ìë™/ìˆ˜ë™/ì˜ˆì•½ ë°±ì—… ì§€ì›
- ì»´í”Œë¼ì´ì–¸ìŠ¤: ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°, í…ŒìŠ¤íŠ¸ ì¶”ì 

ìì„¸í•œ ë‚´ìš©ì€ [13_bkup/README.md](./13_bkup/README.md) ì°¸ê³ 

## ğŸ“ˆ ì„±ëŠ¥ ì¸ë±ìŠ¤ ì „ëµ

### ìì£¼ ì‚¬ìš©ë˜ëŠ” ì¿¼ë¦¬ íŒ¨í„´

âœ… **í…Œë„ŒíŠ¸ë³„ ë°ì´í„° ì¡°íšŒ**
```sql
SELECT * FROM [table] WHERE tenant_id = $1
```
â†’ ëª¨ë“  ê´€ë ¨ í…Œì´ë¸”ì— tenant_id ì¸ë±ìŠ¤ ì¡´ì¬

âœ… **ìƒíƒœë³„ í•„í„°ë§**
```sql
SELECT * FROM [table] WHERE status = 'ACTIVE' AND deleted = FALSE
```
â†’ (status, created_at) ë³µí•© ì¸ë±ìŠ¤

âœ… **ì‹œê°„ ê¸°ì¤€ ì •ë ¬**
```sql
SELECT * FROM [table] ORDER BY created_at DESC LIMIT 10
```
â†’ created_at DESC ì¸ë±ìŠ¤

âœ… **JSONB í•„ë“œ ê²€ìƒ‰**
```sql
SELECT * FROM [table] WHERE tags @> '{"key": "value"}'
```
â†’ GIN ì¸ë±ìŠ¤ ì‚¬ìš©

## ğŸ”— í…Œì´ë¸” ì˜ì¡´ì„± ê·¸ë˜í”„

```
tnnt.tenants (Root)
    â†“
    â”œâ”€â†’ tnnt.subscriptions
    â”œâ”€â†’ tnnt.onboardings
    â”œâ”€â†’ tnnt.tenant_users â†’ idam.users
    â”œâ”€â†’ tnnt.tenant_roles â†’ idam.roles
    â”‚
    â”œâ”€â†’ bill.invoices
    â”œâ”€â†’ bill.transactions
    â”œâ”€â†’ ifra.resources
    â”œâ”€â†’ stat.tenant_stats
    â”œâ”€â†’ mntr.* (ëª¨ë‹ˆí„°ë§ í…Œì´ë¸”)
    â”œâ”€â†’ supt.tickets
    â”œâ”€â†’ audt.audit_logs
    â””â”€â†’ cnfg.tenant_features
```

**ì¤‘ìš”**: ì™¸ë˜í‚¤ ë•Œë¬¸ì— `tnnt.tenants`ê°€ ë°˜ë“œì‹œ ë¨¼ì € ìƒì„±ë˜ì–´ì•¼ í•¨!

## ğŸ” ë³´ì•ˆ íŠ¹ì§•

### ê°ì‚¬ ì¶”ì  (Audit Trail)
ëª¨ë“  í…Œì´ë¸”ì— ë‹¤ìŒ ì»¬ëŸ¼ì´ ìˆìŠµë‹ˆë‹¤:
- `created_at`: ìƒì„± ì‹œê°„
- `created_by`: ìƒì„±ì ID
- `updated_at`: ìˆ˜ì • ì‹œê°„
- `updated_by`: ìˆ˜ì •ì ID

### ë…¼ë¦¬ì  ì‚­ì œ
- `deleted BOOLEAN`: ë¬¼ë¦¬ì  ì‚­ì œ ëŒ€ì‹  ë…¼ë¦¬ì  ì‚­ì œ
- ë°ì´í„° ë³µêµ¬ ê°€ëŠ¥

### ìƒíƒœ ê´€ë¦¬
- `status VARCHAR(20)`: ë¼ì´í”„ì‚¬ì´í´ ì¶”ì 
- ê²€ìƒ‰ ì„±ëŠ¥ ìµœì í™” (WHERE ì ˆ ì¸ë±ìŠ¤)

## ğŸ“ ì½”ë©˜íŠ¸ ë° ì„¤ëª…

ê° í…Œì´ë¸”ì˜ **ëª¨ë“  ì»¬ëŸ¼**ì— ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤:

```sql
COMMENT ON TABLE  [schema].[table]         IS 'í…Œì´ë¸” ì„¤ëª…';
COMMENT ON COLUMN [schema].[table].[col]   IS 'ì»¬ëŸ¼ ì„¤ëª…';
```

`psql`ì—ì„œ í™•ì¸:
```sql
-- ìŠ¤í‚¤ë§ˆ ëª©ë¡
\dn

-- íŠ¹ì • ìŠ¤í‚¤ë§ˆì˜ í…Œì´ë¸”
\dt [schema].*

-- í…Œì´ë¸” ìƒì„¸ ì •ë³´ (ì»¬ëŸ¼ ì„¤ëª… í¬í•¨)
\d+ [schema].[table]

-- í…Œì´ë¸” ì„¤ëª…
SELECT obj_description(to_regclass('[schema].[table]'), 'pg_class');

-- ì»¬ëŸ¼ ì„¤ëª…
SELECT col_description(to_regclass('[schema].[table]'), 1);
```

## ğŸ“š ì¶”ê°€ ë¦¬ì†ŒìŠ¤

| ë¬¸ì„œ | ë‚´ìš© |
|------|------|
| **MIGRATION_GUIDE.md** | ë§ˆì´ê·¸ë ˆì´ì…˜ ë°©ë²• ë° ì£¼ì˜ì‚¬í•­ |
| **REORGANIZATION_REPORT.txt** | ì›ë³¸ ì—ì´ì „íŠ¸ ì‘ì—… ë³´ê³ ì„œ |
| **ê° ìŠ¤í‚¤ë§ˆ/í…Œì´ë¸” SQL** | ìƒì„¸ ì£¼ì„ ë° ì œì•½ì¡°ê±´ |

## âœ… ê²€ì¦ í•­ëª©

ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ ì„¤ì •ì„ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```sql
-- ìŠ¤í‚¤ë§ˆ ê°œìˆ˜ í™•ì¸ (11ê°œ ì˜ˆìƒ)
SELECT COUNT(*) FROM information_schema.schemata
WHERE schema_name IN ('tnnt', 'idam', 'bill', 'ifra', 'stat', 'mntr', 'intg', 'supt', 'audt', 'auto', 'cnfg');

-- í…Œì´ë¸” ê°œìˆ˜ í™•ì¸ (32ê°œ ì˜ˆìƒ)
SELECT COUNT(*) FROM information_schema.tables
WHERE table_schema NOT IN ('information_schema', 'pg_catalog');

-- ì¸ë±ìŠ¤ ê°œìˆ˜ í™•ì¸
SELECT COUNT(*) FROM pg_stat_user_indexes;

-- ì™¸ë˜í‚¤ ê°œìˆ˜ í™•ì¸
SELECT COUNT(*) FROM information_schema.table_constraints
WHERE constraint_type = 'FOREIGN KEY';
```

## ğŸ¤ ê¸°ì—¬ ë° í”¼ë“œë°±

êµ¬ì¡° ê°œì„  ì‚¬í•­ì´ë‚˜ ë¬¸ì œì :
1. í•´ë‹¹ í…Œì´ë¸” SQL íŒŒì¼ ê²€í† 
2. MIGRATION_GUIDE.md ì°¸ê³ 
3. íŒ€ì— ì˜ê²¬ ê³µìœ 

## ğŸ“… ë²„ì „ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë‚´ìš© |
|------|------|------|
| 1.0 | 2024-10-26 | ëª¨ë“ˆí™” êµ¬ì¡°ë¡œ ê°œí¸ ì™„ë£Œ |

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2024-10-26
**ìƒíƒœ**: âœ… ì™„ë£Œ ë° ìš´ì˜ ì¤‘
