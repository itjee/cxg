# CXG í”Œë«í¼ - ê°œë°œ í‘œì¤€ ë° ì°¸ê³  ìë£Œ

> **ê°œë°œ ê·œì¹™, ì»¨ë²¤ì…˜ ë° ë¹ ë¥¸ ì°¸ê³  ìë£Œ**
> - **ëŒ€ìƒ ë…ì**: ëª¨ë“  ê°œë°œì
> - **ì½ëŠ” ì‹œê°„**: 30-45ë¶„
> - **ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2024ë…„ 11ì›” 8ì¼

---

## ëª©ì°¨

1. [ë„¤ì´ë° ì»¨ë²¤ì…˜](#ë„¤ì´ë°-ì»¨ë²¤ì…˜)
2. [ì½”ë“œ êµ¬ì¡° ê·œì¹™](#ì½”ë“œ-êµ¬ì¡°-ê·œì¹™)
3. [íŒŒì¼ ë° í´ë” êµ¬ì¡°](#íŒŒì¼-ë°-í´ë”-êµ¬ì¡°)
4. [API ì„¤ê³„ ê°€ì´ë“œ](#api-ì„¤ê³„-ê°€ì´ë“œ)
5. [ë°ì´í„°ë² ì´ìŠ¤ í‘œì¤€](#ë°ì´í„°ë² ì´ìŠ¤-í‘œì¤€)
6. [ê¶Œí•œ ë° ì—­í•  ëª¨ë¸](#ê¶Œí•œ-ë°-ì—­í• -ëª¨ë¸)
7. [í¬íŠ¸ ë° ì„¤ì •](#í¬íŠ¸-ë°-ì„¤ì •)
8. [ë¹ ë¥¸ ì°¸ê³ ](#ë¹ ë¥¸-ì°¸ê³ )

---

## ë„¤ì´ë° ì»¨ë²¤ì…˜

### Python (ë°±ì—”ë“œ)

```python
# íŒ¨í‚¤ì§€: ì†Œë¬¸ì, ì–¸ë”ìŠ¤ì½”ì–´
my_package/

# ëª¨ë“ˆ: ì†Œë¬¸ì, ì–¸ë”ìŠ¤ì½”ì–´
my_module.py
user_service.py
auth_utils.py

# í´ë˜ìŠ¤: PascalCase
class UserService:
    pass

class AuthenticationError:
    pass

# í•¨ìˆ˜/ë©”ì„œë“œ: snake_case
def get_user(user_id):
    pass

def validate_email(email):
    pass

# ìƒìˆ˜: UPPER_SNAKE_CASE
MAX_RETRY_COUNT = 3
DEFAULT_TIMEOUT = 30
API_BASE_URL = "https://api.example.com"

# ë³€ìˆ˜: snake_case
user_name = "John"
is_active = True
user_count = 10

# Private: ì–¸ë”ìŠ¤ì½”ì–´ë¡œ ì‹œì‘
_internal_method()
__private_attribute
```

### TypeScript (í”„ë¡ íŠ¸ì—”ë“œ)

```typescript
// íŒŒì¼: íŒŒì¼ì€ kebab-case (ì»´í¬ë„ŒíŠ¸ëŠ” ì˜ˆì™¸)
user-service.ts
api-client.ts
constants.ts

// ì»´í¬ë„ŒíŠ¸: PascalCase
UserCard.tsx
LoginForm.tsx
DashboardLayout.tsx

// ì¸í„°í˜ì´ìŠ¤/íƒ€ì…: PascalCase
interface UserProps {
  id: number;
  name: string;
}

type UserStatus = 'active' | 'inactive';

// í•¨ìˆ˜/ë©”ì„œë“œ: camelCase
function getUserById(id: number) {}

const fetchUserData = async () => {}

// ìƒìˆ˜: UPPER_SNAKE_CASE
const MAX_RETRIES = 3;
const API_BASE_URL = 'https://api.example.com';

// ë³€ìˆ˜: camelCase
let userName = 'John';
const isActive = true;
const userCount = 10;
```

### SQL (ë°ì´í„°ë² ì´ìŠ¤)

```sql
-- í…Œì´ë¸”: snake_case, ë‹¨ìˆ˜í˜•
CREATE TABLE user (
  id SERIAL PRIMARY KEY
);

CREATE TABLE role_permission (
  role_id INTEGER,
  permission_id INTEGER
);

-- ì—´: snake_case
CREATE TABLE user (
  id SERIAL PRIMARY KEY,
  user_name VARCHAR(50),
  email_address VARCHAR(120),
  is_active BOOLEAN,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);

-- ì¸ë±ìŠ¤: idx_[table]_[column]
CREATE INDEX idx_user_email ON user(email_address);

-- ì™¸ë˜ í‚¤: fk_[table]_[column]
ALTER TABLE user_role
ADD CONSTRAINT fk_user_role_user_id
FOREIGN KEY (user_id) REFERENCES user(id);
```

---

## ì½”ë“œ êµ¬ì¡° ê·œì¹™

### ë°±ì—”ë“œ ê³„ì¸µ ë¶„ë¦¬

```
Router (HTTP ì—”ë“œí¬ì¸íŠ¸)
  â†“ (validate input)
Service (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
  â†“ (data operations)
Repository (ë°ì´í„° ì ‘ê·¼)
  â†“ (SQL)
Database (ì§€ì†ì„±)
```

**ê° ê³„ì¸µì˜ ì±…ì„:**
- **Router**: HTTP ìš”ì²­/ì‘ë‹µë§Œ ì²˜ë¦¬
- **Service**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ìœ íš¨ì„± ê²€ì‚¬
- **Repository**: ë°ì´í„° ì¿¼ë¦¬, ë³€í™˜

### í”„ë¡ íŠ¸ì—”ë“œ ê³„ì¸µ ë¶„ë¦¬

```
Page (ë¼ìš°íŠ¸)
  â†“
Component (UI ë Œë”ë§)
  â†“
Hook (ë¡œì§ ì¶”ì¶œ)
  â†“
Service (API í˜¸ì¶œ)
  â†“
Backend API
```

**ê° ê³„ì¸µì˜ ì±…ì„:**
- **Page**: ë ˆì´ì•„ì›ƒ, ë¼ìš°íŒ…
- **Component**: UI ë Œë”ë§
- **Hook**: ìƒíƒœ, ë¶€ì‘ìš©
- **Service**: API í†µí•©

---

## íŒŒì¼ ë° í´ë” êµ¬ì¡°

### ë°±ì—”ë“œ êµ¬ì¡°

```
apps/backend-api/src/api/
â”œâ”€â”€ routers/
â”‚   â”œâ”€â”€ manager/           # ë§¤ë‹ˆì € ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ idam.py       # ì¸ì¦ & ì ‘ê·¼
â”‚   â”‚   â”œâ”€â”€ tnnt.py       # í…Œë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ tenants/          # í…Œë„ŒíŠ¸ ì‹œìŠ¤í…œ
â”‚       â”œâ”€â”€ adm.py        # ê´€ë¦¬
â”‚       â”œâ”€â”€ psm.py        # ì¸ì‚¬
â”‚       â””â”€â”€ ...
â”œâ”€â”€ schemas/              # Pydantic (ìš”ì²­/ì‘ë‹µ)
â”œâ”€â”€ models/              # SQLAlchemy (DB)
â””â”€â”€ services/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
```

### í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

```
apps/manager-web/
â”œâ”€â”€ app/                 # Next.js ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ (auth)/         # ì¸ì¦ (ê³µê°œ)
â”‚   â”œâ”€â”€ (app)/          # ì•± (ë³´í˜¸ë¨)
â”‚   â”‚   â”œâ”€â”€ [schema]/   # ë„ë©”ì¸
â”‚   â”‚   â”‚   â””â”€â”€ [entity]/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ dashboard/
â”‚   â””â”€â”€ layout.tsx
â”œâ”€â”€ components/         # React ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ hooks/             # ì»¤ìŠ¤í…€ í›…
â”œâ”€â”€ services/          # API í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ store/             # ìƒíƒœ ê´€ë¦¬
â”œâ”€â”€ types/             # TypeScript íƒ€ì…
â””â”€â”€ constants/         # ìƒìˆ˜
```

---

## API ì„¤ê³„ ê°€ì´ë“œ

### ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡°

```
/api/v1/{system}/{module}/{resource}/{id?}/{action?}

ë§¤ë‹ˆì €:
GET    /api/v1/manager/idam/users
GET    /api/v1/manager/idam/users/123
POST   /api/v1/manager/idam/users
PUT    /api/v1/manager/idam/users/123
DELETE /api/v1/manager/idam/users/123

í…Œë„ŒíŠ¸:
GET    /api/v1/tenants/{tenant_id}/psm/employees
POST   /api/v1/tenants/{tenant_id}/psm/employees
```

### HTTP ë©”ì„œë“œ

| ë©”ì„œë“œ | ëª©ì  | ì˜ˆ |
|--------|------|-----|
| GET | ì¡°íšŒ | GET /users |
| POST | ìƒì„± | POST /users |
| PUT | ì „ì²´ ìˆ˜ì • | PUT /users/123 |
| PATCH | ë¶€ë¶„ ìˆ˜ì • | PATCH /users/123 |
| DELETE | ì‚­ì œ | DELETE /users/123 |

### ì‘ë‹µ í¬ë§·

```json
{
  "success": true,
  "data": { ... },
  "error": null
}
```

### ìƒíƒœ ì½”ë“œ

| ì½”ë“œ | ì˜ë¯¸ | ì‚¬ìš© |
|------|------|------|
| 200 | OK | ì„±ê³µì ì¸ ì¡°íšŒ/ìˆ˜ì • |
| 201 | Created | ì„±ê³µì ì¸ ìƒì„± |
| 204 | No Content | ì„±ê³µì ì¸ ì‚­ì œ |
| 400 | Bad Request | ì˜ëª»ëœ ì…ë ¥ |
| 401 | Unauthorized | ì¸ì¦ í•„ìš” |
| 403 | Forbidden | ê¶Œí•œ ë¶€ì¡± |
| 404 | Not Found | ë¦¬ì†ŒìŠ¤ ì—†ìŒ |
| 500 | Internal Error | ì„œë²„ ì˜¤ë¥˜ |

---

## ë°ì´í„°ë² ì´ìŠ¤ í‘œì¤€

### í…Œì´ë¸” ì„¤ê³„

```sql
CREATE TABLE user (
  -- Primary Key
  id SERIAL PRIMARY KEY,
  
  -- í•µì‹¬ ë°ì´í„°
  username VARCHAR(50) NOT NULL UNIQUE,
  email VARCHAR(120) NOT NULL UNIQUE,
  
  -- ë©€í‹°í…Œë„ŒíŠ¸
  tenant_id INTEGER NOT NULL REFERENCES tenant(id),
  
  -- ìƒíƒœ
  is_active BOOLEAN DEFAULT TRUE,
  is_deleted BOOLEAN DEFAULT FALSE,
  
  -- ê°ì‹œ
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  created_by INTEGER REFERENCES user(id),
  updated_by INTEGER REFERENCES user(id),
  deleted_at TIMESTAMP NULL,
  deleted_by INTEGER REFERENCES user(id),
  
  -- ì œì•½ ì¡°ê±´
  CONSTRAINT chk_email_format CHECK (email ~ '^.+@.+\..+$')
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_user_email ON user(email);
CREATE INDEX idx_user_tenant_id ON user(tenant_id);
CREATE INDEX idx_user_created_at ON user(created_at DESC);
```

### ì—´ íƒ€ì… ì„ íƒ

| íƒ€ì… | ì‚¬ìš© | ì˜ˆ |
|------|------|-----|
| SERIAL | ìë™ì¦ê°€ ID | id SERIAL PRIMARY KEY |
| VARCHAR(n) | ë¬¸ìì—´ | name VARCHAR(100) |
| TEXT | ê¸´ í…ìŠ¤íŠ¸ | description TEXT |
| INTEGER | ì •ìˆ˜ | age INTEGER |
| DECIMAL(p,s) | ê¸ˆì•¡ | price DECIMAL(10,2) |
| BOOLEAN | ì°¸/ê±°ì§“ | is_active BOOLEAN |
| TIMESTAMP | ë‚ ì§œì‹œê°„ | created_at TIMESTAMP |
| DATE | ë‚ ì§œë§Œ | birth_date DATE |
| JSON/JSONB | JSON ë°ì´í„° | metadata JSONB |

---

## ê¶Œí•œ ë° ì—­í•  ëª¨ë¸

### ë§¤ë‹ˆì € ì‹œìŠ¤í…œ (í”Œë«í¼)

```
MANAGER_ADMIN
â”œâ”€â”€ Can manage all tenants
â”œâ”€â”€ Assign tenant admins
â”œâ”€â”€ View platform analytics
â””â”€â”€ Manage billing

MANAGER_OPERATOR
â”œâ”€â”€ Can manage tenants
â”œâ”€â”€ View analytics
â””â”€â”€ Cannot manage billing
```

### í…Œë„ŒíŠ¸ ì‹œìŠ¤í…œ (ê° ê³ ê°ì‚¬)

```
TENANT_ADMIN
â”œâ”€â”€ Can manage tenant users
â”œâ”€â”€ Assign roles within tenant
â”œâ”€â”€ Manage tenant settings
â””â”€â”€ Cannot change plan

TENANT_USER
â”œâ”€â”€ Access assigned modules
â”œâ”€â”€ Create/read/update data
â”œâ”€â”€ Based on role permissions
â””â”€â”€ Cannot manage users
```

### ê¶Œí•œ ì½”ë“œ í˜•ì‹

```
[SYSTEM]_[MODULE]_[ACTION]

ì˜ˆ:
MANAGER_TENANT_CREATE
MANAGER_IDAM_READ
TENANT_PSM_CREATE
TENANT_PSM_UPDATE
TENANT_PSM_DELETE
```

---

## í¬íŠ¸ ë° ì„¤ì •

### ê¸°ë³¸ í¬íŠ¸

| ì„œë¹„ìŠ¤ | í¬íŠ¸ | URL |
|--------|------|-----|
| Backend API | 8100 | http://localhost:8100 |
| API Docs | 8100 | http://localhost:8100/docs |
| Manager Web | 8200 | http://localhost:8200 |
| Tenants Web | 8300 | http://localhost:8300 |
| PostgreSQL | 5432 | localhost:5432 |
| Redis | 6379 | localhost:6379 |
| pgAdmin | 5050 | http://localhost:5050 |

### í™˜ê²½ ë³€ìˆ˜

**ë°±ì—”ë“œ** (.env.local)
```
DATABASE_URL=postgresql://user:pass@localhost/cxg_manager
TENANTS_DATABASE_URL=postgresql://user:pass@localhost/cxg_tenants
REDIS_URL=redis://localhost:6379
API_TITLE=CXG API
API_VERSION=1.0.0
SECRET_KEY=your-secret-key
OPENAI_API_KEY=your-key
```

**í”„ë¡ íŠ¸ì—”ë“œ** (.env.local)
```
NEXT_PUBLIC_API_URL=http://localhost:8100
NEXT_PUBLIC_APP_NAME=CXG Manager
```

---

## ë¹ ë¥¸ ì°¸ê³ 

### ëª¨ë“ˆ ì•½ì

| ì•½ì | ì´ë¦„ | ì„¤ëª… |
|------|------|------|
| IDAM | Identity & Access Management | ì¸ì¦ & ê¶Œí•œ |
| TNNT | Tenant | í…Œë„ŒíŠ¸ ê´€ë¦¬ |
| BILL | Billing | ì²­êµ¬ & ê²°ì œ |
| MNTR | Monitoring | ëª¨ë‹ˆí„°ë§ |
| AUDT | Audit | ê°ì‚¬ ë¡œê·¸ |
| PSM | Personnel | ì¸ì‚¬ ê´€ë¦¬ |
| SRM | Sales & Revenue | ë§¤ì¶œ ê´€ë¦¬ |
| IVM | Inventory | ì¬ê³  ê´€ë¦¬ |
| LWM | Logistics & Warehouse | ë¬¼ë¥˜/ì°½ê³  |
| CSM | Customer Service | ê³ ê° ì„œë¹„ìŠ¤ |
| ASM | Asset | ìì‚° ê´€ë¦¬ |
| FIM | Facility | ì‹œì„¤ ê´€ë¦¬ |
| BIM | Budget | ì˜ˆì‚°/ë¹„ìš© |
| ADM | Administration | í–‰ì • |
| COM | Communication | í†µì‹  |
| SYS | System | ì‹œìŠ¤í…œ |

### ì»¤ë§¨ë“œ ë¹ ë¥¸ ì°¸ê³ 

```bash
# ë°±ì—”ë“œ
python -m venv venv                    # ê°€ìƒ í™˜ê²½
source venv/bin/activate               # í™œì„±í™”
pip install -r requirements.txt        # ì„¤ì¹˜
ruff check src/                        # ë¦°íŒ…
ruff format src/                       # í¬ë§·
mypy src/                              # íƒ€ì… ê²€ì‚¬
pytest tests/                          # í…ŒìŠ¤íŠ¸
alembic upgrade head                   # DB ë§ˆì´ê·¸ë ˆì´ì…˜
uvicorn src.main:app --reload         # ì„œë²„ ì‹œì‘

# í”„ë¡ íŠ¸ì—”ë“œ
pnpm install                           # ì„¤ì¹˜
pnpm dev                               # ê°œë°œ ì„œë²„
pnpm build                             # ë¹Œë“œ
pnpm lint                              # ë¦°íŒ…
pnpm format                            # í¬ë§·
pnpm type-check                        # íƒ€ì… ê²€ì‚¬
pnpm test                              # í…ŒìŠ¤íŠ¸

# Docker
docker compose -f docker-compose.dev.yml up -d      # ì‹œì‘
docker compose -f docker-compose.dev.yml down       # ì¤‘ì§€
docker compose -f docker-compose.dev.yml logs -f    # ë¡œê·¸
```

---

ë” ìì„¸í•œ ì •ë³´ëŠ”:
- [Onboarding Guide](../01_onboarding/00_ì˜¨ë³´ë”©_ì™„ì „ê°€ì´ë“œ_20241108.md)
- [Architecture Guide](../02_architecture/01_ì•„í‚¤í…ì²˜_ì¢…í•©ê°€ì´ë“œ_20241108.md)
- [API Development Guide](../04_api/01_APIê°œë°œê°€ì´ë“œ_20241108.md)

í–‰ë³µí•œ ê°œë°œì„ í•˜ì„¸ìš”! ğŸš€
