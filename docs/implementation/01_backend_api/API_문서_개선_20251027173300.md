# API ë¬¸ì„œ ê°œì„ : Swagger ë³µì¡ë„ í•´ê²°

**ë‚ ì§œ**: 2025-10-27 17:33:00 KST
**ì‘ì„±ì**: Claude (GitHub Copilot CLI)
**ìœ í˜•**: ê°œì„ 
**ì»´í¬ë„ŒíŠ¸**: `apps/backend-api/src/core`

## ê°œìš”

Swagger ë¬¸ì„œê°€ ë„ˆë¬´ ë§ì€ íƒœê·¸ì™€ ì—”ë“œí¬ì¸íŠ¸ë¡œ ë³µì¡í•´ì§„ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì—¬ëŸ¬ ë°©ì•ˆì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## ë¬¸ì œì 

í˜„ì¬ ìƒíƒœ:
- 80ê°œ ì´ìƒì˜ ì„¸ë¶„í™”ëœ íƒœê·¸
- ëª¨ë“  ëª¨ë¸ ìŠ¤í‚¤ë§ˆ í‘œì‹œ
- ëŠë¦° ë¡œë”© ì†ë„
- ì°¾ê³ ì í•˜ëŠ” APIë¥¼ ì°¾ê¸° ì–´ë ¤ì›€

## í•´ê²° ë°©ì•ˆ

### 1. ê°„ì†Œí™”ëœ íƒœê·¸ êµ¬ì¡° (api_docs.py)

**íŠ¹ì§•:**
- 80ê°œ íƒœê·¸ â†’ 15ê°œ ê·¸ë£¹ íƒœê·¸ë¡œ ì¶•ì†Œ
- ì´ëª¨ì§€ë¡œ ì‹œê°ì  êµ¬ë¶„
- ë§ˆí¬ë‹¤ìš´ ì„¤ëª… ì¶”ê°€

**ì‚¬ìš© ë°©ë²•:**
```python
from src.core.api_docs import OPENAPI_CONFIG

app = FastAPI(**OPENAPI_CONFIG)
```

### 2. ë‹¤ì¤‘ ë¬¸ì„œ ë¶„ë¦¬ (multi_docs.py)

**íŠ¹ì§•:**
- ë„ë©”ì¸ë³„ ë…ë¦½ ë¬¸ì„œ
- ì¹´ë“œ í˜•íƒœì˜ ì¸ë±ìŠ¤ í˜ì´ì§€
- ê° ë¬¸ì„œëŠ” ê´€ë ¨ APIë§Œ í¬í•¨

**ì œê³µ ë¬¸ì„œ:**
- `/docs` - ë©”ì¸ ì¸ë±ìŠ¤ í˜ì´ì§€
- `/docs/manager` - ê´€ë¦¬ì API
- `/docs/tenant` - í…Œë„ŒíŠ¸ API
- `/docs/master` - ê¸°ì¤€ì •ë³´ API
- `/docs/business` - ì—…ë¬´ API

### 3. Swagger UI ì»¤ìŠ¤í„°ë§ˆì´ì§• (custom_docs.py)

**ê°œì„  ì‚¬í•­:**
- í•œê¸€ í°íŠ¸ ì ìš©
- ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‘ ì ‘ê¸° (docExpansion: "none")
- ìŠ¤í‚¤ë§ˆ ëª¨ë¸ ìˆ¨ê¸°ê¸° (defaultModelsExpandDepth: -1)
- ê²€ìƒ‰ í•„í„° í™œì„±í™”
- Try it out ê¸°ë³¸ í™œì„±í™”
- ì¸ì¦ ì •ë³´ ìœ ì§€
- ì»¤ìŠ¤í…€ CSS (ê·¸ë¼ë””ì–¸íŠ¸ í—¤ë”, ìŠ¤í¬ë¡¤ë°”)

### 4. ëª¨ë˜ ë¬¸ì„œ ë„êµ¬ (modern_docs.py)

#### Scalar
- ìµœì‹  API ë¬¸ì„œ ë„êµ¬
- 3-panel ë ˆì´ì•„ì›ƒ
- ë¹ ë¥¸ ê²€ìƒ‰
- ì½”ë“œ ìƒì„± ê¸°ëŠ¥
- `/scalar` ì ‘ê·¼

#### Stoplight Elements
- ì¸í„°ë™í‹°ë¸Œí•œ ë¬¸ì„œ
- ì‚¬ì´ë“œë°” ë ˆì´ì•„ì›ƒ
- Try It Out ê°•í™”
- `/elements` ì ‘ê·¼

## íŒŒì¼ êµ¬ì¡°

```
apps/backend-api/src/core/
â”œâ”€â”€ api_docs.py          - ê°„ì†Œí™”ëœ íƒœê·¸ ì •ì˜
â”œâ”€â”€ multi_docs.py        - ë‹¤ì¤‘ ë¬¸ì„œ êµ¬ì„±
â”œâ”€â”€ custom_docs.py       - Swagger UI ì»¤ìŠ¤í„°ë§ˆì´ì§•
â””â”€â”€ modern_docs.py       - Scalar, Stoplight ì„¤ì •
```

## ì ìš© ì˜ˆì‹œ

### ìµœì†Œ ì ìš© (1ë¶„)

```python
# src/main.py
from src.core.api_docs import OPENAPI_CONFIG
from src.core.custom_docs import SWAGGER_UI_PARAMETERS

app = FastAPI(
    **OPENAPI_CONFIG,
    swagger_ui_parameters=SWAGGER_UI_PARAMETERS
)
```

### ê¶Œì¥ ì ìš© (í”„ë¡œë•ì…˜)

```python
# src/main.py
from src.core.api_docs import OPENAPI_CONFIG
from src.core.custom_docs import SWAGGER_UI_PARAMETERS
from src.core.modern_docs import setup_scalar_docs

app = FastAPI(
    **OPENAPI_CONFIG,
    swagger_ui_parameters=SWAGGER_UI_PARAMETERS
)

setup_scalar_docs(app)  # /scalar ì¶”ê°€
```

### í’€ ì ìš© (ëª¨ë“  ì˜µì…˜)

```python
# src/main.py
from src.core.api_docs import OPENAPI_CONFIG
from src.core.custom_docs import setup_custom_docs, SWAGGER_UI_PARAMETERS
from src.core.modern_docs import setup_scalar_docs, setup_stoplight_docs

app = FastAPI(**OPENAPI_CONFIG, docs_url=None)
app.swagger_ui_parameters = SWAGGER_UI_PARAMETERS

setup_custom_docs(app)      # /docs (ì»¤ìŠ¤í…€ Swagger)
setup_scalar_docs(app)      # /scalar
setup_stoplight_docs(app)   # /elements
# ê¸°ë³¸ ReDoc: /redoc
```

## ì£¼ìš” ì„¤ì •ê°’

### SWAGGER_UI_PARAMETERS

```python
{
    "docExpansion": "none",              # ëª¨ë‘ ì ‘ê¸°
    "defaultModelsExpandDepth": -1,      # ìŠ¤í‚¤ë§ˆ ìˆ¨ê¸°ê¸°
    "filter": True,                      # ê²€ìƒ‰ í™œì„±í™”
    "tryItOutEnabled": True,             # Try it out ê¸°ë³¸ í™œì„±í™”
    "persistAuthorization": True,        # ì¸ì¦ ì •ë³´ ìœ ì§€
    "displayRequestDuration": True,      # ìš”ì²­ ì‹œê°„ í‘œì‹œ
    "syntaxHighlight": {
        "activate": True,
        "theme": "monokai"
    }
}
```

### SIMPLIFIED_TAGS (15ê°œ ê·¸ë£¹)

```python
[
    "ğŸ‘¤ Manager-Auth",
    "ğŸ‘¥ Manager-IDAM",
    "ğŸ¢ Manager-Tenant",
    "ğŸ’³ Manager-Billing",
    "ğŸ“Š Manager-Monitoring",
    "ğŸ” Tenant-Auth",
    "ğŸ“‹ Tenant-Master",
    "âœ… Tenant-Approval",
    "ğŸ‘¥ Tenant-HR",
    "ï¿½ï¿½ Tenant-CRM",
    "ğŸ“¦ Tenant-Product",
    "ğŸ›’ Tenant-Purchase",
    "ğŸ’° Tenant-Sales",
    "ğŸ’µ Tenant-Finance",
    "ğŸ“Š Tenant-BI",
    "âš™ï¸ Tenant-Workflow"
]
```

## íš¨ê³¼

### Before
- 80+ ì„¸ë¶„í™”ëœ íƒœê·¸
- ëª¨ë“  ìŠ¤í‚¤ë§ˆ ëª¨ë¸ í‘œì‹œ
- ëŠë¦° ë¡œë”©
- ì°¾ê¸° ì–´ë ¤ìš´ êµ¬ì¡°

### After
- 15ê°œ ê·¸ë£¹ íƒœê·¸
- ìŠ¤í‚¤ë§ˆ ëª¨ë¸ ìˆ¨ê¹€
- ë¹ ë¥¸ ë¡œë”©
- ê²€ìƒ‰ í•„í„°ë¡œ ë¹ ë¥¸ íƒìƒ‰
- ì„ íƒ ê°€ëŠ¥í•œ ì—¬ëŸ¬ ë¬¸ì„œ ìŠ¤íƒ€ì¼

## ì¶”ê°€ ê°œì„  ì‚¬í•­

### 1. API ë¼ìš°í„°ì—ì„œ íƒœê·¸ ì§€ì •

```python
# ê¸°ì¡´
@router.get("/users")

# ë³€ê²½
@router.get("/users", tags=["ğŸ‘¥ Manager-IDAM"])
```

### 2. ì—”ë“œí¬ì¸íŠ¸ ìš”ì•½ ê°œì„ 

```python
@router.get(
    "/users/{user_id}",
    summary="ì‚¬ìš©ì ì¡°íšŒ",
    description="IDë¡œ íŠ¹ì • ì‚¬ìš©ìì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤."
)
```

### 3. Response ëª¨ë¸ ê°„ì†Œí™”

```python
# ê³µí†µ ì‘ë‹µ envelope ì‚¬ìš©
class EnvelopeResponse(BaseModel):
    success: bool
    data: Any
    message: str | None = None
```

## ì°¸ê³  ë§í¬

- [Scalar Documentation](https://github.com/scalar/scalar)
- [Stoplight Elements](https://stoplight.io/open-source/elements)
- [FastAPI Custom Docs](https://fastapi.tiangolo.com/advanced/custom-docs-ui/)

## í–¥í›„ ê³„íš

1. **API ë²„ì „ ê´€ë¦¬**: v1, v2 ë¬¸ì„œ ë¶„ë¦¬
2. **ì¸ì¦ ì˜ˆì‹œ**: ê° ë¬¸ì„œì— ìƒ˜í”Œ í† í° ì œê³µ
3. **ì½”ë“œ ìƒ˜í”Œ**: ì–¸ì–´ë³„ ì½”ë“œ ì˜ˆì‹œ ìƒì„±
4. **Postman Collection**: ìë™ ìƒì„± ë° ë‹¤ìš´ë¡œë“œ

## ê²°ë¡ 

ì—¬ëŸ¬ ë°©ì•ˆì„ ì œê³µí•˜ì—¬ íŒ€ì´ë‚˜ ì‚¬ìš©ìê°€ ì„ í˜¸í•˜ëŠ” ìŠ¤íƒ€ì¼ì„ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.

**ìµœì†Œ ê¶Œì¥:**
- íƒœê·¸ ê°„ì†Œí™” + Swagger UI íŒŒë¼ë¯¸í„°

**í”„ë¡œë•ì…˜ ê¶Œì¥:**
- íƒœê·¸ ê°„ì†Œí™” + ì»¤ìŠ¤í…€ Swagger + Scalar

ëª¨ë“  ì½”ë“œëŠ” ì¦‰ì‹œ ì ìš© ê°€ëŠ¥í•˜ë©°, ê¸°ì¡´ FastAPI ì•±ê³¼ í˜¸í™˜ë©ë‹ˆë‹¤.
