# 통계카드 디자인 통일

**날짜**: 2025-10-19 11:23:15 KST
**작성자**: Claude Code
**유형**: 개선
**컴포넌트**: StatsCards, StatCard, ListPageLayout, Dashboard, Overview

## 개요

모든 페이지의 통계카드를 사용자관리 페이지의 통계카드 디자인 스타일로 통일했습니다. 기존에는 각 페이지마다 서로 다른 통계카드 스타일을 사용하고 있어 일관성이 부족했습니다.

## 식별된 문제점

1. **manager-web**에서 여러 통계카드 컴포넌트 사용:
   - `@/components/stats/stats-cards` (사용자관리, 역할관리, 테넌트관리 페이지)
   - `@/features/dashboard/components/stat-card` (대시보드 페이지)
   - `@/components/layout/list-page-layout` 내부의 인라인 통계카드 (청구서, 알림 페이지)

2. **tenants-web**에서 커스텀 통계카드 스타일 사용:
   - overview 페이지에서 인라인으로 구현된 통계카드

3. 각 구현마다 다른 시각적 스타일과 애니메이션 효과 적용

## 변경 내용

### 1. manager-web 통계카드 통일

#### 1.1 대시보드 페이지 수정
- **파일**: `apps/manager-web/src/app/(main)/core/dashboard/page.tsx`
- **변경**: `@/features/dashboard/components/stat-card` → `@/components/stats/stats-cards` 사용
- **코드 변경**:

```typescript
// 변경 전
import { StatCard } from "@/features/dashboard/components/stat-card";

<div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
  <StatCard
    title="Active Tenants"
    value="1,248"
    icon={<Users className="h-4 w-4" />}
    iconBgColor="rgba(51, 162, 229, 0.2)"
    iconColor="#33a2e5"
  />
  ...
</div>

// 변경 후
import { StatsCards } from "@/components/stats/stats-cards";

const stats = [
  {
    title: "Active Tenants",
    value: "1,248",
    icon: <Users className="h-5 w-5" />,
    color: "primary" as const,
  },
  ...
];

<StatsCards cards={stats} columns={4} />
```

#### 1.2 ListPageLayout 리팩토링
- **파일**: `apps/manager-web/src/components/layout/list-page-layout.tsx`
- **변경**: 내부 통계카드 렌더링 로직 제거, 간소화
- **이유**: StatsCards 컴포넌트를 직접 사용하도록 하여 중복 코드 제거

```typescript
// 변경 전
interface ListPageLayoutProps {
  stats?: StatCardData[];
  // ... 내부에서 통계카드 렌더링
}

// 변경 후
interface ListPageLayoutProps {
  // stats prop 제거
  // 각 페이지에서 StatsCards를 직접 children으로 전달
}
```

#### 1.3 청구서 페이지 수정
- **파일**: `apps/manager-web/src/app/(main)/bill/invoices/page.tsx`
- **변경**: ListPageLayout의 stats prop 대신 StatsCards 컴포넌트 직접 사용

```typescript
// 변경 전
<ListPageLayout stats={stats} ...>
  <InvoiceTable ... />
</ListPageLayout>

// 변경 후
<ListPageLayout ...>
  <StatsCards cards={stats} columns={4} />
  <Card>
    <CardContent className="pt-6">
      <InvoiceTable ... />
    </CardContent>
  </Card>
</ListPageLayout>
```

#### 1.4 알림 페이지 수정
- **파일**: `apps/manager-web/src/app/(main)/noti/notifications/page.tsx`
- **변경**: 동일한 패턴 적용

### 2. tenants-web 통계카드 통일

#### 2.1 StatsCard 컴포넌트 추가
- **파일**: `apps/tenants-web/src/components/stats/stats-card.tsx` (신규 생성)
- **내용**: manager-web의 StatCard와 동일한 디자인 구현
- **특징**:
  - 배경 그라디언트 효과
  - 호버 애니메이션 (shadow, scale, translate)
  - 배경 아이콘 (회전, 투명도)
  - 색상 테마 지원 (default, primary, success, warning, danger)
  - Trend 표시 지원

#### 2.2 StatsCards 컴포넌트 리팩토링
- **파일**: `apps/tenants-web/src/components/stats/stats-cards.tsx`
- **변경**: 인라인 구현 → StatCard 컴포넌트 사용

```typescript
// 변경 전
export function StatsCards({ cards, columns = 4, className }: StatsCardsProps) {
  return (
    <div className={cn("grid gap-4", gridCols[columns], className)}>
      {cards.map((card, index) => (
        <div className="...인라인 구현...">
          {/* 복잡한 인라인 마크업 */}
        </div>
      ))}
    </div>
  );
}

// 변경 후
export function StatsCards({ cards, columns = 4, className }: StatsCardsProps) {
  return (
    <div className={cn("grid gap-4", columnClasses[columns], className)}>
      {cards.map((card, index) => (
        <StatCard key={index} {...card} />
      ))}
    </div>
  );
}
```

#### 2.3 Overview 페이지 수정
- **파일**: `apps/tenants-web/src/app/(main)/overview/page.tsx`
- **변경**: 인라인 통계카드 → StatsCards 컴포넌트 사용

```typescript
// 변경 전
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
  {stats.map((stat, index) => (
    <div className="bg-white dark:bg-gray-800 ...">
      {/* 인라인 마크업 */}
    </div>
  ))}
</div>

// 변경 후
const statsCards = [
  {
    title: "총 고객",
    value: "1,234",
    description: "12.5% 증가",
    trend: { value: 12.5, isPositive: true },
    icon: <Users className="h-5 w-5" />,
    color: "primary" as const,
  },
  ...
];

<StatsCards cards={statsCards} columns={4} />
```

## 통계카드 디자인 특징

### 시각적 요소

1. **배경 효과**:
   - 그라디언트 배경 (opacity 기반, 호버시 증가)
   - 색상별 테마 지원

2. **아이콘**:
   - 우측 상단에 대형 배경 아이콘 (회전 15도, opacity 5%)
   - 호버시 scale 및 회전 애니메이션

3. **호버 효과**:
   - Shadow 증가
   - Y축 -translate (상승 효과)
   - 배경 opacity 증가
   - 값 텍스트 scale 증가

4. **색상 테마**:
   - `default`: 회색 계열
   - `primary`: 프라이머리 색상
   - `success`: 초록색 (emerald-500)
   - `warning`: 주황색 (orange-500)
   - `danger`: 빨간색 (destructive)

### Props 인터페이스

```typescript
interface StatCardProps {
  title: string;              // 카드 제목
  value: string | number;     // 주요 값
  description?: string;       // 부가 설명
  icon?: React.ReactNode;     // 아이콘
  trend?: {                   // 추세 표시
    value: number;
    isPositive: boolean;
    label?: string;
  };
  color?: "default" | "primary" | "success" | "warning" | "danger";
  className?: string;
}
```

## 변경된 파일 목록

### manager-web
1. `apps/manager-web/src/app/(main)/core/dashboard/page.tsx`
2. `apps/manager-web/src/components/layout/list-page-layout.tsx`
3. `apps/manager-web/src/app/(main)/bill/invoices/page.tsx`
4. `apps/manager-web/src/app/(main)/noti/notifications/page.tsx`

### tenants-web
1. `apps/tenants-web/src/components/stats/stats-card.tsx` (신규)
2. `apps/tenants-web/src/components/stats/stats-cards.tsx`
3. `apps/tenants-web/src/app/(main)/overview/page.tsx`

## 테스트

### 시각적 확인 사항
1. ✅ 모든 페이지의 통계카드가 동일한 디자인을 가지는지 확인
2. ✅ 호버 애니메이션이 정상 작동하는지 확인
3. ✅ 다크 모드에서도 정상 표시되는지 확인
4. ✅ 다양한 화면 크기(모바일, 태블릿, 데스크톱)에서 그리드 레이아웃 확인

### 기능 확인 사항
1. ✅ Trend 표시가 올바르게 동작하는지 확인 (↑/↓ 화살표, 색상)
2. ✅ 다양한 color prop이 올바르게 적용되는지 확인
3. ✅ columns prop (2, 3, 4)이 올바른 그리드를 생성하는지 확인

### 테스트 방법

```bash
# 개발 서버 실행
cd apps/manager-web
pnpm dev

cd apps/tenants-web
pnpm dev
```

**확인할 페이지**:
- manager-web: `/core/dashboard`, `/idam/users`, `/idam/roles`, `/tnnt/tenant`, `/bill/invoices`, `/noti/notifications`
- tenants-web: `/overview`

## 향후 개선사항

1. **공통 패키지로 이동**:
   - 현재 manager-web과 tenants-web에 각각 StatsCard/StatsCards 컴포넌트가 존재
   - `packages/ui-components`로 이동하여 코드 중복 제거 고려

2. **애니메이션 커스터마이징**:
   - 현재는 모든 카드에 동일한 애니메이션 적용
   - prop을 통해 애니메이션 비활성화 또는 커스터마이징 옵션 추가 고려

3. **접근성 개선**:
   - 키보드 포커스 스타일 추가
   - ARIA 속성 추가 (role, aria-label 등)

4. **성능 최적화**:
   - React.memo를 사용한 불필요한 리렌더링 방지
   - 애니메이션 성능 최적화 (will-change 속성 활용)

## 참고사항

- 기존 `@/features/dashboard/components/stat-card.tsx` 컴포넌트는 더 이상 사용되지 않으므로 추후 제거 고려
- ListPageLayout의 stats prop을 제거함으로써, 각 페이지에서 StatsCards를 직접 배치할 수 있어 더 유연한 레이아웃 구성 가능
- 모든 통계카드 아이콘은 `h-5 w-5` 크기로 통일 (기존 `h-4 w-4`에서 변경)
