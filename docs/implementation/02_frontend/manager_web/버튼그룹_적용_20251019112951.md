# 버튼 그룹 적용

**날짜**: 2025-10-19 11:29:51 KST
**작성자**: Claude Code
**유형**: 개선
**컴포넌트**: ButtonGroup, 페이지 액션 버튼, 페이지네이션

## 개요

페이지 제목표시줄의 버튼들과 데이터 테이블의 페이지네이션을 shadcn/ui 스타일의 ButtonGroup 컴포넌트로 통일했습니다. 이를 통해 UI의 일관성을 높이고 사용자 경험을 개선했습니다.

## 식별된 문제점

1. **일관성 없는 버튼 그룹 스타일**:
   - 일부 페이지는 수동으로 `rounded-r-none`, `border-r-0` 등의 클래스를 적용
   - 다른 페이지는 개별 버튼을 gap으로 구분
   - 페이지네이션은 개별 버튼들을 `gap-0.5`로 배치

2. **코드 중복**:
   - 버튼 그룹 스타일링을 위한 클래스가 여러 파일에 반복적으로 작성됨
   - 유지보수 시 모든 파일을 개별적으로 수정해야 함

3. **시각적 불일치**:
   - 페이지마다 버튼 그룹의 모양과 간격이 다름
   - 전문적이지 않은 UI 인상

## 변경 내용

### 1. ButtonGroup 컴포넌트 추가

#### 파일 생성
- **파일**: `apps/manager-web/src/components/ui/button-group.tsx` (신규)
- **기능**: 자식 버튼들을 자동으로 그룹화하여 연결된 모양으로 렌더링

```typescript
import * as React from "react";
import { cn } from "@/lib/utils";

const ButtonGroup = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, children, ...props }, ref) => {
  return (
    <div
      ref={ref}
      className={cn("inline-flex rounded-lg shadow-sm", className)}
      role="group"
      {...props}
    >
      {React.Children.map(children, (child, index) => {
        if (!React.isValidElement(child)) return child;

        const isFirst = index === 0;
        const isLast = index === React.Children.count(children) - 1;

        const childElement = child as React.ReactElement<{ className?: string }>;

        return React.cloneElement(childElement, {
          className: cn(
            childElement.props.className,
            // Remove individual rounded corners
            "rounded-none",
            // Add border radius to first and last elements
            isFirst && "rounded-l-lg",
            isLast && "rounded-r-lg",
            // Remove double borders between buttons
            !isLast && "border-r-0"
          ),
        });
      })}
    </div>
  );
});

ButtonGroup.displayName = "ButtonGroup";

export { ButtonGroup };
```

#### 주요 특징
- **자동 스타일링**: 첫 번째/마지막 버튼의 모서리만 둥글게 처리
- **경계선 최적화**: 버튼 사이의 중복 경계선 제거
- **유연성**: 모든 shadcn/ui Button variant와 호환
- **접근성**: `role="group"` 속성으로 ARIA 지원

### 2. 페이지 액션 버튼 적용

관련 페이지들의 액션 버튼을 ButtonGroup으로 그룹화했습니다.

#### 2.1 사용자 관리 페이지
- **파일**: `apps/manager-web/src/app/(main)/idam/users/page.tsx`

```typescript
// 변경 전
const actions = (
  <>
    <Button variant="outline" onClick={handleRefresh}>
      <RefreshCw className="mr-2 h-4 w-4" />
      새로고침
    </Button>
    <Button variant="outline" onClick={handleExport}>
      <Download className="mr-2 h-4 w-4" />
      내보내기
    </Button>
    <Button onClick={handleAddUser}>
      <UserPlus className="mr-2 h-4 w-4" />
      사용자 추가
    </Button>
  </>
);

// 변경 후
const actions = (
  <>
    <ButtonGroup>
      <Button variant="outline" onClick={handleRefresh}>
        <RefreshCw className="mr-2 h-4 w-4" />
        새로고침
      </Button>
      <Button variant="outline" onClick={handleExport}>
        <Download className="mr-2 h-4 w-4" />
        내보내기
      </Button>
    </ButtonGroup>
    <Button onClick={handleAddUser}>
      <UserPlus className="mr-2 h-4 w-4" />
      사용자 추가
    </Button>
  </>
);
```

#### 2.2 역할 관리 페이지
- **파일**: `apps/manager-web/src/app/(main)/idam/roles/page.tsx`
- **변경**: 사용자 관리 페이지와 동일한 패턴 적용

#### 2.3 테넌트 관리 페이지
- **파일**: `apps/manager-web/src/app/(main)/tnnt/tenant/page.tsx`
- **변경**: 사용자 관리 페이지와 동일한 패턴 적용

#### 2.4 청구서 페이지
- **파일**: `apps/manager-web/src/app/(main)/bill/invoices/page.tsx`

```typescript
// 변경 전
const actions = (
  <div className="inline-flex rounded-md shadow-sm" role="group">
    <Button
      variant="outline"
      onClick={handleRefresh}
      className="rounded-r-none border-r-0"
    >
      <RefreshCw className="mr-2 h-4 w-4" />
      새로고침
    </Button>
    <Button
      variant="outline"
      onClick={handleExport}
      className="rounded-l-none"
    >
      <Download className="mr-2 h-4 w-4" />
      내보내기
    </Button>
  </div>
);

// 변경 후
const actions = (
  <ButtonGroup>
    <Button variant="outline" onClick={handleRefresh}>
      <RefreshCw className="mr-2 h-4 w-4" />
      새로고침
    </Button>
    <Button variant="outline" onClick={handleExport}>
      <Download className="mr-2 h-4 w-4" />
      내보내기
    </Button>
  </ButtonGroup>
);
```

**개선 사항**:
- 수동 클래스(`rounded-r-none`, `border-r-0` 등) 제거
- ButtonGroup이 자동으로 스타일 적용
- 코드 간결성 및 가독성 향상

### 3. 페이지네이션 적용

데이터 테이블의 페이지네이션 버튼들을 ButtonGroup으로 통합했습니다.

- **파일**: `apps/manager-web/src/components/ui/data-table.tsx`

```typescript
// 변경 전
<div className="flex items-center gap-0.5">
  <Button
    variant="ghost"
    size="icon"
    className="h-9 w-9 rounded-lg hover:bg-accent disabled:opacity-40"
    onClick={() => table.setPageIndex(0)}
    disabled={!table.getCanPreviousPage()}
  >
    <ChevronsLeft className="h-4 w-4" />
  </Button>
  {/* 더 많은 버튼들... */}
</div>

// 변경 후
<ButtonGroup>
  <Button
    variant="ghost"
    size="icon"
    className="h-9 w-9 hover:bg-accent disabled:opacity-40"
    onClick={() => table.setPageIndex(0)}
    disabled={!table.getCanPreviousPage()}
  >
    <ChevronsLeft className="h-4 w-4" />
  </Button>
  {/* 페이지 번호 버튼들 */}
  {getPageNumbers(...).map((pageNum, idx) => (
    pageNum === "..." ? (
      <div key={`ellipsis-${idx}`} className="h-9 w-9 flex items-center justify-center border-y border-r">
        <span className="text-muted-foreground text-sm">⋯</span>
      </div>
    ) : (
      <Button
        key={pageNum}
        variant="ghost"
        size="icon"
        className={cn(
          "h-9 w-9 text-sm font-medium transition-all",
          table.getState().pagination.pageIndex === pageNum
            ? "bg-primary text-primary-foreground hover:bg-primary/90"
            : "hover:bg-accent text-muted-foreground hover:text-foreground"
        )}
        onClick={() => table.setPageIndex(pageNum as number)}
      >
        {(pageNum as number) + 1}
      </Button>
    )
  ))}
  {/* 다음/마지막 페이지 버튼들 */}
</ButtonGroup>
```

**개선 사항**:
- 모든 페이지네이션 버튼이 하나의 그룹으로 연결됨
- 버튼 사이의 gap 제거로 더 통합된 모습
- ellipsis(...) 요소도 그룹 내에 자연스럽게 포함
- `rounded-lg` 클래스 제거 (ButtonGroup이 자동 처리)

## 변경된 파일 목록

### 신규 파일
1. `apps/manager-web/src/components/ui/button-group.tsx`

### 수정 파일
1. `apps/manager-web/src/app/(main)/idam/users/page.tsx`
2. `apps/manager-web/src/app/(main)/idam/roles/page.tsx`
3. `apps/manager-web/src/app/(main)/tnnt/tenant/page.tsx`
4. `apps/manager-web/src/app/(main)/bill/invoices/page.tsx`
5. `apps/manager-web/src/components/ui/data-table.tsx`

## 테스트

### 시각적 확인 사항
1. ✅ 페이지 액션 버튼들이 연결된 그룹으로 표시되는지 확인
2. ✅ 버튼 사이의 경계선이 중복되지 않는지 확인
3. ✅ 첫 번째와 마지막 버튼의 모서리만 둥글게 표시되는지 확인
4. ✅ 페이지네이션 버튼들이 하나의 통합된 그룹으로 보이는지 확인
5. ✅ 호버/포커스 상태가 정상 작동하는지 확인
6. ✅ 다크 모드에서도 정상 표시되는지 확인

### 기능 확인 사항
1. ✅ 모든 버튼의 클릭 이벤트가 정상 작동하는지 확인
2. ✅ disabled 상태의 버튼이 올바르게 표시되는지 확인
3. ✅ 페이지네이션 버튼 클릭 시 페이지 전환이 정상 작동하는지 확인
4. ✅ 활성 페이지 번호가 하이라이트되는지 확인

### 테스트 방법

```bash
# 개발 서버 실행
cd apps/manager-web
pnpm dev
```

**확인할 페이지**:
- `/idam/users` - 사용자 관리
- `/idam/roles` - 역할 관리
- `/tnnt/tenant` - 테넌트 관리
- `/bill/invoices` - 청구서 관리

**테스트 시나리오**:
1. 각 페이지의 액션 버튼 그룹 시각적 확인
2. 새로고침, 내보내기 버튼 클릭
3. 데이터 테이블에서 페이지네이션 조작
4. 라이트/다크 모드 전환 테스트

## 버튼 그룹 사용 가이드

### 기본 사용법

```typescript
import { ButtonGroup } from "@/components/ui/button-group";
import { Button } from "@/components/ui/button";

// 기본 버튼 그룹
<ButtonGroup>
  <Button variant="outline">버튼 1</Button>
  <Button variant="outline">버튼 2</Button>
  <Button variant="outline">버튼 3</Button>
</ButtonGroup>

// 혼합 variant (가능하지만 비추천)
<ButtonGroup>
  <Button variant="outline">Outline</Button>
  <Button variant="default">Default</Button>
  <Button variant="ghost">Ghost</Button>
</ButtonGroup>

// 아이콘 버튼
<ButtonGroup>
  <Button variant="ghost" size="icon">
    <ChevronLeft className="h-4 w-4" />
  </Button>
  <Button variant="ghost" size="icon">
    <ChevronRight className="h-4 w-4" />
  </Button>
</ButtonGroup>
```

### 권장 사항

1. **동일한 variant 사용**: 그룹 내 모든 버튼은 같은 variant 사용 권장
2. **관련 기능 그룹화**: 의미적으로 연관된 버튼들만 그룹화
3. **최대 3-5개 버튼**: 너무 많은 버튼은 가독성 저하
4. **주요 액션 분리**: 중요한 액션(추가, 생성 등)은 그룹 밖에 별도 배치

### 안티 패턴

```typescript
// ❌ 나쁜 예: 너무 많은 버튼
<ButtonGroup>
  <Button>1</Button>
  <Button>2</Button>
  <Button>3</Button>
  <Button>4</Button>
  <Button>5</Button>
  <Button>6</Button>
  <Button>7</Button>
</ButtonGroup>

// ❌ 나쁜 예: 관련 없는 기능 혼합
<ButtonGroup>
  <Button>새로고침</Button>
  <Button>삭제</Button>
  <Button>설정</Button>
</ButtonGroup>

// ✅ 좋은 예: 관련된 기능만 그룹화
<ButtonGroup>
  <Button variant="outline">새로고침</Button>
  <Button variant="outline">내보내기</Button>
</ButtonGroup>
<Button>사용자 추가</Button>
```

## 향후 개선사항

1. **tenants-web 적용**:
   - manager-web의 ButtonGroup을 tenants-web에도 적용
   - 동일한 패턴으로 페이지 액션 버튼 및 페이지네이션 통일

2. **공통 패키지로 이동**:
   - `packages/ui-components`로 ButtonGroup 컴포넌트 이동
   - 양쪽 앱에서 공유하여 중복 제거

3. **추가 variant 지원**:
   - 세그먼트 컨트롤 스타일 (라디오 버튼 그룹)
   - 툴바 스타일
   - 드롭다운과 결합된 split 버튼

4. **키보드 네비게이션**:
   - 화살표 키로 그룹 내 버튼 간 이동
   - Tab 키로 그룹 단위 이동

5. **RTL 지원**:
   - 오른쪽에서 왼쪽 레이아웃 언어 지원

## 참고사항

- ButtonGroup은 React.Children API를 사용하여 자식 요소를 자동으로 스타일링
- Fragment나 조건부 렌더링은 정상 작동하지 않을 수 있으므로 직접 Button 컴포넌트만 자식으로 전달
- ellipsis(...) 같은 non-button 요소도 포함 가능하지만, border 스타일을 수동으로 추가해야 함
- 페이지네이션의 활성 상태 버튼은 `bg-primary`를 사용하여 그룹 내에서도 명확하게 구분됨
