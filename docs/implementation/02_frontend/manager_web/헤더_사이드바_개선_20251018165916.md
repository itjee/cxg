# 헤더 및 사이드바 개선 - Breadcrumb, 사이드바 토글, 검색바 중앙정렬

**날짜**: 2025-10-18 16:59:16 KST
**작성자**: Claude Code
**유형**: 기능 구현
**컴포넌트**: Header, Sidebar, MainLayout, Breadcrumbs

## 개요
메인 헤더에 Breadcrumb 네비게이션을 추가하고, 사이드바 축소/확장 기능을 개선하며, 검색바를 헤더 중앙에 배치하는 UX 개선 작업을 수행했습니다.

## 구현된 기능

### 1. Breadcrumb 네비게이션
- 현재 페이지 경로를 시각적으로 표시하는 Breadcrumb 기능 구현
- 자동으로 경로를 분석하여 적절한 레이블 생성
- 클릭 가능한 링크로 상위 페이지로 이동 가능

### 2. 사이드바 축소/확장
- 헤더의 Menu 버튼을 클릭하여 사이드바 축소/확장
- 축소 시 아이콘만 표시 (너비: 56px)
- 확장 시 전체 메뉴 레이블 표시 (너비: 240px)
- 부드러운 애니메이션 전환 효과

### 3. 헤더 레이아웃 개선
- **좌측**: 사이드바 토글 버튼 + Breadcrumb
- **중앙**: 검색 입력란 (고정 너비 320px)
- **우측**: 테마 토글 + 사용자 메뉴

## 변경 내용

### 새로운 파일

#### `src/lib/breadcrumbs.ts`
Breadcrumb 생성 유틸리티 모듈:

```typescript
export interface BreadcrumbItem {
  label: string;
  href?: string;
}

export function generateBreadcrumbs(pathname: string): BreadcrumbItem[]
```

**주요 기능**:
- 경로 기반 자동 Breadcrumb 생성
- 카테고리 및 페이지 레이블 매핑
- 동적 라우트 지원 (예: `/tnnt/tenant/123`)
- 클릭 가능한 링크와 현재 페이지 구분

**매핑된 카테고리**:
- `tnnt` → 테넌트 관리
- `bill` → 빌링
- `ifra` → 인프라
- `mntr` → 모니터링
- `idam` → 보안
- `audt` → 감사
- `noti` → 알림
- `supt` → 고객 지원
- `intg` → 외부 연동
- `cnfg` → 시스템 구성
- `stat` → 분석
- `auto` → 자동화
- `bkup` → 백업

### 수정된 파일

#### `src/components/layout/header.tsx`
**변경사항**:
1. `breadcrumbs` prop 제거하고 자동 생성으로 변경
2. `usePathname()` 훅 추가하여 현재 경로 감지
3. `generateBreadcrumbs()` 함수로 Breadcrumb 생성
4. 레이아웃을 3개 섹션으로 구성:
   - 좌측: 토글 버튼 + Breadcrumb (flex-1)
   - 중앙: 검색바 (고정 너비 w-80 = 320px)
   - 우측: 테마 토글 + 사용자 메뉴 (flex-shrink-0)

**Breadcrumb 렌더링**:
```tsx
<nav className="flex items-center gap-2 text-sm overflow-x-auto">
  {breadcrumbs.map((crumb, index) => (
    <div key={index} className="flex items-center gap-2 shrink-0">
      {index > 0 && <ChevronRight className="h-4 w-4" />}
      {crumb.href ? (
        <Link href={crumb.href}>...</Link>
      ) : (
        <span>...</span>
      )}
    </div>
  ))}
</nav>
```

#### `src/components/layout/sidebar.tsx`
**변경사항**:
1. 마우스 호버로 확장하는 기능 제거 (`isHovered` 상태 제거)
2. `isExpanded` 로직 단순화: `!collapsed`만 확인
3. 축소 시 아이콘에 `title` 속성 추가 (툴팁 표시)
4. 그룹 아이콘 클릭 시 동작 없음 (축소 상태에서)

**아이콘 전용 표시**:
```tsx
{!isExpanded && "justify-center"}
title={!isExpanded ? item.label : undefined}
```

#### `src/components/layout/main-layout.tsx`
**변경사항**:
- `collapsed` prop을 Header에 전달하지 않음 (Header에서 사용하지 않음)
- 간소화된 구조

## 사용 예시

### Breadcrumb 경로 예시

1. **대시보드**:
   ```
   홈 > 대시보드
   ```

2. **테넌트 목록**:
   ```
   홈 > 테넌트 관리 > 테넛트 목록
   ```

3. **사용자 관리**:
   ```
   홈 > 보안 > 사용자
   ```

4. **동적 라우트 (예: 테넌트 상세)**:
   ```
   홈 > 테넌트 관리 > 테넌트 목록 > {tenant_id}
   ```

### 사이드바 상태

**확장 상태** (기본):
- 너비: 240px
- 로고 + 텍스트 표시
- 메뉴 그룹 전체 표시
- 하위 메뉴 아이템 레이블 표시

**축소 상태**:
- 너비: 56px
- 로고만 표시
- 메뉴 그룹 아이콘만 표시
- 호버 시 툴팁으로 레이블 표시

## 테스트

### 빌드 검증
```bash
cd apps/manager-web
pnpm run build
```
✅ 빌드 성공 (40개 페이지 모두 성공적으로 생성)

### 테스트 시나리오
1. ✅ 헤더의 Menu 버튼 클릭 시 사이드바 축소/확장
2. ✅ 축소된 사이드바에서 아이콘만 표시
3. ✅ 페이지 이동 시 Breadcrumb 자동 업데이트
4. ✅ Breadcrumb 링크 클릭 시 상위 페이지로 이동
5. ✅ 검색바가 헤더 중앙에 고정 표시
6. ✅ 반응형 레이아웃 (flex-1, flex-shrink-0)

## 기술적 고려사항

### CSS 클래스 구조
- `flex-1`: Breadcrumb 영역이 가변 공간 차지
- `flex-shrink-0`: 검색바와 우측 메뉴는 축소되지 않음
- `overflow-x-auto`: 긴 Breadcrumb 경로 시 스크롤 가능
- `transition-all duration-200`: 부드러운 애니메이션

### 접근성
- 축소 상태에서 `title` 속성으로 툴팁 제공
- 키보드 네비게이션 지원 (Link 컴포넌트 사용)
- 의미 있는 HTML 요소 사용 (`<nav>`, `<button>`)

### 성능
- `usePathname()` 훅은 클라이언트 사이드에서만 실행
- Breadcrumb 생성은 O(n) 시간 복잡도 (n = 경로 세그먼트 수)
- 불필요한 리렌더링 최소화

## 향후 개선사항

1. **Breadcrumb 커스터마이징**
   - 페이지별 커스텀 Breadcrumb 설정 가능하도록
   - 메타데이터 기반 Breadcrumb 생성

2. **사이드바 상태 저장**
   - localStorage에 축소/확장 상태 저장
   - 페이지 새로고침 시 상태 유지

3. **검색 기능 구현**
   - 검색 입력 시 실시간 검색 결과 표시
   - 검색 히스토리 저장

4. **반응형 개선**
   - 모바일에서 사이드바 오버레이로 표시
   - 태블릿 화면 크기 최적화

## 참고사항

### 관련 파일
- `src/lib/breadcrumbs.ts` - Breadcrumb 유틸리티
- `src/components/layout/header.tsx` - 헤더 컴포넌트
- `src/components/layout/sidebar.tsx` - 사이드바 컴포넌트
- `src/components/layout/main-layout.tsx` - 메인 레이아웃

### 디자인 토큰
- 사이드바 확장: `w-60` (240px)
- 사이드바 축소: `w-14` (56px)
- 헤더 높이: `h-14` (56px)
- 검색바 너비: `w-80` (320px)
- 애니메이션: `duration-200` (200ms)
