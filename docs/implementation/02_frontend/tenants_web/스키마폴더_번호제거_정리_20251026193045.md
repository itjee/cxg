# Tenants-Web 스키마 폴더 번호 제거 및 정리

**날짜**: 2025-10-26 19:30:45 KST
**작성자**: Claude Code
**유형**: 아키텍처 개선 | 폴더 구조 최적화
**컴포넌트**: tenants-web / App Router / Folder Naming

## 개요

프론트엔드 폴더 구조의 가독성과 사용성을 높이기 위해 스키마 폴더명에서 번호 prefix를 제거했습니다.

이제:
- 폴더명이 더 간결하고 읽기 쉬움
- URL이 더 깔끔함
- 사용자 경험 향상
- 여전히 데이터베이스 스키마와의 매핑 유지

## 변경 내용

### 1. 스키마 폴더 이름 변경

```
변경 전 (번호 포함)          →  변경 후 (번호 제거)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
01_adm                     →  adm
02_hrm                     →  hrm
03_crm                     →  crm
04_pim                     →  pim
05_wms                     →  wms
06_apm                     →  apm
10_ivm                     →  ivm
11_psm                     →  psm
12_srm                     →  srm
13_fsm                     →  fsm
14_fim                     →  fim
15_fam                     →  fam
16_lwm                     →  lwm
20_bim                     →  bim
22_sys                     →  sys
```

### 2. URL 변화

#### 변경 전
```
/22_sys/users
/03_crm/partners
/10_ivm/inventory-movements
/14_fim/accounts
/16_lwm/workflows
```

#### 변경 후
```
/sys/users
/crm/partners
/ivm/inventory-movements
/fim/accounts
/lwm/workflows
```

### 3. 폴더 구조 (간결화)

```
(main)/
├── adm/                 ← Administration (공통 관리)
│   ├── page.tsx
│   ├── code-groups/
│   ├── codes/
│   ├── settings/
│   ├── currencies/
│   ├── exchange-rates/
│   ├── units/
│   └── payment-terms/
├── hrm/                 ← Human Resource Management (신규)
│   ├── page.tsx
│   ├── departments/
│   ├── employees/
│   └── ... (10 엔티티)
├── crm/                 ← Customer Relationship Management
│   ├── page.tsx
│   ├── partners/
│   ├── opportunities/
│   └── ... (20 엔티티)
├── pim/                 ← Product Information Management (신규)
├── wms/                 ← Warehouse Management System (신규)
├── apm/                 ← Approval Management (신규)
├── ivm/                 ← Inventory Management
├── psm/                 ← Procurement/Purchase Management
├── srm/                 ← Sales/Revenue Management
├── fsm/                 ← After Sales/Service Management
├── fim/                 ← Finance/Accounting Management
├── fam/                 ← Fixed Asset Management
├── lwm/                 ← Workflow/Approval Management
├── bim/                 ← Business Intelligence Management
├── sys/                 ← System Configuration & User Management
├── overview/            ← Dashboard
└── layout.tsx
```

## 변경된 파일 목록

### 이름 변경된 폴더 (15개)
```
adm/                (8 엔티티)    - 변경 ✓
apm/                (5 엔티티)    - 변경 ✓
bim/                (5 엔티티)    - 변경 ✓
crm/                (20 엔티티)   - 변경 ✓
fam/                (4 엔티티)    - 변경 ✓
fim/                (10 엔티티)   - 변경 ✓
fsm/                (9 엔티티)    - 변경 ✓
hrm/                (10 엔티티)   - 변경 ✓
ivm/                (11 엔티티)   - 변경 ✓
lwm/                (4 엔티티)    - 변경 ✓
pim/                (17 엔티티)   - 변경 ✓
psm/                (11 엔티티)   - 변경 ✓
srm/                (13 엔티티)   - 변경 ✓
sys/                (11 엔티티)   - 변경 ✓
wms/                (9 엔티티)    - 변경 ✓
```

### 유지된 폴더 & 파일
```
overview/page.tsx    - 유지 ✓
layout.tsx           - 유지 ✓
총 148개 page.tsx    - 모두 유지 ✓
```

## 스키마 약자 매핑 (참고용)

| 약자 | 전체명 | 설명 |
|------|--------|------|
| adm | Administration | 공통 관리 데이터 (코드, 설정) |
| hrm | Human Resource Management | 인사 및 급여 관리 |
| crm | Customer Relationship Management | 고객 관계 관리 |
| pim | Product Information Management | 제품 정보 관리 |
| wms | Warehouse Management System | 창고 관리 |
| apm | Approval Management | 승인 관리 |
| ivm | Inventory Management | 재고 관리 |
| psm | Procurement/Purchase Management | 구매 관리 |
| srm | Sales/Revenue Management | 판매 관리 |
| fsm | After Sales/Service Management | 사후 판매/서비스 관리 |
| fim | Finance/Accounting Management | 재무 회계 관리 |
| fam | Fixed Asset Management | 고정자산 관리 |
| lwm | Workflow/Approval Management | 워크플로우 관리 |
| bim | Business Intelligence Management | 비즈니스 인텔리전스 |
| sys | System Configuration & User Management | 시스템 설정 및 사용자 관리 |

## 주요 개선사항

### 1. 가독성 향상
```typescript
// 변경 전
import { UsersPage } from '@/app/(main)/22_sys/users/page'

// 변경 후
import { UsersPage } from '@/app/(main)/sys/users/page'
```

### 2. URL 간결화
```typescript
// 변경 전
const route = '/22_sys/users'
const route = '/03_crm/partners'

// 변경 후
const route = '/sys/users'
const route = '/crm/partners'
```

### 3. 폴더 네비게이션 용이
- 폴더명만 봐도 기능을 쉽게 파악
- 파일 시스템 탐색이 더 간단
- 자동 완성 기능 사용 시 입력이 짧음

## 데이터베이스 스키마 대응

번호를 제거했지만, 데이터베이스 스키마와의 매핑은 코드에서 처리합니다:

```typescript
// schema-mapping.ts
export const schemaMapping = {
  'adm': '01_adm',
  'hrm': '02_hrm',
  'crm': '03_crm',
  'pim': '04_pim',
  'wms': '05_wms',
  'apm': '06_apm',
  'ivm': '10_ivm',
  'psm': '11_psm',
  'srm': '12_srm',
  'fsm': '13_asm',      // 주의: DB에서는 13_asm
  'fim': '14_fim',
  'fam': '15_fam',
  'lwm': '16_lwm',
  'bim': '20_bim',
  'sys': '22_sys',
}

// API 호출 시
const apiEndpoint = `/api/${schemaMapping[folderName]}/...`
```

## 마이그레이션 가이드

### 기존 코드 수정 필요

#### 1. 경로 import 수정
```typescript
// ❌ 변경 전
import { UsersPage } from '@/app/(main)/22_sys/users/page'
import { PartnersPage } from '@/app/(main)/03_crm/partners/page'

// ✅ 변경 후
import { UsersPage } from '@/app/(main)/sys/users/page'
import { PartnersPage } from '@/app/(main)/crm/partners/page'
```

#### 2. 라우팅 수정
```typescript
// ❌ 변경 전
const routes = [
  { path: '/22_sys/users', label: 'Users' },
  { path: '/03_crm/partners', label: 'Partners' },
]

// ✅ 변경 후
const routes = [
  { path: '/sys/users', label: 'Users' },
  { path: '/crm/partners', label: 'Partners' },
]
```

#### 3. Next.js 리다이렉트 (선택사항)
만약 기존 URL이 사용 중이라면, Next.js 리다이렉트를 사용할 수 있습니다:

```typescript
// next.config.js
module.exports = {
  redirects: async () => [
    {
      source: '/22_sys/:path*',
      destination: '/sys/:path*',
      permanent: true, // 영구 리다이렉트
    },
    {
      source: '/03_crm/:path*',
      destination: '/crm/:path*',
      permanent: true,
    },
    // ... 다른 스키마들
  ],
}
```

## 테스트

개발 서버 실행 및 새로운 URL 확인:

```bash
cd apps/tenants-web
pnpm dev
```

새로운 라우트들:
```
http://localhost:8300/adm
http://localhost:8300/adm/code-groups
http://localhost:8300/hrm/employees
http://localhost:8300/crm/partners
http://localhost:8300/pim/products
http://localhost:8300/wms/warehouses
http://localhost:8300/apm/approval-requests
http://localhost:8300/ivm/inventory-movements
http://localhost:8300/psm/purchase-orders
http://localhost:8300/srm/sales-orders
http://localhost:8300/fsm/service-requests
http://localhost:8300/fim/accounts
http://localhost:8300/fam/fixed-assets
http://localhost:8300/lwm/workflows
http://localhost:8300/bim/kpi-definitions
http://localhost:8300/sys/users
http://localhost:8300/overview
```

## 참고사항

### 1. 스키마 약자의 일관성
- 프론트엔드: `crm` (간단함)
- 백엔드 DB: `03_crm` (명확함)
- API: `/api/03_crm/...` (일관성)

### 2. URL 디자인 철학
- **간결성**: 사용자가 입력하는 URL은 최대한 짧게
- **명확성**: 약자는 충분히 알려져 있어야 함
- **매핑**: 내부적으로는 DB 스키마 번호와 매핑

### 3. 팀 커뮤니케이션
개발팀 내에서는 여전히 스키마 번호를 언급할 수 있습니다:
- "CRM 모듈을 작업하고 있어" (프론트엔드)
- "03_crm 스키마에서 partners 테이블" (백엔드)
- 이해하기 쉬운 별도 문서화 권장

## 향후 고려사항

### 1. 네비게이션 메뉴
메뉴를 구성할 때 약자를 명시적으로 표시:
```typescript
const menuItems = [
  { path: '/adm', label: '관리 (ADM)' },
  { path: '/crm', label: '고객관리 (CRM)' },
  { path: '/hrm', label: '인사관리 (HRM)' },
  // ...
]
```

### 2. 도움말 & 문서
사용자 문서에는 전체 명칭을 포함:
- "CRM (Customer Relationship Management)"
- "HRM (Human Resource Management)"

### 3. 검색 및 필터
검색 기능에서는 약자와 전체명 모두 지원:
```typescript
const search = (query) => {
  return items.filter(item =>
    item.name.includes(query) ||
    item.fullName.includes(query)
  )
}
```

## 관련 문서

- **이전 문서**: `테넌트웹_스키마동기화_폴더구조최적화_20251026192030.md`
  - 데이터베이스 스키마와 매핑 상세 정보
  - 각 스키마별 엔티티 목록

- **CLAUDE.md**: 프로젝트 아키텍처 및 모듈 약자 정의

## 체크리스트

변경 후 확인 항목:
- [ ] 모든 스키마 폴더 이름이 번호 없이 변경됨
- [ ] 각 폴더 내 엔티티 폴더는 유지됨
- [ ] 모든 page.tsx 파일이 여전히 존재함 (148개)
- [ ] overview 폴더와 layout.tsx는 유지됨
- [ ] 개발 서버에서 새로운 URL이 정상 작동함
- [ ] 네비게이션 링크 업데이트 예정

