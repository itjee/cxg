# Tenants-Web 스키마/엔티티 폴더 구조 구현

**날짜**: 2025-10-26 19:06:30 KST
**작성자**: Claude Code
**유형**: 기능 구현 | 아키텍처 개선
**컴포넌트**: tenants-web / App Router / Page Structure

## 개요

ConexGrow Workspace (`tenants-web`)의 `(main)` 앱 라우터에 스키마(Schema)/엔티티(Entity) 기반의 폴더 구조를 구현했습니다. 이는 백엔드의 도메인 기반 아키텍처와 일치하는 프론트엔드 구조를 만들어 코드 관리와 확장성을 개선합니다.

## 문제점

기존에는 일부 모듈 폴더만 존재하고 체계적인 스키마/엔티티 구조가 없어서:
- 새로운 엔티티 추가 시 구조가 일관성이 없음
- 백엔드 도메인과 프론트엔드 구조의 매핑이 명확하지 않음
- 확장성과 유지보수성이 떨어짐

## 변경 내용

### 1. 백엔드 모듈 매핑

CLAUDE.md의 Tenant 모듈 약자를 기준으로 11개의 스키마 폴더를 구성했습니다:

| 약자 | 모듈명 | 한글명 | 설명 |
|------|--------|--------|------|
| adm | Administration | 관리 | 사용자, 역할, 부서, 직원, 창고 관리 |
| asm | Asset Management | 자산 관리 | 자산, 분류, 유지보수 추적 |
| bim | BI/Analytics | 비즈니스 인텔리전스 | 보고서, 대시보드, 분석 |
| com | Communication | 커뮤니케이션 | 메시지, 채널, 알림 |
| csm | Customer/CRM | 고객 관계 | 고객, 연락처, 영업 기회 |
| fim | Finance/Accounting | 재무 회계 | 계정, 송장, 거래 내역 |
| ivm | Inventory Management | 재고 관리 | 재고, 이동, 실사 |
| lwm | Workflow/Approval | 워크플로우 | 프로세스, 승인, 업무 |
| psm | Procurement/Purchasing | 구매 | 구매주문, 공급사, 견적 |
| srm | Sales/Revenue | 판매 | 판매주문, 품목, 가격 |
| sys | System Configuration | 시스템 | 설정, 코드 규칙, 시스템 구성 |

### 2. 폴더 구조

```
(main)/
  ├── adm/                          # 관리
  │   ├── page.tsx                  # 스키마 루트 페이지
  │   ├── users/page.tsx            # 사용자 관리
  │   ├── roles/page.tsx            # 역할 관리
  │   ├── departments/page.tsx      # 부서 관리
  │   ├── employees/page.tsx        # 직원 관리
  │   ├── warehouses/page.tsx       # 창고 관리
  │   ├── companies/                # 회사 관리
  │   ├── partners/                 # 파트너 관리
  │   └── products/                 # 제품 관리
  │
  ├── asm/                          # 자산 관리
  │   ├── page.tsx
  │   ├── assets/page.tsx
  │   ├── asset-categories/page.tsx
  │   └── maintenance/page.tsx
  │
  ├── bim/                          # 비즈니스 인텔리전스
  │   ├── page.tsx
  │   ├── reports/page.tsx
  │   ├── dashboards/page.tsx
  │   └── analytics/page.tsx
  │
  ├── com/                          # 커뮤니케이션
  │   ├── page.tsx
  │   ├── messages/page.tsx
  │   ├── channels/page.tsx
  │   └── notifications/page.tsx
  │
  ├── csm/                          # 고객 관계
  │   ├── page.tsx
  │   ├── customers/page.tsx
  │   ├── contacts/page.tsx
  │   └── opportunities/page.tsx
  │
  ├── fim/                          # 재무 회계
  │   ├── page.tsx
  │   ├── accounts/page.tsx
  │   ├── invoices/page.tsx
  │   └── transactions/page.tsx
  │
  ├── ivm/                          # 재고 관리
  │   ├── page.tsx
  │   ├── inventory/page.tsx
  │   ├── stock-movements/page.tsx
  │   └── stock-counts/page.tsx
  │
  ├── lwm/                          # 워크플로우
  │   ├── page.tsx
  │   ├── workflows/page.tsx
  │   ├── approvals/page.tsx
  │   └── tasks/page.tsx
  │
  ├── psm/                          # 구매
  │   ├── page.tsx
  │   ├── purchase-orders/page.tsx
  │   ├── suppliers/page.tsx
  │   ├── quotations/page.tsx
  │   ├── requests/
  │   ├── orders/
  │   ├── purchases/
  │   ├── receiving/
  │   └── returns/
  │
  ├── srm/                          # 판매
  │   ├── page.tsx
  │   ├── sales-orders/page.tsx
  │   ├── sales-items/page.tsx
  │   └── pricing/page.tsx
  │
  ├── sys/                          # 시스템
  │   ├── page.tsx
  │   ├── settings/page.tsx
  │   ├── code-rules/page.tsx
  │   └── system-config/page.tsx
  │
  ├── overview/page.tsx             # 대시보드
  │
  └── layout.tsx
```

### 3. Page.tsx 템플릿

모든 엔티티 페이지는 다음과 같은 기본 구조를 가집니다:

```typescript
'use client';

export default function EntityPage() {
  return (
    <div className="container mx-auto py-10">
      <h1 className="text-3xl font-bold">Entity Name</h1>
      <p className="text-gray-600 mt-2">Entity Description</p>
    </div>
  );
}
```

### 4. 라우팅 매핑

Next.js App Router의 라우팅이 자동으로 생성됩니다:

```
/adm                           → (main)/adm/page.tsx
/adm/users                     → (main)/adm/users/page.tsx
/adm/roles                     → (main)/adm/roles/page.tsx
/adm/departments               → (main)/adm/departments/page.tsx
/adm/employees                 → (main)/adm/employees/page.tsx
...
/asm/assets                    → (main)/asm/assets/page.tsx
/bim/reports                   → (main)/bim/reports/page.tsx
...
```

## 변경된 파일 목록

### 새로 생성된 폴더 구조

**adm (Administration)**:
- `/adm/users/page.tsx`
- `/adm/roles/page.tsx`
- `/adm/departments/page.tsx`

**asm (Asset Management)**:
- `/asm/assets/page.tsx`
- `/asm/asset-categories/page.tsx`
- `/asm/maintenance/page.tsx`

**bim (BI/Analytics)**:
- `/bim/reports/page.tsx`
- `/bim/dashboards/page.tsx`
- `/bim/analytics/page.tsx`

**com (Communication)**:
- `/com/messages/page.tsx`
- `/com/channels/page.tsx`
- `/com/notifications/page.tsx`

**csm (Customer/CRM)**:
- `/csm/customers/page.tsx`
- `/csm/contacts/page.tsx`
- `/csm/opportunities/page.tsx`

**fim (Finance/Accounting)**:
- `/fim/accounts/page.tsx`
- `/fim/invoices/page.tsx`
- `/fim/transactions/page.tsx`

**ivm (Inventory Management)**:
- `/ivm/inventory/page.tsx`
- `/ivm/stock-movements/page.tsx`
- `/ivm/stock-counts/page.tsx`

**lwm (Workflow/Approval)**:
- `/lwm/workflows/page.tsx`
- `/lwm/approvals/page.tsx`
- `/lwm/tasks/page.tsx`

**psm (Procurement/Purchasing)**:
- `/psm/purchase-orders/page.tsx`
- `/psm/suppliers/page.tsx`
- `/psm/quotations/page.tsx`
- (추가 엔티티: requests, orders, purchases, receiving, returns)

**srm (Sales/Revenue)**:
- `/srm/sales-orders/page.tsx`
- `/srm/sales-items/page.tsx`
- `/srm/pricing/page.tsx`

**sys (System Configuration)**:
- `/sys/settings/page.tsx`
- `/sys/code-rules/page.tsx` (기존 유지)
- `/sys/system-config/page.tsx`

## 테스트

개발 서버를 실행하여 라우트가 정상 작동하는지 확인합니다:

```bash
cd apps/tenants-web
pnpm dev
```

그 후 다음 주소들에 접속하여 각 페이지가 로드되는지 확인:

```
http://localhost:8300/adm
http://localhost:8300/adm/users
http://localhost:8300/asm/assets
http://localhost:8300/bim/reports
http://localhost:8300/csm/customers
http://localhost:8300/fim/accounts
http://localhost:8300/ivm/inventory
http://localhost:8300/lwm/workflows
http://localhost:8300/psm/purchase-orders
http://localhost:8300/srm/sales-orders
http://localhost:8300/sys/settings
```

## 향후 개선사항

### 우선순위

1. **레이아웃 컴포넌트**: 각 스키마별 레이아웃 추가 (선택사항)
   - 공통 네비게이션 및 사이드바 설정

2. **네비게이션 메뉴**: 사이드바에 스키마/엔티티 메뉴 추가
   - 동적 메뉴 생성을 위한 상수 파일 작성

3. **API 엔드포인트 연결**: 각 엔티티 페이지를 실제 API와 연결
   - TanStack Query를 이용한 데이터 페칭

4. **공유 컴포넌트 개발**: 테이블, 폼, 필터 등 재사용 가능한 컴포넌트
   - `packages/ui-components/`에 저장

5. **실제 콘텐츠 구현**: 각 페이지에 CRUD 기능 추가
   - 리스트 조회, 상세 조회, 생성, 수정, 삭제

### 기술 개선

- **TypeScript 타입**: API 응답 타입을 `packages/shared-types/`에 정의
- **API 클라이언트**: Axios 기반 API 호출 래퍼 작성
- **상태 관리**: Zustand 스토어 구조화 (필요시)
- **에러 핸들링**: 통일된 에러 처리 및 사용자 피드백

## 참고사항

### 구조 설계 철학

1. **백엔드와의 일관성**: 백엔드 데이터베이스 모델 구조와 일치하는 폴더명 사용
2. **확장성**: 새로운 엔티티 추가 시 쉽게 폴더와 페이지를 추가할 수 있음
3. **명확성**: 모듈 약자와 한글명으로 각 폴더의 목적을 명확하게 표시
4. **일관성**: 모든 엔티티 페이지는 동일한 구조를 따름

### 관련 문서

- **CLAUDE.md**: 프로젝트 아키텍처 및 모듈 약자 정의
- **Backend Models**: `/apps/backend-api/src/api/models/tenant/` 참고

### 네이밍 규칙

- **폴더명**: kebab-case (예: `stock-movements`, `asset-categories`)
- **파일명**: 모두 소문자 (예: `page.tsx`)
- **컴포넌트명**: PascalCase (예: `UsersPage`)

### 향후 스키마 추가

새로운 스키마를 추가할 때는:

1. `(main)/` 아래에 스키마명으로 폴더 생성
2. `page.tsx` 파일 추가 (스키마 루트 페이지)
3. 엔티티별 폴더와 `page.tsx` 생성
4. 네비게이션 메뉴에 추가
5. 이 문서 업데이트
