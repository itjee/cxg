# 버튼 그룹 컴포넌트 구현 및 적용

**날짜**: 2025-10-18 19:51:20 KST
**작성자**: Claude Code
**유형**: UI 개선
**컴포넌트**: ButtonGroup, 모든 기준정보 페이지

## 개요

shadcn/ui 스타일의 ButtonGroup 컴포넌트를 생성하고, 모든 기준정보 페이지의 상단 액션 버튼을 ButtonGroup으로 통합하여 더욱 세련되고 일관된 UI를 구현했습니다.

## 변경 내용

### 1. ButtonGroup 컴포넌트 생성

새로운 UI 컴포넌트를 생성하여 여러 버튼을 시각적으로 그룹화합니다.

#### 파일 위치
`apps/tenants-web/src/components/ui/button-group.tsx`

#### 주요 기능

**버튼 통합 스타일링**
- 인접한 버튼들을 하나의 그룹으로 결합
- 중간 버튼의 border-radius 제거
- 첫 번째 버튼: 좌측 모서리만 둥글게
- 마지막 버튼: 우측 모서리만 둥글게
- 중간 버튼들 사이의 이중 테두리 제거

**React Children API 활용**
```tsx
React.Children.map(children, (child, index) => {
  const isFirst = index === 0;
  const isLast = index === React.Children.count(children) - 1;
  // 동적으로 className 추가
})
```

**타입 안정성**
```tsx
const childElement = child as React.ReactElement<{ className?: string }>;
```
- TypeScript 타입 에러 방지
- props 접근 시 안전성 보장

### 2. 스타일 구현

#### 기본 컨테이너
```tsx
className="inline-flex rounded-lg shadow-sm"
role="group"
```
- `inline-flex`: 버튼들을 가로로 배치
- `rounded-lg`: 그룹 전체에 둥근 모서리
- `shadow-sm`: 미묘한 그림자 효과
- `role="group"`: 접근성을 위한 ARIA 속성

#### 자식 버튼 스타일 수정
```tsx
className: cn(
  childElement.props.className,    // 기존 스타일 유지
  "rounded-none",                   // 개별 모서리 제거
  isFirst && "rounded-l-lg",        // 첫 버튼 좌측 모서리
  isLast && "rounded-r-lg",         // 마지막 버튼 우측 모서리
  !isLast && "border-r-0"           // 중간 버튼 우측 테두리 제거
)
```

### 3. 모든 페이지 적용

6개 기준정보 페이지의 버튼을 ButtonGroup으로 변경:

#### 변경 전
```tsx
actions={
  <>
    <Button variant="outline" size="sm">...</Button>
    <Button variant="outline" size="sm">...</Button>
    <Button size="sm">...</Button>
  </>
}
```

#### 변경 후
```tsx
actions={
  <ButtonGroup>
    <Button variant="outline" size="sm">...</Button>
    <Button variant="outline" size="sm">...</Button>
    <Button size="sm">...</Button>
  </ButtonGroup>
}
```

## 변경된 파일 목록

### 신규 생성
1. **apps/tenants-web/src/components/ui/button-group.tsx** (신규)
   - ButtonGroup 컴포넌트 구현
   - 타입 정의 및 스타일 로직

### 수정된 페이지 (6개)

1. **apps/tenants-web/src/app/(main)/adm/companies/page.tsx**
   - import 추가: `ButtonGroup`
   - actions 영역을 ButtonGroup으로 감싸기
   - 코드 포맷팅 개선

2. **apps/tenants-web/src/app/(main)/adm/departments/page.tsx**
   - 회사 관리와 동일한 패턴 적용

3. **apps/tenants-web/src/app/(main)/adm/employees/page.tsx**
   - 회사 관리와 동일한 패턴 적용

4. **apps/tenants-web/src/app/(main)/adm/partners/page.tsx**
   - 회사 관리와 동일한 패턴 적용
   - 전체 코드 포맷팅 정리

5. **apps/tenants-web/src/app/(main)/adm/products/page.tsx**
   - 회사 관리와 동일한 패턴 적용
   - 전체 코드 포맷팅 정리

6. **apps/tenants-web/src/app/(main)/adm/warehouses/page.tsx**
   - 회사 관리와 동일한 패턴 적용
   - 전체 코드 포맷팅 정리

## 기술 구현 세부사항

### React.cloneElement 활용

ButtonGroup은 자식 컴포넌트의 props를 동적으로 수정합니다:

```tsx
React.cloneElement(childElement, {
  className: cn(
    childElement.props.className,  // 기존 className 보존
    // 추가 className 적용
  )
})
```

**장점:**
- 자식 컴포넌트를 수정하지 않고 스타일 추가
- 부모에서 완전한 제어 가능
- 재사용 가능한 패턴

### cn() 유틸리티 함수

Tailwind의 clsx + tailwind-merge 조합:

```tsx
import { cn } from "@/lib/utils";

className: cn(
  "base-class",
  condition && "conditional-class",
  "another-class"
)
```

**역할:**
- 조건부 className 적용
- 중복 Tailwind 클래스 병합
- undefined/false 값 필터링

### TypeScript 타입 안전성

```tsx
const ButtonGroup = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, children, ...props }, ref) => {
  // ref forwarding으로 외부에서 DOM 접근 가능
})
```

**타입 체인:**
1. `React.isValidElement(child)`: React element 체크
2. `as React.ReactElement<{ className?: string }>`: 타입 단언
3. `childElement.props.className`: 안전한 props 접근

### 접근성 (Accessibility)

```tsx
<div role="group" {...props}>
```

- `role="group"`: 스크린 리더에게 버튼 그룹임을 알림
- 키보드 탐색 시 관련 버튼들로 인식
- ARIA 표준 준수

## 시각적 효과

### 변경 전
```
[내보내기] [가져오기] [회사 등록]
```
- 각 버튼이 개별적으로 분리
- 버튼 사이 간격
- 독립적인 그림자와 테두리

### 변경 후
```
[내보내기|가져오기|회사 등록]
```
- 시각적으로 하나의 단위
- 버튼 사이 세로선으로 구분
- 통합된 그림자 효과
- 세련되고 전문적인 느낌

## 빌드 검증

### 컴파일 결과
```bash
cd apps/tenants-web
pnpm run build
```

결과:
- ✅ `Compiled successfully in 1977ms`
- ✅ 타입 체크 통과
- ✅ 모든 ADM 페이지 정상 빌드
- ⚠️ signin 페이지의 기존 이슈 (별도 수정 필요)

### 타입 에러 해결 과정

**초기 에러:**
```
Type error: 'child.props' is of type 'unknown'.
```

**해결:**
```tsx
// Before
child.props.className

// After
const childElement = child as React.ReactElement<{ className?: string }>;
childElement.props.className
```

명시적 타입 단언으로 TypeScript에게 props 구조 알림

## 테스트

### 시각적 검증
각 페이지별로 확인:
- [ ] 버튼들이 하나로 붙어있음
- [ ] 좌측 버튼의 왼쪽만 둥글게
- [ ] 우측 버튼의 오른쪽만 둥글게
- [ ] 중간 버튼은 양쪽 모서리가 직각
- [ ] 버튼 사이 이중 테두리 없음
- [ ] 그룹 전체에 그림자 효과

### 인터랙션 테스트
- [ ] 각 버튼 개별 클릭 가능
- [ ] 호버 효과 정상 작동
- [ ] 버튼 variant (outline, default) 스타일 유지
- [ ] 아이콘과 텍스트 정렬 유지

### 반응형 테스트
- [ ] 작은 화면에서도 버튼 그룹 유지
- [ ] 모바일에서 터치 영역 충분
- [ ] 다크모드에서 테두리 명확히 구분

### 접근성 테스트
- [ ] 스크린 리더에서 "group" 역할 인식
- [ ] 키보드 탭 탐색으로 모든 버튼 접근
- [ ] 포커스 표시 명확

## 사용 방법

### 기본 사용
```tsx
import { ButtonGroup } from "@/components/ui/button-group";
import { Button } from "@/components/ui/button";

<ButtonGroup>
  <Button variant="outline">버튼 1</Button>
  <Button variant="outline">버튼 2</Button>
  <Button>버튼 3</Button>
</ButtonGroup>
```

### 다양한 variant 조합
```tsx
<ButtonGroup>
  <Button variant="ghost">취소</Button>
  <Button variant="outline">초기화</Button>
  <Button>확인</Button>
</ButtonGroup>
```

### 아이콘 포함
```tsx
<ButtonGroup>
  <Button variant="outline" size="sm">
    <Download className="h-4 w-4 mr-2" />
    내보내기
  </Button>
  <Button variant="outline" size="sm">
    <Upload className="h-4 w-4 mr-2" />
    가져오기
  </Button>
  <Button size="sm">
    <Plus className="h-4 w-4 mr-2" />
    추가
  </Button>
</ButtonGroup>
```

### 커스텀 className
```tsx
<ButtonGroup className="my-4">
  {/* 버튼들 */}
</ButtonGroup>
```

## 디자인 시스템 통합

### shadcn/ui 호환성
- ButtonGroup은 shadcn/ui의 Button 컴포넌트와 완벽 호환
- 동일한 디자인 토큰 사용 (색상, 간격, 그림자)
- cn() 유틸리티로 Tailwind 클래스 관리

### 일관성
모든 기준정보 페이지에서 동일한 패턴:
```tsx
<ListPageLayout
  actions={
    <ButtonGroup>
      <Button variant="outline" size="sm">내보내기</Button>
      <Button variant="outline" size="sm">가져오기</Button>
      <Button size="sm">등록</Button>
    </ButtonGroup>
  }
>
```

## 향후 개선사항

### 1. 세로 방향 ButtonGroup
```tsx
<ButtonGroup orientation="vertical">
  {/* 버튼들이 세로로 배치 */}
</ButtonGroup>
```

### 2. 크기 prop
```tsx
<ButtonGroup size="sm">
  {/* 자식 Button에 자동으로 size="sm" 적용 */}
</ButtonGroup>
```

### 3. 분할 버튼 (Split Button)
```tsx
<ButtonGroup>
  <Button>액션</Button>
  <Button variant="outline" size="sm">
    <ChevronDown className="h-4 w-4" />
  </Button>
</ButtonGroup>
```

### 4. 툴바 컴포넌트
```tsx
<Toolbar>
  <ButtonGroup>...</ButtonGroup>
  <Separator />
  <ButtonGroup>...</ButtonGroup>
</Toolbar>
```

### 5. 반응형 옵션
```tsx
<ButtonGroup collapseOn="mobile">
  {/* 모바일에서는 드롭다운 메뉴로 변경 */}
</ButtonGroup>
```

## 관련 문서

- [shadcn/ui Button](https://ui.shadcn.com/docs/components/button)
- [Radix UI Toolbar](https://www.radix-ui.com/primitives/docs/components/toolbar)
- [통계카드_디자인_적용_20251018193927.md](./통계카드_디자인_적용_20251018193927.md)

## 유지보수 가이드

### ButtonGroup 스타일 수정

**그림자 강도 조정:**
```tsx
className="inline-flex rounded-lg shadow-md"  // shadow-sm → shadow-md
```

**간격 추가:**
```tsx
className="inline-flex gap-px rounded-lg shadow-sm"
```

**배경색 추가:**
```tsx
className="inline-flex rounded-lg shadow-sm bg-gray-100 dark:bg-gray-800"
```

### 새 페이지에 적용

1. ButtonGroup import:
```tsx
import { ButtonGroup } from "@/components/ui/button-group";
```

2. actions 영역 감싸기:
```tsx
actions={
  <ButtonGroup>
    {/* 버튼들 */}
  </ButtonGroup>
}
```

### 트러블슈팅

**버튼 사이 간격이 보임:**
- `gap-*` 클래스 제거
- `border-r-0`이 올바르게 적용되었는지 확인

**모서리가 둥글지 않음:**
- 부모의 `rounded-lg`와 자식의 `rounded-l-lg`, `rounded-r-lg` 확인
- `overflow-hidden` 추가 고려

**타입 에러:**
- 자식이 React.ReactElement인지 확인
- 필요시 `React.isValidElement()` 체크 추가

## 결론

shadcn/ui 스타일의 ButtonGroup 컴포넌트를 성공적으로 구현하고, 모든 기준정보 페이지에 적용했습니다. 이로써 UI의 일관성과 전문성이 크게 향상되었으며, 사용자 경험도 개선되었습니다. ButtonGroup은 재사용 가능한 컴포넌트로, 향후 다른 페이지나 기능에도 쉽게 적용할 수 있습니다.
