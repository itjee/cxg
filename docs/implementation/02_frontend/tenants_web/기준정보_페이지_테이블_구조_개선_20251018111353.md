# 기준정보 페이지 테이블 구조 개선_20251018111353

**날짜**: 2025-01-18 11:13:53 KST
**작성자**: Claude AI
**유형**: 기능 개선
**컴포넌트**: tenants-web, 기준정보 관리 페이지

## 개요
tenants-web의 기준정보 관리 페이지들(회사, 부서, 사원, 제품, 거래처, 창고)의 데이터테이블 구조를 TanStack Table을 기반으로 한 공통 컴포넌트로 개선하였습니다. 이를 통해 일관된 UI/UX와 유지보수성을 향상시켰습니다.

## 주요 변경사항

### 1. 공통 DataTable 컴포넌트 생성

**파일**: `apps/tenants-web/src/components/data-table.tsx`

- TanStack Table 라이브러리를 기반으로 한 재사용 가능한 테이블 컴포넌트 생성
- 주요 기능:
  - 자동 Row Number (NO) 컬럼 추가
  - 페이지네이션 기능 내장
  - 수동/자동 페이지네이션 모드 지원
  - 다크모드 지원

```typescript
interface DataTableProps<TData, TValue> {
  columns: ColumnDef<TData, TValue>[];
  data: TData[];
  totalCount?: number;
  pageSize?: number;
  onPageChange?: (page: number) => void;
  showRowNumber?: boolean;  // 기본값: true
}
```

### 2. 디자인 변경 사항

#### 2.1 Row Number 컬럼 추가
- 모든 테이블의 첫 번째 컬럼에 "NO" 컬럼 자동 추가
- 페이지별 순번이 자동으로 계산됨 (페이지 1: 1~10, 페이지 2: 11~20 등)
- 중앙 정렬 및 고정 너비(60px) 적용

#### 2.2 코드 표시 위치 변경
- **기존**: 별도의 "코드" 컬럼에 표시
- **변경**: 명칭 아래에 작은 글씨로 표시
- 예시:
  ```
  (주)콘엑스그로우
  HQ001           ← 회사코드
  ```

#### 2.3 영문명 제거
- 기존에 명칭 아래 표시되던 영문명(nameEn) 제거
- 코드가 더 중요한 정보이므로 코드로 대체

### 3. 업데이트된 페이지 목록

#### 3.1 회사 관리 (`apps/tenants-web/src/app/(main)/adm/companies/page.tsx`)
- 컬럼 구성: NO, 회사명(+코드), 사업자번호, 대표자, 업종/업태, 연락처, 직원수, 상태, 작업
- 회사명 셀에 회사 아이콘과 회사코드 표시

#### 3.2 부서 관리 (`apps/tenants-web/src/app/(main)/adm/departments/page.tsx`)
- 컬럼 구성: NO, 부서명(+코드), 레벨, 담당자, 연락처, 위치, 인원, 상태, 작업
- 계층 구조 표시를 위한 들여쓰기 유지
- 부서명 셀에 부서코드 표시

#### 3.3 사원 관리 (`apps/tenants-web/src/app/(main)/adm/employees/page.tsx`)
- 컬럼 구성: NO, 사원명(+사번), 부서/직책, 연락처, 입사일, 고용형태, 상태, 작업
- 사원명 셀에 사번 표시
- 프로필 이미지 대신 이니셜 아이콘 사용

#### 3.4 제품 관리 (`apps/tenants-web/src/app/(main)/adm/products/page.tsx`)
- 컬럼 구성: NO, 제품명(+제품코드), 카테고리/SKU, 브랜드, 매입가, 판매가, 재고, 상태, 작업
- 제품명 셀에 제품코드 표시
- 재고량 경고 표시 유지 (안전재고 이하일 경우 빨간색)

#### 3.5 거래처 관리 (`apps/tenants-web/src/app/(main)/adm/partners/page.tsx`)
- 컬럼 구성: NO, 거래처명(+거래처코드), 유형, 대표자/사업자번호, 담당자, 연락처, 거래건수, 등급, 상태, 작업
- 거래처명 셀에 거래처코드 표시

#### 3.6 창고 관리 (`apps/tenants-web/src/app/(main)/adm/warehouses/page.tsx`)
- 컬럼 구성: NO, 창고명(+창고코드), 유형, 주소, 담당자, 면적, 가동률, 구역, 상태, 작업
- 창고명 셀에 창고코드 표시
- 가동률 프로그레스 바 표시 유지

## 기술적 세부사항

### TanStack Table 사용
```typescript
import {
  ColumnDef,
  flexRender,
  getCoreRowModel,
  useReactTable,
  getPaginationRowModel,
} from "@tanstack/react-table";
```

### 컬럼 정의 패턴
```typescript
const columns = useMemo<ColumnDef<DataType>[]>(
  () => [
    {
      accessorKey: "name",
      header: "명칭",
      cell: ({ row }) => (
        <div>
          <p className="text-sm font-medium">{row.original.name}</p>
          <p className="text-xs text-gray-500">{row.original.code}</p>
        </div>
      ),
    },
    // ... 기타 컬럼
  ],
  []
);
```

### Row Number 자동 생성
```typescript
{
  id: "rowNumber",
  header: () => <div className="text-center">NO</div>,
  cell: ({ row }) => (
    <div className="text-center">
      {pagination.pageIndex * pagination.pageSize + row.index + 1}
    </div>
  ),
  size: 60,
}
```

## 변경된 파일 목록

1. `apps/tenants-web/src/components/data-table.tsx` (생성)
2. `apps/tenants-web/src/app/(main)/adm/companies/page.tsx`
3. `apps/tenants-web/src/app/(main)/adm/departments/page.tsx`
4. `apps/tenants-web/src/app/(main)/adm/employees/page.tsx`
5. `apps/tenants-web/src/app/(main)/adm/products/page.tsx`
6. `apps/tenants-web/src/app/(main)/adm/partners/page.tsx`
7. `apps/tenants-web/src/app/(main)/adm/warehouses/page.tsx`

## 테스트 방법

### 개발 서버 실행
```bash
cd apps/tenants-web
pnpm dev
```

### 확인 사항
1. **Row Number 확인**: 모든 테이블의 첫 컬럼에 "NO"가 표시되는지 확인
2. **코드 위치 확인**: 명칭 아래에 코드가 작은 글씨로 표시되는지 확인
3. **영문명 제거 확인**: 기존 영문명이 표시되지 않는지 확인
4. **페이지네이션**: 페이지 이동 시 Row Number가 올바르게 계산되는지 확인
5. **다크모드**: 다크모드 전환 시 테이블 스타일이 올바르게 적용되는지 확인

### 각 페이지별 테스트
- `/adm/companies` - 회사 관리
- `/adm/departments` - 부서 관리
- `/adm/employees` - 사원 관리
- `/adm/products` - 제품 관리
- `/adm/partners` - 거래처 관리
- `/adm/warehouses` - 창고 관리

## 향후 개선사항

### 단기
1. 정렬 기능 추가 (TanStack Table의 sorting 기능 활용)
2. 컬럼 크기 조정 기능 (resizing)
3. 컬럼 표시/숨김 기능

### 중기
1. 서버 사이드 페이지네이션 연동
2. 무한 스크롤 옵션 추가
3. 엑셀 내보내기 기능 강화
4. 행 선택 및 일괄 작업 기능

### 장기
1. 가상화(Virtualization)를 통한 대량 데이터 처리 성능 개선
2. 컬럼 설정 저장 기능 (사용자별 커스터마이징)
3. 고급 필터링 UI 개선

## 참고사항

- TanStack Table 공식 문서: https://tanstack.com/table/v8
- 기존 테이블 스타일과 일관성을 유지하기 위해 동일한 Tailwind CSS 클래스 사용
- 모든 페이지에서 검색, 필터, 통계 영역은 기존과 동일하게 유지
