# GraphQL API ê°œë°œ ë¬¸ì„œ ëª¨ìŒ

> CXG í”Œë«í¼ GraphQL API ê°œë°œì„ ìœ„í•œ ì¢…í•© ê°€ì´ë“œ

---

## ğŸ“š ë¬¸ì„œ ëª©ë¡

### 1. [GraphQL ê°œë°œ ê°€ì´ë“œ](./GraphQL_ê°œë°œê°€ì´ë“œ.md) â­ **í•„ë…**
**ì™„ì „í•œ ê°œë°œ ê°€ì´ë“œ (1,000+ ë¼ì¸)**

ì „ì²´ ì•„í‚¤í…ì²˜ë¶€í„° ì‹¤ë¬´ êµ¬í˜„ê¹Œì§€ ëª¨ë“  ê²ƒì„ ë‹¤ë£¹ë‹ˆë‹¤.

**í¬í•¨ ë‚´ìš©:**
- âœ… ì•„í‚¤í…ì²˜ ì„¤ê³„ (Database-per-Tenant)
- âœ… ë””ë ‰í† ë¦¬ êµ¬ì¡° ë° íŒŒì¼ êµ¬ì„±
- âœ… ì¸ì¦ ë° í…Œë„ŒíŠ¸ ë¼ìš°íŒ…
- âœ… GraphQL ìŠ¤í‚¤ë§ˆ ì„¤ê³„ (Types, Queries, Mutations)
- âœ… DataLoaderë¡œ N+1 ë¬¸ì œ í•´ê²°
- âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ë° í”„ë¡œë¹„ì €ë‹
- âœ… ë³´ì•ˆ ë° ê¶Œí•œ ê´€ë¦¬
- âœ… ëª¨ë‹ˆí„°ë§ ë° ìš´ì˜
- âœ… í…ŒìŠ¤íŠ¸ ì „ëµ
- âœ… ë°°í¬ ê°€ì´ë“œ (Docker, Kubernetes)

**ì½ëŠ” ì‹œê°„:** 1.5-2ì‹œê°„  
**ëŒ€ìƒ:** ë°±ì—”ë“œ ê°œë°œì, API ì•„í‚¤í…íŠ¸

---

### 2. [ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ](./GraphQL_ë¹ ë¥¸ì‹œì‘.md) ğŸš€
**5ë¶„ ì•ˆì— GraphQL API ì‹œì‘í•˜ê¸°**

ì²˜ìŒ ì‹œì‘í•˜ëŠ” ê°œë°œìë¥¼ ìœ„í•œ ë‹¨ê³„ë³„ íŠœí† ë¦¬ì–¼ì…ë‹ˆë‹¤.

**í¬í•¨ ë‚´ìš©:**
- í™˜ê²½ ì„¤ì • (5ë¶„)
- ì²« ë²ˆì§¸ ì¿¼ë¦¬ ì‹¤í–‰
- ì£¼ìš” ì¿¼ë¦¬ í…œí”Œë¦¿
- íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

**ì½ëŠ” ì‹œê°„:** 10-15ë¶„  
**ëŒ€ìƒ:** ëª¨ë“  ê°œë°œì

---

### 3. [ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ](./GraphQL_ë§ˆì´ê·¸ë ˆì´ì…˜_ê°€ì´ë“œ.md) ğŸ”„
**RESTful API â†’ GraphQL ì „í™˜ ì „ëµ**

ê¸°ì¡´ ì‹œìŠ¤í…œì„ ì•ˆì „í•˜ê²Œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ëŠ” ì‹¤ë¬´ ê°€ì´ë“œì…ë‹ˆë‹¤.

**í¬í•¨ ë‚´ìš©:**
- Phaseë³„ ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš (6ë‹¨ê³„)
- Strangler Fig íŒ¨í„´ ì ìš©
- RESTì™€ GraphQL ë³‘í–‰ ìš´ì˜
- ëª¨ë“ˆë³„ ì „í™˜ ì˜ˆì‹œ
- ìë™í™” ë„êµ¬ ë° ìŠ¤í¬ë¦½íŠ¸
- ì§„í–‰ ìƒí™© ì¶”ì 

**ì½ëŠ” ì‹œê°„:** 30-40ë¶„  
**ëŒ€ìƒ:** í…Œí¬ë¦¬ë“œ, ì‹œë‹ˆì–´ ê°œë°œì

---

### 4. [FAQ (ìì£¼ ë¬»ëŠ” ì§ˆë¬¸)](./GraphQL_FAQ.md) â“
**ì‹¤ë¬´ì—ì„œ ìì£¼ ë§ˆì£¼ì¹˜ëŠ” ì§ˆë¬¸ê³¼ ë‹µë³€**

ê°œë°œ ì¤‘ ë§Œë‚˜ëŠ” ì¼ë°˜ì ì¸ ë¬¸ì œë“¤ì˜ í•´ê²°ì±…ì…ë‹ˆë‹¤.

**ì£¼ìš” ì§ˆë¬¸:**
- GraphQL vs REST ì„ íƒ ê¸°ì¤€
- N+1 ë¬¸ì œ í•´ê²° ë°©ë²•
- í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„
- ê¶Œí•œ ì œì–´
- JWT ê´€ë¦¬
- ìºì‹± ì „ëµ
- íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

**ì½ëŠ” ì‹œê°„:** í•„ìš”í•  ë•Œë§ˆë‹¤  
**ëŒ€ìƒ:** ëª¨ë“  ê°œë°œì

---

## ğŸ¯ í•™ìŠµ ê²½ë¡œ

### ì´ˆê¸‰ ê°œë°œì
```
1. ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ (5ë¶„) ğŸš€
   â†“
2. GraphQL ê°œë°œ ê°€ì´ë“œ - ì„¹ì…˜ 1-6 (1ì‹œê°„)
   â†“
3. FAQ - ê¸°ë³¸ ê°œë… (20ë¶„)
   â†“
4. ì‹¤ìŠµ: ê°„ë‹¨í•œ Query/Mutation êµ¬í˜„
```

### ì¤‘ê¸‰ ê°œë°œì
```
1. GraphQL ê°œë°œ ê°€ì´ë“œ - ì „ì²´ (2ì‹œê°„) â­
   â†“
2. ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ - Phase 1-3 (30ë¶„)
   â†“
3. ì‹¤ìŠµ: DataLoader êµ¬í˜„, í…Œë„ŒíŠ¸ ë¼ìš°íŒ…
   â†“
4. FAQ - ì„±ëŠ¥ ìµœì í™” (20ë¶„)
```

### ì‹œë‹ˆì–´/ë¦¬ë“œ ê°œë°œì
```
1. ì „ì²´ ë¬¸ì„œ í›‘ì–´ë³´ê¸° (1ì‹œê°„)
   â†“
2. ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ - ì „ëµ ìˆ˜ë¦½ (1ì‹œê°„) ğŸ”„
   â†“
3. ì•„í‚¤í…ì²˜ ê²€í†  ë° ì»¤ìŠ¤í„°ë§ˆì´ì§•
   â†“
4. íŒ€ êµìœ¡ ìë£Œ ì¤€ë¹„
```

---

## ğŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì¡° í•œëˆˆì— ë³´ê¸°

```
apps/backend-api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/                      # í”„ë ˆì„ì›Œí¬ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ config.py             # í™˜ê²½ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ database.py           # DB ì—°ê²°
â”‚   â”‚   â”œâ”€â”€ security.py           # JWT ì¸ì¦
â”‚   â”‚   â””â”€â”€ tenant_router.py      # í…Œë„ŒíŠ¸ DB ë¼ìš°íŒ… â­
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                    # ORM ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ central/              # Central Admin DB
â”‚   â”‚   â”‚   â””â”€â”€ tenant.py         # í…Œë„ŒíŠ¸ ë©”íƒ€ë°ì´í„°
â”‚   â”‚   â”œâ”€â”€ manager/              # Manager DB
â”‚   â”‚   â””â”€â”€ tenants/              # Tenant DB
â”‚   â”‚       â”œâ”€â”€ sys/              # ì‹œìŠ¤í…œ (users, roles...)
â”‚   â”‚       â”œâ”€â”€ crm/              # ê³ ê°ê´€ë¦¬
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ graphql/                   # GraphQL ë ˆì´ì–´ â­
â”‚   â”‚   â”œâ”€â”€ schema.py             # ë©”ì¸ ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”œâ”€â”€ context.py            # Context íŒ©í† ë¦¬
â”‚   â”‚   â”œâ”€â”€ loaders.py            # DataLoader
â”‚   â”‚   â”œâ”€â”€ permissions.py        # ê¶Œí•œ ì²´í¬
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ types/                # GraphQL íƒ€ì…
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py           # ê³µí†µ (PageInfo, Connection)
â”‚   â”‚   â”‚   â”œâ”€â”€ scalars.py        # ì»¤ìŠ¤í…€ ìŠ¤ì¹¼ë¼
â”‚   â”‚   â”‚   â””â”€â”€ tenants/
â”‚   â”‚   â”‚       â”œâ”€â”€ user.py
â”‚   â”‚   â”‚       â”œâ”€â”€ branch.py
â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ queries/              # Query ë¦¬ì¡¸ë²„
â”‚   â”‚   â”‚   â””â”€â”€ tenants/
â”‚   â”‚   â”‚       â”œâ”€â”€ user.py
â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ mutations/            # Mutation ë¦¬ì¡¸ë²„
â”‚   â”‚       â””â”€â”€ tenants/
â”‚   â”‚           â”œâ”€â”€ user.py
â”‚   â”‚           â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                  # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â””â”€â”€ tenants/
â”‚   â”‚       â””â”€â”€ user_service.py
â”‚   â”‚
â”‚   â””â”€â”€ main.py                    # FastAPI ì•±
â”‚
â”œâ”€â”€ scripts/                       # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ provision_tenant.py       # í…Œë„ŒíŠ¸ í”„ë¡œë¹„ì €ë‹
â”‚   â”œâ”€â”€ migrate_all_tenants.py    # ì¼ê´„ ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ migration_progress.py     # ì§„í–‰ ìƒí™© ì¶”ì 
â”‚
â”œâ”€â”€ tests/                         # í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ graphql/
â”‚   â”‚   â”œâ”€â”€ test_queries.py
â”‚   â”‚   â””â”€â”€ test_mutations.py
â”‚   â””â”€â”€ services/
â”‚
â””â”€â”€ docs/                          # ë¬¸ì„œ (ì—¬ê¸°!)
    â””â”€â”€ 04_api/
        â”œâ”€â”€ GraphQL_ê°œë°œê°€ì´ë“œ.md           â­ í•„ë…
        â”œâ”€â”€ GraphQL_ë¹ ë¥¸ì‹œì‘.md             ğŸš€ ì‹œì‘
        â”œâ”€â”€ GraphQL_ë§ˆì´ê·¸ë ˆì´ì…˜_ê°€ì´ë“œ.md   ğŸ”„ ì „í™˜
        â””â”€â”€ GraphQL_FAQ.md                  â“ ì§ˆë¬¸
```

---

## ğŸ”— ë¹ ë¥¸ ë§í¬

### í•µì‹¬ ê°œë…
- [ì•„í‚¤í…ì²˜ ì„¤ê³„](./GraphQL_ê°œë°œê°€ì´ë“œ.md#2-ì•„í‚¤í…ì²˜-ì„¤ê³„)
- [í…Œë„ŒíŠ¸ ë¼ìš°íŒ…](./GraphQL_ê°œë°œê°€ì´ë“œ.md#5-ì¸ì¦-ë°-í…Œë„ŒíŠ¸-ë¼ìš°íŒ…)
- [GraphQL íƒ€ì… ì„¤ê³„](./GraphQL_ê°œë°œê°€ì´ë“œ.md#6-graphql-ìŠ¤í‚¤ë§ˆ-ì„¤ê³„)

### ì‹¤ë¬´ êµ¬í˜„
- [Query ë¦¬ì¡¸ë²„ êµ¬í˜„](./GraphQL_ê°œë°œê°€ì´ë“œ.md#71-query-ë¦¬ì¡¸ë²„)
- [Mutation ë¦¬ì¡¸ë²„ êµ¬í˜„](./GraphQL_ê°œë°œê°€ì´ë“œ.md#72-mutation-ë¦¬ì¡¸ë²„)
- [DataLoader êµ¬í˜„](./GraphQL_ê°œë°œê°€ì´ë“œ.md#81-dataloader-êµ¬í˜„)

### ìš´ì˜
- [í…Œë„ŒíŠ¸ í”„ë¡œë¹„ì €ë‹](./GraphQL_ê°œë°œê°€ì´ë“œ.md#92-í…Œë„ŒíŠ¸-í”„ë¡œë¹„ì €ë‹-ìŠ¤í¬ë¦½íŠ¸)
- [ë§ˆì´ê·¸ë ˆì´ì…˜](./GraphQL_ê°œë°œê°€ì´ë“œ.md#93-ì „ì²´-í…Œë„ŒíŠ¸-ë§ˆì´ê·¸ë ˆì´ì…˜)
- [ëª¨ë‹ˆí„°ë§](./GraphQL_ê°œë°œê°€ì´ë“œ.md#11-ëª¨ë‹ˆí„°ë§-ë°-ìš´ì˜)

### ë¬¸ì œ í•´ê²°
- [N+1 ë¬¸ì œ](./GraphQL_FAQ.md#q5-n1-ë¬¸ì œë¥¼-ì–´ë–»ê²Œ-í•´ê²°í•˜ë‚˜ìš”)
- [ê¶Œí•œ ì œì–´](./GraphQL_FAQ.md#q7-graphqlì—ì„œ-ê¶Œí•œ-ì œì–´ëŠ”-ì–´ë–»ê²Œ-í•˜ë‚˜ìš”)
- [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](./GraphQL_FAQ.md#-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## ğŸ’» ì½”ë“œ ì˜ˆì‹œ ëª¨ìŒ

### ê°„ë‹¨í•œ Query
```graphql
query GetUsers {
  users(first: 20) {
    edges {
      node {
        id
        username
        fullName
      }
    }
  }
}
```

### ë³µì¡í•œ Query (ê´€ê³„í˜• ë°ì´í„°)
```graphql
query GetUsersWithDepartments {
  users(first: 20) {
    edges {
      node {
        id
        username
        fullName
        department {
          id
          name
          manager {
            fullName
          }
        }
        role {
          name
          permissions
        }
      }
    }
    pageInfo {
      hasNextPage
      totalCount
    }
  }
}
```

### Mutation (ìƒì„±)
```graphql
mutation CreateUser {
  createUser(input: {
    username: "newuser"
    email: "new@example.com"
    password: "SecurePass123!"
    fullName: "New User"
    departmentId: "dept-uuid"
  }) {
    id
    username
    email
    createdAt
  }
}
```

### Variables ì‚¬ìš©
```graphql
query GetUsers($first: Int!, $search: String) {
  users(first: $first, search: $search) {
    edges {
      node {
        id
        username
      }
    }
  }
}

# Variables
{
  "first": 20,
  "search": "john"
}
```

---

## ğŸ›  ê°œë°œ í™˜ê²½ ì„¤ì •

### í•„ìˆ˜ ë„êµ¬
```bash
# Python 3.11+
python --version

# PostgreSQL 15+
psql --version

# Redis (ì„ íƒ)
redis-cli --version
```

### ì˜ì¡´ì„± ì„¤ì¹˜
```bash
cd apps/backend-api

# ê°€ìƒí™˜ê²½
python -m venv venv
source venv/bin/activate

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt
```

### í™˜ê²½ ë³€ìˆ˜
```bash
# .env íŒŒì¼ ìƒì„±
cp .env.example .env

# í•„ìˆ˜ ì„¤ì •
CENTRAL_ADMIN_DATABASE_URL=postgresql://admin:password@localhost:5432/central_admin
SECRET_KEY=your-secret-key-min-32-chars
```

### ì„œë²„ ì‹œì‘
```bash
# ê°œë°œ ì„œë²„
uvicorn src.main:app --reload --port 8100

# GraphQL Playground
open http://localhost:8100/graphql
```

---

## ğŸ“Š í”„ë¡œì íŠ¸ í˜„í™©

### ì™„ë£Œëœ ê¸°ëŠ¥
- âœ… FastAPI ê¸°ë³¸ êµ¬ì¡°
- âœ… Database-per-Tenant ì•„í‚¤í…ì²˜
- âœ… JWT ì¸ì¦
- âœ… RESTful API (ê¸°ì¡´)

### ê°œë°œ ì¤‘
- ğŸ”„ GraphQL ìŠ¤í‚¤ë§ˆ ì„¤ê³„
- ğŸ”„ DataLoader êµ¬í˜„
- ğŸ”„ ê¶Œí•œ ì‹œìŠ¤í…œ í†µí•©

### ê³„íš
- ğŸ“… ì „ì²´ ëª¨ë“ˆ GraphQL ì „í™˜
- ğŸ“… ì‹¤ì‹œê°„ êµ¬ë… (Subscriptions)
- ğŸ“… ì„±ëŠ¥ ìµœì í™”

---

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

### ë¬¸ì„œ ê°œì„ 
1. ì˜¤íƒ€/ì˜¤ë¥˜ ë°œê²¬ â†’ ì¦‰ì‹œ ìˆ˜ì • PR
2. ì˜ˆì‹œ ì¶”ê°€ â†’ examples/ í´ë”ì— ì¶”ê°€
3. FAQ ì¶”ê°€ â†’ GraphQL_FAQ.mdì— ì¶”ê°€

### ì½”ë“œ ê¸°ì—¬
1. ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„±: `feature/graphql-xxx`
2. í…ŒìŠ¤íŠ¸ ì‘ì„± (ì»¤ë²„ë¦¬ì§€ 80%+)
3. PR ìƒì„± ë° ë¦¬ë·° ìš”ì²­

---

## ğŸ“ ë¬¸ì˜

- ğŸ“§ ì´ë©”ì¼: dev@cxg.com
- ğŸ’¬ Slack: #graphql-api
- ğŸ› ì´ìŠˆ: GitHub Issues
- ğŸ“– Wiki: Confluence

---

## ğŸ“ ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|------|-----------|
| 2.0.0 | 2025-11-11 | GraphQL ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ ì´ˆíŒ ì‘ì„± |
| 1.0.0 | 2024-11-08 | RESTful API ê°œë°œ ê°€ì´ë“œ |

---

**í–‰ìš´ì„ ë¹•ë‹ˆë‹¤! ğŸš€**

ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ë¬¸ì˜í•´ì£¼ì„¸ìš”!
