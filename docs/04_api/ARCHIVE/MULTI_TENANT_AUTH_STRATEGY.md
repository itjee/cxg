# ë©€í‹°í…Œë„ŒíŠ¸ ì¸ì¦/ì¸ê°€ ì „ëµ ë° ì‚¬ìš©ì ê´€ë¦¬ ë°©ì•ˆ

**ì‘ì„±ì¼**: 2025-01-06  
**ë²„ì „**: 1.0  
**ìƒíƒœ**: âœ… ê¶Œì¥ ì‚¬í•­ ì œì‹œ  
**ëŒ€ìƒ**: Manager-Web + Tenants-Web ì¸ì¦ êµ¬ì¡° ì„¤ê³„

---

## ğŸ“Œ Executive Summary

ConexGrowëŠ” **ì´ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ + ì´ì¤‘ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜** êµ¬ì¡°ë¡œ ìš´ì˜ë˜ëŠ” B2B SaaS í”Œë«í¼ì…ë‹ˆë‹¤.

### ì‹œìŠ¤í…œ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ConexGrow Platform                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  [Manager-Web]              [Tenants-Web]                â”‚
â”‚  ìš´ì˜ì/í”Œë«í¼ ê´€ë¦¬ì         í…Œë„ŒíŠ¸ ì§ì› ì—…ë¬´ ìˆ˜í–‰         â”‚
â”‚       â†“                           â†“                      â”‚
â”‚  [Manager DB]              [Tenants DB (ê° í…Œë„ŒíŠ¸ë³„)]     â”‚
â”‚  - IDAM (ì¸ì¦/ê¶Œí•œ)          - SYS (ì‚¬ìš©ì/ì—­í• )          â”‚
â”‚  - TNNT (í…Œë„ŒíŠ¸ ë©”íƒ€)        - ì—…ë¬´ ëª¨ë“ˆ (SRM, PSM...)   â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ í•µì‹¬ ì§ˆë¬¸ê³¼ ë‹µë³€

### Q1. ìš´ì˜ìì™€ í…Œë„ŒíŠ¸ ì‚¬ìš©ìì˜ ê¶Œí•œì„ ì–´ë–»ê²Œ ë¶„ë¦¬í•˜ë‚˜?

**A: ë¬¼ë¦¬ì  + ë…¼ë¦¬ì  ì™„ì „ ë¶„ë¦¬**

| êµ¬ë¶„ | Manager-Web | Tenants-Web |
|------|-------------|-------------|
| **ëŒ€ìƒ ì‚¬ìš©ì** | í”Œë«í¼ ìš´ì˜ì, ì‹œìŠ¤í…œ ê´€ë¦¬ì | í…Œë„ŒíŠ¸ ì§ì› (ì¼ë°˜ ì‚¬ìš©ì) |
| **ë°ì´í„°ë² ì´ìŠ¤** | Manager DB (ì¤‘ì•™ ì§‘ì¤‘ì‹) | Tenants DB (í…Œë„ŒíŠ¸ë³„ ë¶„ë¦¬) |
| **ì¸ì¦ í…Œì´ë¸”** | `idam.users` | `sys.users` (tenant_idë¡œ ê²©ë¦¬) |
| **ì—­í•  í…Œì´ë¸”** | `idam.roles` | `sys.roles` (tenant_idë¡œ ê²©ë¦¬) |
| **ê¶Œí•œ ë²”ìœ„** | ê¸€ë¡œë²Œ (ëª¨ë“  í…Œï¿½Ğ°Ğ½Ñ‚) ë˜ëŠ” íŠ¹ì • í…Œë„ŒíŠ¸ | ìì‹ ì˜ í…Œë„ŒíŠ¸ë§Œ |
| **ì ‘ê·¼ URL** | `manager.conexgrow.com` | `{tenant}.conexgrow.com` |

#### ê¶Œí•œ ê³„ì¸µ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tier 1: í”Œë«í¼ ë ˆë²¨ (Manager DB - IDAM)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ ëŒ€ìƒ: ìš´ì˜ì (user_type = MASTER)                      â”‚
â”‚ â€¢ ê¶Œí•œ: í…Œë„ŒíŠ¸ ê´€ë¦¬, í”Œë«í¼ ì„¤ì •, ì²­êµ¬, ê°ì‚¬              â”‚
â”‚ â€¢ ë²”ìœ„: GLOBAL (ëª¨ë“  í…Œë„ŒíŠ¸) ë˜ëŠ” TENANT (íŠ¹ì • í…Œë„ŒíŠ¸)    â”‚
â”‚ â€¢ íŠ¹ì§•: cross-tenant ê¶Œí•œ ê°€ëŠ¥                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“ (ê´€ë¦¬ ëŒ€ìƒ)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tier 2: í…Œë„ŒíŠ¸ ë ˆë²¨ (Tenants DB - SYS)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ ëŒ€ìƒ: í…Œë„ŒíŠ¸ ì§ì› (sys.users)                          â”‚
â”‚ â€¢ ê¶Œí•œ: ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°ëŠ¥ (ì˜ì—…, êµ¬ë§¤, ì¬ê³ , ì¬ë¬´...)         â”‚
â”‚ â€¢ ë²”ìœ„: ìì‹ ì˜ í…Œë„ŒíŠ¸ë§Œ (tenant_idë¡œ ë¬¼ë¦¬ì  ê²©ë¦¬)         â”‚
â”‚ â€¢ íŠ¹ì§•: ì™„ì „ ë…ë¦½, í¬ë¡œìŠ¤ í…Œë„ŒíŠ¸ ë¶ˆê°€                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Q2. í…Œë„ŒíŠ¸ ì‹œìŠ¤í…œì—ì„œ íšŒì›ê°€ì…ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ë‚˜?

**A: âœ… ê´€ë¦¬ì ì´ˆëŒ€ ë°©ì‹ (Invitation-based) ê¶Œì¥**

#### ìµœì‹  B2B SaaS íŠ¸ë Œë“œ (2024-2025)

í˜„ëŒ€ì ì¸ B2B SaaSëŠ” **ìê°€ íšŒì›ê°€ì…(Self Sign-up)ì„ ì œí•œ**í•˜ê³  **ê´€ë¦¬ì ì´ˆëŒ€ ë°©ì‹**ì„ ì„ í˜¸í•©ë‹ˆë‹¤.

##### ğŸ”´ ìê°€ íšŒì›ê°€ì… ë°©ì‹ì˜ ë¬¸ì œì 
```
ë¬¸ì œ 1: ë³´ì•ˆ ìœ„í—˜
  - ëˆ„êµ¬ë‚˜ íšŒì›ê°€ì… â†’ ë¬´ë‹¨ ì ‘ê·¼ ê°€ëŠ¥
  - ì´ë©”ì¼ ë„ë©”ì¸ë§Œìœ¼ë¡œëŠ” ê²€ì¦ ë¶€ì¡±
  - ë‚´ë¶€ ë°ì´í„° ë…¸ì¶œ ìœ„í—˜

ë¬¸ì œ 2: ë°ì´í„° ë¬´ê²°ì„±
  - ë¶€ì„œ, ì§ê¸‰, ê¶Œí•œ ì •ë³´ ëˆ„ë½
  - ìˆ˜ì‘ì—… ë³´ì • í•„ìš”

ë¬¸ì œ 3: ë¹„ìš© ê´€ë¦¬
  - ë¼ì´ì„ ìŠ¤ ìˆ˜ ì´ˆê³¼ ê°€ëŠ¥
  - ì‚¬ìš©ìë‹¹ ê³¼ê¸ˆ ì‹œ ë¶€ë‹´

ë¬¸ì œ 4: ìš´ì˜ ë³µì¡ë„
  - ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ í•„ìš”
  - ì„ì‹œ ê³„ì • ê´€ë¦¬ ë¶€ë‹´
```

##### âœ… ê´€ë¦¬ì ì´ˆëŒ€ ë°©ì‹ì˜ ì¥ì 
```
ì¥ì  1: ë³´ì•ˆ ê°•í™”
  - ìŠ¹ì¸ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼
  - ë¶€ì„œ/ì—­í•  ì‚¬ì „ í• ë‹¹
  - ì±…ì„ ì†Œì¬ ëª…í™•

ì¥ì  2: ìš´ì˜ íš¨ìœ¨ì„±
  - ì´ˆëŒ€ ì‹œ ì •ë³´ ìë™ ì…ë ¥
  - ì¦‰ì‹œ ì—…ë¬´ íˆ¬ì… ê°€ëŠ¥
  - ìˆ˜ì‘ì—… ìµœì†Œí™”

ì¥ì  3: ë¹„ìš© í†µì œ
  - ì •í™•í•œ ë¼ì´ì„ ìŠ¤ ê´€ë¦¬
  - ì˜ˆì‚° ì´ˆê³¼ ë°©ì§€

ì¥ì  4: ì‚¬ìš©ì ê²½í—˜
  - ì˜¨ë³´ë”© í”„ë¡œì„¸ìŠ¤ ì¼ê´€ì„±
  - ì—­í• ë³„ ë§ì¶¤ ì•ˆë‚´
```

---

## ğŸ—ï¸ ê¶Œì¥ ì•„í‚¤í…ì²˜: ì´ì¤‘ ì¸ì¦ ì‹œìŠ¤í…œ

### 1. Manager-Web ì¸ì¦ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ìš´ì˜ì ë¡œê·¸ì¸                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Manager DB - idam.users ì¸ì¦                          â”‚
â”‚    â€¢ username + password í™•ì¸                            â”‚
â”‚    â€¢ user_type í™•ì¸ (MASTER, SYSTEM)                     â”‚
â”‚    â€¢ MFA ê²€ì¦ (í•„ìš”ì‹œ)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ì„¸ì…˜ ìƒì„± (idam.sessions)                             â”‚
â”‚    â€¢ JWT í† í° ë°œê¸‰                                       â”‚
â”‚    â€¢ session_id, expires_at ê¸°ë¡                         â”‚
â”‚    â€¢ ip_address, device_info ì €ì¥                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ê¶Œí•œ ê³„ì‚° (idam.user_roles â†’ idam.role_permissions)   â”‚
â”‚    â€¢ scope í™•ì¸ (GLOBAL / TENANT)                        â”‚
â”‚    â€¢ tenant_context í™•ì¸ (NULL = ì „ì²´, UUID = íŠ¹ì •)      â”‚
â”‚    â€¢ ê¶Œí•œ ì„¸íŠ¸ ìºì‹± (Redis)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Manager-Web ëŒ€ì‹œë³´ë“œ                                  â”‚
â”‚    â€¢ í…Œë„ŒíŠ¸ ê´€ë¦¬                                         â”‚
â”‚    â€¢ ì²­êµ¬ ê´€ë¦¬                                           â”‚
â”‚    â€¢ í”Œë«í¼ ì„¤ì •                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Manager DB ì‚¬ìš©ì íƒ€ì…
```sql
-- idam.users.user_type
CREATE TYPE user_type_enum AS ENUM (
    'MASTER',    -- í”Œë«í¼ ìµœê³  ê´€ë¦¬ì (ìŠˆí¼ ìœ ì €)
    'SYSTEM'     -- ì‹œìŠ¤í…œ ìë™í™” ê³„ì •
);

-- âš ï¸ 'TENANT' íƒ€ì…ì€ ì œê±°ë¨ (Tenants DBì—ì„œë§Œ ê´€ë¦¬)
```

#### ì—­í•  ì¹´í…Œê³ ë¦¬
```sql
-- idam.roles.category
CREATE TYPE role_category_enum AS ENUM (
    'MANAGER_ADMIN',      -- í”Œë«í¼ ìµœê³  ê´€ë¦¬ì
    'PLATFORM_SUPPORT',   -- í”Œë«í¼ ì§€ì›íŒ€
    'TENANT_ADMIN',       -- í…Œë„ŒíŠ¸ ê´€ë¦¬ì (í¬ë¡œìŠ¤ í…Œë„ŒíŠ¸ ê°€ëŠ¥)
    'TENANT_USER'         -- (ì‚¬ìš© ì•ˆ í•¨ - í˜¸í™˜ì„±ìš©)
);
```

---

### 2. Tenants-Web ì¸ì¦ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. í…Œë„ŒíŠ¸ ì§ì› ë¡œê·¸ì¸                                     â”‚
â”‚    â€¢ URL: {tenant_code}.conexgrow.com                    â”‚
â”‚    â€¢ tenant_code ì¶”ì¶œ (ì„œë¸Œë„ë©”ì¸ ë˜ëŠ” ê²½ë¡œ)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. í…Œë„ŒíŠ¸ í™•ì¸ (Manager DB - tnnt.tenants)               â”‚
â”‚    â€¢ tenant_codeë¡œ í…Œë„ŒíŠ¸ ì¡°íšŒ                           â”‚
â”‚    â€¢ status í™•ì¸ (ACTIVE, SUSPENDED, TRIAL)              â”‚
â”‚    â€¢ í…Œë„ŒíŠ¸ DB ì—°ê²° ì •ë³´ íšë“                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Tenants DB - sys.users ì¸ì¦                           â”‚
â”‚    â€¢ username + password í™•ì¸                            â”‚
â”‚    â€¢ tenant_idë¡œ ê²©ë¦¬ (WHERE tenant_id = ?)              â”‚
â”‚    â€¢ is_active í™•ì¸                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ì„¸ì…˜ ìƒì„± (sys.sessions) âš ï¸ í˜„ì¬ ì—†ìŒ - ì¶”ê°€ í•„ìš”     â”‚
â”‚    â€¢ JWT í† í° ë°œê¸‰ (tenant_id + user_id í¬í•¨)            â”‚
â”‚    â€¢ session_id, expires_at ê¸°ë¡                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. ê¶Œí•œ ê³„ì‚° (sys.user_roles â†’ sys.role_permissions)     â”‚
â”‚    â€¢ ì‚¬ìš©ìì˜ ì—­í•  ì¡°íšŒ                                   â”‚
â”‚    â€¢ ëª¨ë“ˆë³„ ê¶Œí•œ í™•ì¸ (module_code: ADM, SRM, PSM...)   â”‚
â”‚    â€¢ ê¶Œí•œ ì„¸íŠ¸ ìºì‹±                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Tenants-Web ì—…ë¬´ í™”ë©´                                 â”‚
â”‚    â€¢ ì˜ì—… ê´€ë¦¬ (SRM)                                     â”‚
â”‚    â€¢ êµ¬ë§¤ ê´€ë¦¬ (PSM)                                     â”‚
â”‚    â€¢ ì¬ê³  ê´€ë¦¬ (IVM)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ ì‚¬ìš©ì ê´€ë¦¬ ë°©ë²•ë¡ 

### ë°©ë²• 1ï¸âƒ£: ê´€ë¦¬ì ì´ˆëŒ€ ë°©ì‹ (âœ… ê¶Œì¥)

#### í”„ë¡œì„¸ìŠ¤ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: ê´€ë¦¬ìê°€ ì§ì› ì •ë³´ ì…ë ¥                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Tenants-Web ê´€ë¦¬ì í˜ì´ì§€                              â”‚
â”‚ â€¢ ì…ë ¥: ì´ë¦„, ì´ë©”ì¼, ë¶€ì„œ, ì§ê¸‰, ì—­í•                     â”‚
â”‚ â€¢ ì‹œìŠ¤í…œì´ ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: sys.users ë ˆì½”ë“œ ìƒì„±                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ INSERT INTO sys.users (                                  â”‚
â”‚     tenant_id,         -- í˜„ì¬ í…Œë„ŒíŠ¸                    â”‚
â”‚     username,          -- ì´ë©”ì¼ ë˜ëŠ” ì‚¬ë²ˆ                â”‚
â”‚     email,             -- ì´ë©”ì¼                         â”‚
â”‚     password_hash,     -- ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ              â”‚
â”‚     first_name,                                          â”‚
â”‚     last_name,                                           â”‚
â”‚     department_id,                                       â”‚
â”‚     position,                                            â”‚
â”‚     is_active,         -- true (ì¦‰ì‹œ í™œì„±í™”)             â”‚
â”‚     created_by         -- ìƒì„±í•œ ê´€ë¦¬ì ID                â”‚
â”‚ );                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: ì´ˆëŒ€ ì´ë©”ì¼ ë°œì†¡                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Subject: ConexGrow ê³„ì •ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤                  â”‚
â”‚                                                          â”‚
â”‚ ì•ˆë…•í•˜ì„¸ìš”, [ì´ë¦„]ë‹˜                                      â”‚
â”‚                                                          â”‚
â”‚ [í…Œë„ŒíŠ¸ëª…]ì˜ ê´€ë¦¬ìê°€ ê·€í•˜ì˜ ê³„ì •ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤.          â”‚
â”‚                                                          â”‚
â”‚ â€¢ ë¡œê·¸ì¸ URL: https://{tenant}.conexgrow.com             â”‚
â”‚ â€¢ ì‚¬ìš©ìëª…: {username}                                   â”‚
â”‚ â€¢ ì„ì‹œ ë¹„ë°€ë²ˆí˜¸: {temp_password}                         â”‚
â”‚                                                          â”‚
â”‚ âš ï¸ ì²« ë¡œê·¸ì¸ í›„ ë°˜ë“œì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•´ì£¼ì„¸ìš”.            â”‚
â”‚                                                          â”‚
â”‚ [ì§€ê¸ˆ ë¡œê·¸ì¸í•˜ê¸°] ë²„íŠ¼                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: ì²« ë¡œê·¸ì¸ - ë¹„ë°€ë²ˆí˜¸ ê°•ì œ ë³€ê²½                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ force_password_change = true í™•ì¸                      â”‚
â”‚ â€¢ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸                       â”‚
â”‚ â€¢ ì •ì±… ê²€ì¦ (8ì ì´ìƒ, íŠ¹ìˆ˜ë¬¸ì í¬í•¨ ë“±)                  â”‚
â”‚ â€¢ ë³€ê²½ í›„ force_password_change = false                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: ì˜¨ë³´ë”© í”„ë¡œì„¸ìŠ¤                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ í”„ë¡œí•„ ì •ë³´ ì…ë ¥ (ì„ íƒ)                                â”‚
â”‚ â€¢ ì—­í• ë³„ íŠœí† ë¦¬ì–¼ ì œê³µ                                    â”‚
â”‚ â€¢ ì—…ë¬´ ì‹œì‘                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

```sql
-- Tenants DB - sys.users
CREATE TABLE sys.users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tenant_id UUID NOT NULL,  -- í…Œë„ŒíŠ¸ ê²©ë¦¬
    
    -- ê³„ì • ì •ë³´
    user_code VARCHAR(50) NOT NULL,      -- ì‚¬ë²ˆ ë˜ëŠ” ID
    username VARCHAR(100) NOT NULL,      -- ë¡œê·¸ì¸ëª…
    email VARCHAR(255) NOT NULL,         -- ì´ë©”ì¼
    password_hash VARCHAR(255) NOT NULL, -- ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ
    
    -- ê°œì¸ ì •ë³´
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    phone VARCHAR(50),
    
    -- ì¡°ì§ ì •ë³´
    department_id UUID,                  -- ë¶€ì„œ FK
    position VARCHAR(100),               -- ì§ê¸‰/ì§ì±…
    
    -- ë³´ì•ˆ
    failed_login_attempts INT DEFAULT 0,
    locked_until TIMESTAMP WITH TIME ZONE,
    last_login_at TIMESTAMP WITH TIME ZONE,
    last_login_ip VARCHAR(45),
    
    -- ë¹„ë°€ë²ˆí˜¸ ì •ì±…
    force_password_change BOOLEAN DEFAULT true,  -- ì²« ë¡œê·¸ì¸ ì‹œ ë³€ê²½ ê°•ì œ
    password_changed_at TIMESTAMP WITH TIME ZONE,
    
    -- ìƒíƒœ
    is_active BOOLEAN DEFAULT true,
    is_deleted BOOLEAN DEFAULT false,
    
    -- ê°ì‚¬
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    created_by UUID,                     -- ìƒì„±í•œ ê´€ë¦¬ì
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_by UUID,
    
    -- ì œì•½
    CONSTRAINT uk_users_tenant_username UNIQUE (tenant_id, username),
    CONSTRAINT uk_users_tenant_email UNIQUE (tenant_id, email),
    CONSTRAINT uk_users_tenant_user_code UNIQUE (tenant_id, user_code)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_users_tenant_active ON sys.users (tenant_id, is_active)
    WHERE is_deleted = false;
```

#### ì—­í•  í• ë‹¹

```sql
-- sys.user_roles í…Œì´ë¸” (âš ï¸ í˜„ì¬ ì—†ìŒ - ì¶”ê°€ ê¶Œì¥)
CREATE TABLE sys.user_roles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tenant_id UUID NOT NULL,
    user_id UUID NOT NULL,
    role_id UUID NOT NULL,
    
    -- í• ë‹¹ ì •ë³´
    granted_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    granted_by UUID,                     -- ëˆ„ê°€ í• ë‹¹í–ˆë‚˜
    
    -- ì„ì‹œ ì—­í•  ì§€ì›
    expires_at TIMESTAMP WITH TIME ZONE, -- ë§Œë£Œì¼ (NULL = ì˜êµ¬)
    
    -- ìƒíƒœ
    is_active BOOLEAN DEFAULT true,
    
    -- ê°ì‚¬
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    revoked_at TIMESTAMP WITH TIME ZONE,
    revoked_by UUID,
    revoke_reason TEXT,
    
    -- ì œì•½
    CONSTRAINT uk_user_roles_tenant_user_role 
        UNIQUE (tenant_id, user_id, role_id),
    CONSTRAINT fk_user_roles_user 
        FOREIGN KEY (user_id) REFERENCES sys.users(id) ON DELETE CASCADE
);
```

---

### ë°©ë²• 2ï¸âƒ£: ìê°€ íšŒì›ê°€ì… + ìŠ¹ì¸ (ì„ íƒì )

íŠ¹ì • ì—…ì¢…(êµìœ¡, ì»¤ë®¤ë‹ˆí‹°)ì—ì„œë§Œ ê³ ë ¤

#### í”„ë¡œì„¸ìŠ¤ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: ì‚¬ìš©ìê°€ íšŒì›ê°€ì… ì‹ ì²­                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ URL: {tenant}.conexgrow.com/signup                     â”‚
â”‚ â€¢ ì…ë ¥: ì´ë¦„, ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸, ë¶€ì„œ ì„ íƒ                 â”‚
â”‚ â€¢ âš ï¸ ì´ë©”ì¼ ë„ë©”ì¸ ê²€ì¦ í•„ìˆ˜                             â”‚
â”‚   (ì˜ˆ: @company.comë§Œ í—ˆìš©)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: ì„ì‹œ ê³„ì • ìƒì„± (pending ìƒíƒœ)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ INSERT INTO sys.users (                                  â”‚
â”‚     tenant_id,                                           â”‚
â”‚     username,                                            â”‚
â”‚     email,                                               â”‚
â”‚     password_hash,                                       â”‚
â”‚     status,            -- 'PENDING_APPROVAL'             â”‚
â”‚     is_active,         -- false (ìŠ¹ì¸ ì „ê¹Œì§€ ë¹„í™œì„±)       â”‚
â”‚ );                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: ê´€ë¦¬ìì—ê²Œ ìŠ¹ì¸ ìš”ì²­ ì•Œë¦¼                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ ì´ë©”ì¼/SMS ë°œì†¡                                        â”‚
â”‚ â€¢ ì•Œë¦¼: "ìƒˆ ì‚¬ìš©ì ê°€ì… ì‹ ì²­"                             â”‚
â”‚ â€¢ ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ìŠ¹ì¸/ê±°ë¶€                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: ê´€ë¦¬ì ìŠ¹ì¸                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ ë¶€ì„œ/ì—­í•  í• ë‹¹                                         â”‚
â”‚ â€¢ is_active = true ë³€ê²½                                  â”‚
â”‚ â€¢ ìŠ¹ì¸ ì´ë©”ì¼ ë°œì†¡                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**âš ï¸ ë‹¨ì :**
- ê´€ë¦¬ì ë¶€ë‹´ ì¦ê°€
- ëŒ€ê¸° ì‹œê°„ ë°œìƒ
- ë¶€ì ì ˆí•œ ê°€ì… ì‹œë„ ê°€ëŠ¥

---

### ë°©ë²• 3ï¸âƒ£: SSO/SAML ì—°ë™ (ì—”í„°í”„ë¼ì´ì¦ˆ)

ëŒ€ê¸°ì—… ê³ ê°ìš© ì˜µì…˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. í…Œë„ŒíŠ¸ê°€ SSO ì—°ë™ ì„¤ì •                                 â”‚
â”‚    â€¢ Identity Provider: Azure AD, Okta, Google Workspace â”‚
â”‚    â€¢ SAML 2.0 ë˜ëŠ” OAuth 2.0                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ì‚¬ìš©ì ë¡œê·¸ì¸ ì‹œ IdPë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸                      â”‚
â”‚    â€¢ ConexGrowëŠ” ì¸ì¦ ìœ„ì„                               â”‚
â”‚    â€¢ IdPê°€ ì¸ì¦ ìˆ˜í–‰                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. IdPì—ì„œ SAML Assertion ë°˜í™˜                           â”‚
â”‚    â€¢ ì‚¬ìš©ì ì •ë³´ (ì´ë©”ì¼, ì´ë¦„, ë¶€ì„œ)                     â”‚
â”‚    â€¢ sys.usersì— ìë™ ìƒì„± ë˜ëŠ” ì—°ë™                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Just-In-Time (JIT) Provisioning                      â”‚
â”‚    â€¢ ì²« ë¡œê·¸ì¸ ì‹œ ìë™ ê³„ì • ìƒì„±                          â”‚
â”‚    â€¢ ë¶€ì„œ/ì—­í• ì€ ê´€ë¦¬ìê°€ ì¶”í›„ í• ë‹¹ ë˜ëŠ” ê¸°ë³¸ê°’ ì ìš©        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¥ì :**
- ë¹„ë°€ë²ˆí˜¸ ê´€ë¦¬ ë¶ˆí•„ìš”
- ì¤‘ì•™ ì§‘ì¤‘ì‹ ê³„ì • ê´€ë¦¬
- ì—”í„°í”„ë¼ì´ì¦ˆ ë³´ì•ˆ ì •ì±… ì¤€ìˆ˜

**êµ¬í˜„:**
```sql
-- Manager DB - tnnt.tenantsì— SSO ì„¤ì • ì¶”ê°€
ALTER TABLE tnnt.tenants ADD COLUMN sso_enabled BOOLEAN DEFAULT false;
ALTER TABLE tnnt.tenants ADD COLUMN sso_provider VARCHAR(50);  -- azure_ad, okta, google
ALTER TABLE tnnt.tenants ADD COLUMN sso_metadata JSONB;

-- Tenants DB - sys.usersì— SSO ì •ë³´ ì¶”ê°€
ALTER TABLE sys.users ADD COLUMN sso_provider VARCHAR(50);
ALTER TABLE sys.users ADD COLUMN sso_subject VARCHAR(255);  -- IdPì˜ ì‚¬ìš©ì ID
```

---

## ğŸ” ê¶Œí•œ ëª¨ë¸ ì„¤ê³„

### Manager-Web ê¶Œí•œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ idam.users (ìš´ì˜ì)                                       â”‚
â”‚   â”œâ”€ user_type: MASTER, SYSTEM                           â”‚
â”‚   â””â”€ status: ACTIVE, INACTIVE, LOCKED                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ N:M
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ idam.user_roles (ì‚¬ìš©ì-ì—­í•  ë§¤í•‘)                        â”‚
â”‚   â”œâ”€ scope: GLOBAL, TENANT                               â”‚
â”‚   â”œâ”€ tenant_context: NULL (ì „ì²´) | UUID (íŠ¹ì •)           â”‚
â”‚   â””â”€ expires_at: ì„ì‹œ ì—­í•  ë§Œë£Œì¼                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ N:1
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ idam.roles (ì—­í•  ì •ì˜)                                    â”‚
â”‚   â”œâ”€ category: MANAGER_ADMIN, PLATFORM_SUPPORT           â”‚
â”‚   â”œâ”€ level: 1-200 (ê¶Œí•œ ë ˆë²¨)                            â”‚
â”‚   â””â”€ scope: GLOBAL, TENANT                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ N:M
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ idam.role_permissions (ì—­í• -ê¶Œí•œ ë§¤í•‘)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ N:1
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ idam.permissions (ê¶Œí•œ ì¹´íƒˆë¡œê·¸)                          â”‚
â”‚   â”œâ”€ code: tenant:create, billing:view                   â”‚
â”‚   â”œâ”€ category: tenant, system, billing                   â”‚
â”‚   â””â”€ applies_to: ALL, MASTER, SYSTEM                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ê¶Œí•œ ì˜ˆì‹œ

```sql
-- ê¸€ë¡œë²Œ ê´€ë¦¬ì (ëª¨ë“  í…Œë„ŒíŠ¸ ê´€ë¦¬ ê°€ëŠ¥)
INSERT INTO idam.user_roles (user_id, role_id, scope, tenant_context)
VALUES 
    ('user-uuid', 'role-admin-uuid', 'GLOBAL', NULL);

-- íŠ¹ì • í…Œë„ŒíŠ¸ ê´€ë¦¬ì (í…Œë„ŒíŠ¸ Aë§Œ ê´€ë¦¬)
INSERT INTO idam.user_roles (user_id, role_id, scope, tenant_context)
VALUES 
    ('user-uuid', 'role-admin-uuid', 'TENANT', 'tenant-a-uuid');

-- ì„ì‹œ ê¶Œí•œ (3ê°œì›” í•œì •)
INSERT INTO idam.user_roles (user_id, role_id, scope, expires_at)
VALUES 
    ('user-uuid', 'role-temp-uuid', 'GLOBAL', 
     CURRENT_TIMESTAMP + INTERVAL '3 months');
```

---

### Tenants-Web ê¶Œí•œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sys.users (í…Œë„ŒíŠ¸ ì§ì›)                                   â”‚
â”‚   â”œâ”€ tenant_id (ê²©ë¦¬ í‚¤)                                 â”‚
â”‚   â””â”€ is_active, is_deleted                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ N:M
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sys.user_roles (ì‚¬ìš©ì-ì—­í•  ë§¤í•‘) âš ï¸ ì¶”ê°€ ê¶Œì¥            â”‚
â”‚   â”œâ”€ granted_by (í• ë‹¹ì ì¶”ì )                            â”‚
â”‚   â””â”€ expires_at (ì„ì‹œ ì—­í•  ì§€ì›)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ N:1
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sys.roles (ì—­í•  ì •ì˜)                                     â”‚
â”‚   â”œâ”€ tenant_id (ê²©ë¦¬ í‚¤)                                 â”‚
â”‚   â”œâ”€ code: ADMIN, MANAGER, SALES, PURCHASER              â”‚
â”‚   â””â”€ is_system_role (ì‹œìŠ¤í…œ ê¸°ë³¸ ì—­í• )                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ N:M
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sys.role_permissions (ì—­í• -ê¶Œí•œ ë§¤í•‘)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ N:1
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sys.permissions (ê¶Œí•œ ì¹´íƒˆë¡œê·¸)                           â”‚
â”‚   â”œâ”€ code: srm:sales:create, psm:purchase:approve        â”‚
â”‚   â”œâ”€ module_code: ADM, SRM, PSM, IVM, FIM...             â”‚
â”‚   â””â”€ action: CREATE, READ, UPDATE, DELETE, APPROVE       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ê¶Œí•œ ì˜ˆì‹œ

```sql
-- ì˜ì—…íŒ€ ì—­í•  ìƒì„±
INSERT INTO sys.roles (tenant_id, code, name, is_system_role)
VALUES 
    ('tenant-uuid', 'SALES', 'ì˜ì—…íŒ€', false);

-- ê¶Œí•œ í• ë‹¹: ì˜ì—… ê´€ë¦¬ ëª¨ë“ˆ
INSERT INTO sys.role_permissions (role_id, permission_id)
SELECT 
    'sales-role-uuid',
    p.id
FROM sys.permissions p
WHERE p.module_code = 'SRM'
  AND p.action IN ('CREATE', 'READ', 'UPDATE');

-- ì‚¬ìš©ìì—ê²Œ ì—­í•  í• ë‹¹
INSERT INTO sys.user_roles (user_id, role_id, granted_by)
VALUES 
    ('user-uuid', 'sales-role-uuid', 'admin-uuid');
```

---

## ğŸ“Š ê¶Œí•œ ë¹„êµí‘œ

| í•­ëª© | Manager-Web | Tenants-Web |
|------|-------------|-------------|
| **ëŒ€ìƒ** | í”Œë«í¼ ìš´ì˜ì | í…Œë„ŒíŠ¸ ì§ì› |
| **ì¸ì¦ DB** | Manager DB - idam.users | Tenants DB - sys.users |
| **ê²©ë¦¬ ë°©ì‹** | ë…¼ë¦¬ì  (user_type) | ë¬¼ë¦¬ì  (tenant_id) |
| **ì—­í•  ë²”ìœ„** | GLOBAL / TENANT | í…Œë„ŒíŠ¸ ë‚´ë¶€ë§Œ |
| **í¬ë¡œìŠ¤ í…Œë„ŒíŠ¸** | âœ… ê°€ëŠ¥ (GLOBAL scope) | âŒ ë¶ˆê°€ëŠ¥ |
| **ì„ì‹œ ê¶Œí•œ** | âœ… expires_at ì§€ì› | âš ï¸ ì¶”ê°€ í•„ìš” |
| **ì„¸ì…˜ ê´€ë¦¬** | âœ… idam.sessions | âš ï¸ sys.sessions ì¶”ê°€ í•„ìš” |
| **MFA** | âœ… ì§€ì› | âš ï¸ í–¥í›„ ì§€ì› |
| **SSO** | âœ… ì§€ì› ê°€ëŠ¥ | âœ… í…Œë„ŒíŠ¸ë³„ ì„¤ì • |

---

## ğŸš€ êµ¬í˜„ ë¡œë“œë§µ

### Phase 1: ê¸°ë³¸ ì¸ì¦ (í˜„ì¬)
```
âœ… Manager-Web ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
âœ… Tenants-Web ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
âš ï¸ ì„¸ì…˜ ê´€ë¦¬ ê°œì„  í•„ìš” (ë¡œê·¸ì•„ì›ƒ ë²„ê·¸ ìˆ˜ì • ì™„ë£Œ)
```

### Phase 2: í…Œë„ŒíŠ¸ ì‚¬ìš©ì ê´€ë¦¬ (2ì£¼)
```
1ì£¼ì°¨:
  âœ“ sys.sessions í…Œì´ë¸” ìƒì„±
  âœ“ sys.user_roles í…Œì´ë¸” ìƒì„±
  âœ“ ì„¸ì…˜ ê´€ë¦¬ ë¡œì§ êµ¬í˜„

2ì£¼ì°¨:
  âœ“ ê´€ë¦¬ì ì´ˆëŒ€ ê¸°ëŠ¥ (UI + API)
  âœ“ ì´ë©”ì¼ ë°œì†¡ (ì„ì‹œ ë¹„ë°€ë²ˆí˜¸)
  âœ“ ì²« ë¡œê·¸ì¸ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê°•ì œ
```

### Phase 3: ê¶Œí•œ ê°•í™” (3ì£¼)
```
1ì£¼ì°¨:
  âœ“ sys.role_permissions_history ì¶”ê°€
  âœ“ ê¶Œí•œ ë³€ê²½ ê°ì‚¬ ë¡œê·¸

2ì£¼ì°¨:
  âœ“ ì„ì‹œ ì—­í•  í• ë‹¹ ê¸°ëŠ¥
  âœ“ ì—­í•  ë§Œë£Œ ìë™ ì²˜ë¦¬

3ì£¼ì°¨:
  âœ“ ê¶Œí•œ ëŒ€ì‹œë³´ë“œ (ê´€ë¦¬ììš©)
  âœ“ ê°ì‚¬ ë¦¬í¬íŠ¸
```

### Phase 4: ì—”í„°í”„ë¼ì´ì¦ˆ (4ì£¼+)
```
  âœ“ SSO/SAML ì—°ë™
  âœ“ JIT Provisioning
  âœ“ MFA (Multi-Factor Authentication)
  âœ“ IP Whitelist
```

---

## ğŸ’¡ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. ë¹„ë°€ë²ˆí˜¸ ì •ì±…
```python
# ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ìš”êµ¬
PASSWORD_MIN_LENGTH = 8
PASSWORD_REQUIRE_UPPERCASE = True
PASSWORD_REQUIRE_LOWERCASE = True
PASSWORD_REQUIRE_DIGIT = True
PASSWORD_REQUIRE_SPECIAL = True
PASSWORD_EXPIRY_DAYS = 90  # 90ì¼ë§ˆë‹¤ ë³€ê²½

# ì´ë ¥ ê´€ë¦¬ (ìµœê·¼ 5ê°œ ì¬ì‚¬ìš© ë°©ì§€)
PASSWORD_HISTORY_COUNT = 5
```

### 2. ê³„ì • ì ê¸ˆ ì •ì±…
```python
# ë¡œê·¸ì¸ ì‹¤íŒ¨ ì œí•œ
MAX_FAILED_ATTEMPTS = 5
LOCKOUT_DURATION_MINUTES = 30

# êµ¬í˜„
if user.failed_login_attempts >= MAX_FAILED_ATTEMPTS:
    user.locked_until = datetime.now() + timedelta(minutes=30)
    user.save()
    raise AccountLocked("ê³„ì •ì´ ì ê²¼ìŠµë‹ˆë‹¤. 30ë¶„ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.")
```

### 3. ì„¸ì…˜ ê´€ë¦¬
```python
# ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ
SESSION_TIMEOUT_MINUTES = 30      # í™œë™ ì—†ìœ¼ë©´ 30ë¶„ í›„ ë§Œë£Œ
SESSION_MAX_LIFETIME_HOURS = 12   # ìµœëŒ€ 12ì‹œê°„ í›„ ê°•ì œ ì¬ë¡œê·¸ì¸

# ë™ì‹œ ì„¸ì…˜ ì œí•œ
MAX_CONCURRENT_SESSIONS = 3       # ìµœëŒ€ 3ê°œ ë””ë°”ì´ìŠ¤
```

### 4. ê°ì‚¬ ë¡œê·¸
```python
# ì¤‘ìš” ì´ë²¤íŠ¸ ê¸°ë¡
AUDIT_EVENTS = [
    'USER_LOGIN',
    'USER_LOGOUT',
    'USER_CREATED',
    'USER_DELETED',
    'ROLE_ASSIGNED',
    'ROLE_REVOKED',
    'PERMISSION_CHANGED',
    'PASSWORD_CHANGED',
]

# ë¡œê·¸ ë³´ê´€ ê¸°ê°„
AUDIT_LOG_RETENTION_DAYS = 365
```

---

## ğŸ“ API ì—”ë“œí¬ì¸íŠ¸ ì˜ˆì‹œ

### Manager-Web API

```python
# ìš´ì˜ì ì¸ì¦
POST /api/v1/manager/auth/signin
POST /api/v1/manager/auth/signout
POST /api/v1/manager/auth/refresh

# í…Œë„ŒíŠ¸ ê´€ë¦¬
GET  /api/v1/manager/tenants
POST /api/v1/manager/tenants
GET  /api/v1/manager/tenants/{id}
PUT  /api/v1/manager/tenants/{id}

# ìš´ì˜ì ê´€ë¦¬
GET  /api/v1/manager/users
POST /api/v1/manager/users
PUT  /api/v1/manager/users/{id}
```

### Tenants-Web API

```python
# í…Œë„ŒíŠ¸ ì‚¬ìš©ì ì¸ì¦
POST /api/v1/tenants/auth/signin
POST /api/v1/tenants/auth/signout
POST /api/v1/tenants/auth/refresh

# ì‚¬ìš©ì ê´€ë¦¬ (ê´€ë¦¬ì ì „ìš©)
GET  /api/v1/tenants/users              # ì§ì› ëª©ë¡
POST /api/v1/tenants/users/invite       # ì§ì› ì´ˆëŒ€
GET  /api/v1/tenants/users/{id}
PUT  /api/v1/tenants/users/{id}
DELETE /api/v1/tenants/users/{id}

# ì—­í•  ê´€ë¦¬
GET  /api/v1/tenants/roles
POST /api/v1/tenants/roles
PUT  /api/v1/tenants/roles/{id}

# ê¶Œí•œ ê´€ë¦¬
POST /api/v1/tenants/users/{id}/roles   # ì—­í•  í• ë‹¹
DELETE /api/v1/tenants/users/{id}/roles/{role_id}
```

---

## ğŸ” ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì¸ì¦
- [x] ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ (bcrypt, scrypt)
- [x] JWT í† í° ì„œëª… ê²€ì¦
- [ ] MFA ì§€ì› (í–¥í›„)
- [ ] IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ (ì—”í„°í”„ë¼ì´ì¦ˆ)

### ì¸ê°€
- [x] ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)
- [x] í…Œë„ŒíŠ¸ ê²©ë¦¬ (tenant_id ê°•ì œ)
- [ ] ë¦¬ì†ŒìŠ¤ ë ˆë²¨ ê¶Œí•œ (í–¥í›„)
- [ ] ë™ì  ê¶Œí•œ (ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜)

### ì„¸ì…˜
- [x] ì„¸ì…˜ í† í° ë³´ì•ˆ ì €ì¥
- [ ] ì„¸ì…˜ í•˜ì´ì¬í‚¹ ë°©ì§€
- [ ] ë™ì‹œ ì„¸ì…˜ ì œí•œ
- [x] ìë™ ë¡œê·¸ì•„ì›ƒ (íƒ€ì„ì•„ì›ƒ)

### ê°ì‚¬
- [x] ë¡œê·¸ì¸ ì´ë ¥ ê¸°ë¡
- [ ] ê¶Œí•œ ë³€ê²½ ì´ë ¥ (ê°œì„  í•„ìš”)
- [ ] ì¤‘ìš” ì‘ì—… ê°ì‚¬ ë¡œê·¸
- [ ] ê·œì • ì¤€ìˆ˜ ë¦¬í¬íŠ¸

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ê´€ë ¨ ë¬¸ì„œ
- `/docs/04_api/USER_ROLE_PERMISSION_ARCHITECTURE.md` - ê¶Œí•œ êµ¬ì¡° ìƒì„¸
- `/docs/04_api/ì¸ì¦ê¶Œí•œ_DDLê°œì„ _20251027.md` - DB ìŠ¤í‚¤ë§ˆ ê°œì„ ì•ˆ
- `/docs/02_architecture/02-ARCHITECTURE.md` - ì „ì²´ ì•„í‚¤í…ì²˜

### ì—…ê³„ í‘œì¤€
- [OWASP Authentication Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Authentication_Cheat_Sheet.html)
- [NIST Digital Identity Guidelines](https://pages.nist.gov/800-63-3/)
- [OAuth 2.0 RFC 6749](https://tools.ietf.org/html/rfc6749)
- [SAML 2.0 Technical Overview](http://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0.html)

---

## âœ… ìµœì¢… ê¶Œì¥ ì‚¬í•­ ìš”ì•½

### 1. ì‚¬ìš©ì ê´€ë¦¬ ë°©ì‹
âœ… **ê´€ë¦¬ì ì´ˆëŒ€ ë°©ì‹ (Invitation-based)** ì±„íƒ
- ë³´ì•ˆì„±ê³¼ ìš´ì˜ íš¨ìœ¨ì„±ì´ ê°€ì¥ ìš°ìˆ˜
- B2B SaaS ì—…ê³„ í‘œì¤€
- êµ¬í˜„ ë³µì¡ë„ ë‚®ìŒ

### 2. ê¶Œí•œ êµ¬ì¡°
âœ… **ì´ì¤‘ ê¶Œí•œ ì‹œìŠ¤í…œ ìœ ì§€**
- Manager DB: í”Œë«í¼ ìš´ì˜ì ê¶Œí•œ
- Tenants DB: í…Œë„ŒíŠ¸ ì§ì› ê¶Œí•œ
- ì™„ì „ ë¶„ë¦¬ë¡œ ë³´ì•ˆì„± ê·¹ëŒ€í™”

### 3. ìš°ì„  êµ¬í˜„ í•­ëª©
```
P0 (ì¦‰ì‹œ):
  âœ“ sys.sessions í…Œì´ë¸” ì¶”ê°€
  âœ“ sys.user_roles í…Œì´ë¸” ì¶”ê°€

P1 (2ì£¼ ì´ë‚´):
  âœ“ ê´€ë¦¬ì ì´ˆëŒ€ ê¸°ëŠ¥
  âœ“ ì´ë©”ì¼ ë°œì†¡ ì‹œìŠ¤í…œ
  âœ“ ë¹„ë°€ë²ˆí˜¸ ê°•ì œ ë³€ê²½

P2 (4ì£¼ ì´ë‚´):
  âœ“ ì„ì‹œ ì—­í•  í• ë‹¹
  âœ“ ê¶Œí•œ ë³€ê²½ ê°ì‚¬
  âœ“ ê°ì‚¬ ëŒ€ì‹œë³´ë“œ
```

### 4. ì„ íƒ ì‚¬í•­
```
ì—”í„°í”„ë¼ì´ì¦ˆ ê³ ê°ìš©:
  â—‹ SSO/SAML ì—°ë™
  â—‹ JIT Provisioning
  â—‹ MFA ì¸ì¦
  â—‹ IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸
```

---

**ì‘ì„±ì**: AI ì•„í‚¤í…íŠ¸  
**ê²€í†  ìƒíƒœ**: âœ… ê¶Œì¥ ì‚¬í•­ ì œì‹œ ì™„ë£Œ  
**ë‹¤ìŒ ë‹¨ê³„**: ê°œë°œíŒ€ ê²€í†  ë° êµ¬í˜„ ê³„íš ìˆ˜ë¦½
