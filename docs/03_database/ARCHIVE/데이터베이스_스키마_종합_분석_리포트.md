# ConexGrow 테넌트 데이터베이스 스키마 종합 분석 리포트

**분석 대상**: `/packages/database/schemas/tenants/` 모듈
**분석 일자**: 2025-10-24
**분석 범위**: 01_ADM ~ 22_SYS (15개 모듈, 140+ 테이블)

---

## 목차
1. [Executive Summary](#executive-summary)
2. [현황 분석](#현황-분석)
3. [발견된 주요 문제점](#발견된-주요-문제점)
4. [상세 분석](#상세-분석)
5. [권장사항](#권장사항)
6. [실행 계획](#실행-계획)

---

## Executive Summary

### 결론
ConexGrow의 테넌트 데이터베이스 스키마는 **50인 미만 사업자를 위한 통합 업무지원 플랫폼으로서 전반적으로 잘 설계**되었습니다. 다만, 다음 3가지 영역에서 개선이 필요합니다:

| 항목 | 상태 | 심각도 | 영향도 |
|------|------|--------|--------|
| **중복 테이블** | 2개 | ⚠️ 중간 | 높음 |
| **부족 테이블** | 5개 | 🔴 높음 | 높음 |
| **혼재된 책임** | 1개 | 🟡 낮음 | 중간 |

### 최우선 과제
1. **세금계산서 테이블 통합** (srm.sales_invoices vs fim.tax_invoices)
2. **결근/휴가 관리 테이블 추가** (hrm.absences)
3. **고객 피드백/평가 테이블 추가** (asm.customer_feedback)

---

## 현황 분석

### 1. 스키마 구조 현황

#### 모듈 구성
```
총 14개 모듈 / 14개 스키마 / 140+ 테이블
```

| 영역 | 모듈 | 테이블 수 | 규모 |
|------|------|----------|------|
| **기본 관리** | 01_ADM | 7 | 기본 |
| **인사관리** | 02_HRM | 8 | 중간 |
| **거래처관리** | 03_CRM | 19 | 대규모 |
| **상품관리** | 04_PIM | 17 | 대규모 |
| **창고관리** | 05_WMS | 9 | 중간 |
| **결재관리** | 06_APM | 5 | 소규모 |
| **재고관리** | 10_IVM | 11 | 중간 |
| **구매관리** | 11_PSM | 11 | 중간 |
| **판매관리** | 12_SRM | 11 | 중간 |
| **서비스관리** | 13_ASM | 7 | 중간 |
| **재무관리** | 14_FIM | 10 | 중간 |
| **자산관리** | 15_FAM | 4 | 소규모 |
| **분석관리** | 20_BIM | 5 | 소규모 |
| **공통관리** | 21_COM | 4 | 소규모 |
| **시스템** | 22_SYS | 6 | 소규모 |

#### 데이터 설계 품질
✅ **우수한 점:**
- 일관된 명명 규칙 (snake_case, 한글 주석)
- 완벽한 감사 필드 (created_at, created_by, updated_at, updated_by)
- 체계적인 논리 삭제 (is_deleted soft delete)
- 포괄적인 인덱스 및 제약조건
- 명확한 외래키 관계와 삭제 정책
- 풍부한 테이블/컬럼 주석

❌ **개선 필요:**
- 중복되는 기능 테이블
- 누락된 도메인 테이블
- 일부 모듈의 책임 혼재

---

## 발견된 주요 문제점

### 문제 1: 중복된 세금계산서 테이블

#### 현황
```sql
-- 1. SRM 모듈 (판매관리)
srm.sales_invoices
  - invoice_code, invoice_type (INVOICE/TAX_INVOICE/CREDIT_NOTE)
  - so_id, delivery_id, customer_id
  - subtotal, tax_amount, total_amount
  - 목적: 판매 송장 및 세금계산서 발행

-- 2. FIM 모듈 (재무관리)
fim.tax_invoices
  - invoice_no, invoice_type (TAX/CREDIT_NOTE/DEBIT_NOTE/MODIFIED)
  - supplier_business_no, buyer_business_no (공급자/공급받는자)
  - source_type, source_id (원천 문서 추적)
  - nts_confirmed, approval_no (국세청 전송)
  - 목적: 전자세금계산서 회계 관리
```

#### 문제점
- **데이터 정규화 위반**: 같은 데이터(세금계산서)가 2개 테이블에 분산
- **비즈니스 로직 혼동**: 판매와 회계 두 영역에서 각각 관리
- **데이터 일관성 문제**: 중복 입력, 동기화 문제 발생 가능
- **쿼리 복잡도 증가**: 세금계산서 조회 시 2개 테이블을 번갈아 검색해야 함

#### 설계 의도 분석
| 관점 | SRM (srm.sales_invoices) | FIM (fim.tax_invoices) |
|------|------------------------|----------------------|
| **목적** | 판매 프로세스 추적 | 회계 기록 관리 |
| **관점** | 운영(영업) | 회계(재무) |
| **필드** | 주문/배송 참조 | 공급자/공급받는자 상세 |
| **마스터** | 배송 기반 | 국세청 승인 기반 |

#### 권장 해결방안
**→ 방안 A (권장): FIM 통합**
- `fim.tax_invoices`를 마스터로 통일
- `srm.sales_invoices`는 제거하거나 뷰(VIEW)로 변경
- 판매 영역에서는 `fim.tax_invoices`에서 소매/판매 관련 데이터 필터링

**근거:**
- 한국 기업은 회계 중심(FIM이 마스터)
- 국세청 통합이 필수 → FIM에서 관리가 맞음
- 원천 추적(source_type/source_id)이 FIM에만 있음

---

### 문제 2: 중복된 공통코드 관리 체계

#### 현황
```sql
-- 1. ADM 모듈 (시스템 기본 설정)
adm.code_groups / adm.codes
  - 목적: 시스템 전역 공통코드 (통화, 단위 등)
  - 특징: 기술적, 불변적 코드

-- 2. COM 모듈 (공통/워크플로우)
com.code_groups / com.codes
  - 목적: 비즈니스 공통코드 (상태, 우선순위 등)
  - 특징: 비즈니스적, 유동적 코드
```

#### 평가
✅ **합리적 분리**
- ADM: 기술적 기본 코드 (통화, 단위, 교환율)
- COM: 비즈니스 동적 코드 (상태, 우선순위, 워크플로우)

⚠️ **개선점**
- 인터페이스 일관성 부족 (column 명: code vs group_code)
- 문서화 필요 (어떤 코드를 어디에 등록할지)

#### 권장사항
**→ 현재 구조 유지, 문서화 추가**
- ADM: 기술코드 (5개 이상 갱신 없음)
- COM: 워크플로우/비즈니스코드 (자주 변경)

---

### 문제 3: 부족한 도메인 테이블 (5개)

#### 3-1. 결근/휴가 관리 테이블 (HRM 모듈)

**현황:** ❌ 미정의
```
hrm.attendances (출근 기록만 있음)
- 결근, 지각, 휴가, 보상휴가 미관리
```

**필요성:**
- 50인 미만 사업자도 결근/휴가 기록 필수
- 급여 계산에 영향 (연차, 병가, 무급휴가)
- 근로기준법 준수 필요

**추가 테이블:**
```sql
hrm.absences (결근/휴가 관리)
  - id UUID
  - employee_id UUID (fk hrm.employees)
  - absence_type VARCHAR(20) -- ABSENCE, LATE, SICK, ANNUAL, UNPAID, MATERNITY
  - date_from DATE
  - date_to DATE
  - duration_hours INTEGER
  - reason TEXT
  - approved_by UUID (fk hrm.employees, 승인자)
  - status VARCHAR(20) -- DRAFT, SUBMITTED, APPROVED, REJECTED
  - created_at, created_by, updated_at, updated_by
  - is_deleted BOOLEAN

hrm.leave_policies (휴가 정책)
  - id UUID
  - leave_type VARCHAR(20) -- ANNUAL, SICK, MATERNITY, UNPAID
  - entitled_days_per_year INTEGER
  - is_paid BOOLEAN
  - description TEXT
```

**스키마 적용:** `02_HRM`

---

#### 3-2. 고객 평가/피드백 테이블 (ASM 모듈)

**현황:** ❌ 미정의
```
asm.support_tickets (지원 티켓만 있음)
- 고객 만족도, 평가, 피드백 미관리
```

**필요성:**
- CRM 고도화 (고객 만족도 추적)
- 제품/서비스 개선 정보 제공
- 평가 점수 기반 고객 세그먼트화

**추가 테이블:**
```sql
asm.customer_feedback (고객 피드백/평가)
  - id UUID
  - partner_id UUID (fk crm.partners) -- 거래처
  - transaction_type VARCHAR(20) -- SALE, SERVICE, SUPPORT
  - transaction_id UUID -- 해당 거래(주문/서비스) ID
  - rating INTEGER (1-5) -- 별점
  - comment TEXT -- 피드백 내용
  - feedback_categories VARCHAR[] -- 품질, 배송, 고객서비스 등
  - response_text TEXT -- 회신 내용
  - response_by UUID (fk hrm.employees)
  - response_date TIMESTAMP
  - status VARCHAR(20) -- NEW, REVIEWED, RESPONDED, CLOSED
  - created_at, created_by, updated_at, updated_by
  - is_deleted BOOLEAN

asm.nps_survey (NPS 설문)
  - id UUID
  - partner_id UUID
  - nps_score INTEGER (0-10)
  - recommendation TEXT
  - sent_date DATE
  - response_date DATE
  - status VARCHAR(20)
```

**스키마 적용:** `13_ASM`

---

#### 3-3. 계약/약정 관리 테이블 (CRM 모듈)

**현황:** ❌ 미정의
```
crm 모듈에 계약 정보가 없음
```

**필요성:**
- 중소기업은 거래처와의 계약서 관리 필수
- 계약 갱신일, 계약금액, 계약 조건 추적
- 거래처 신용관리 지원

**추가 테이블:**
```sql
crm.contracts (거래처 계약/약정)
  - id UUID
  - partner_id UUID (fk crm.partners)
  - contract_code VARCHAR(50)
  - contract_type VARCHAR(20) -- PURCHASE, SUPPLY, AGENCY, EXCLUSIVE
  - contract_date DATE
  - start_date DATE
  - end_date DATE
  - renewal_date DATE -- 갱신일
  - contract_amount NUMERIC(18,2)
  - contract_currency VARCHAR(3)
  - contract_term_months INTEGER
  - auto_renewal BOOLEAN
  - contract_file_path VARCHAR(500) -- 계약서 첨부
  - contract_notes TEXT
  - signatory_company VARCHAR(200) -- 계약담당자(회사)
  - signatory_partner VARCHAR(200) -- 계약담당자(거래처)
  - status VARCHAR(20) -- ACTIVE, EXPIRED, TERMINATED, SUSPENDED
  - created_at, created_by, updated_at, updated_by
  - is_deleted BOOLEAN

crm.contract_items (계약 조건/항목)
  - id UUID
  - contract_id UUID (fk crm.contracts)
  - item_seq INTEGER
  - item_description VARCHAR(500)
  - item_value VARCHAR(500)
```

**스키마 적용:** `03_CRM`

---

#### 3-4. 프로모션/할인 정책 테이블 (SRM 모듈)

**현황:** ❌ 미정의
```
srm 모듈에 할인이나 프로모션 관리 테이블이 없음
```

**필요성:**
- 계절 프로모션, 벌크 할인, 회원 할인 등
- 판매 전략 실행의 핵심 도구
- 수익성 분석에 필수

**추가 테이블:**
```sql
srm.promotions (판매 프로모션/할인)
  - id UUID
  - promotion_code VARCHAR(50)
  - promotion_name VARCHAR(200)
  - promotion_type VARCHAR(20) -- DISCOUNT_PERCENT, DISCOUNT_AMOUNT, BUY_X_GET_Y, BUNDLE
  - description TEXT
  - start_date DATE
  - end_date DATE
  - discount_percent NUMERIC(5,2) -- 할인율
  - discount_amount NUMERIC(18,2) -- 할인액
  - min_order_amount NUMERIC(18,2) -- 최소 주문금액
  - max_discount_amount NUMERIC(18,2) -- 최대 할인액
  - customer_segment_id UUID (fk crm.customer_segments) -- 대상 고객
  - product_id UUID (fk pim.products) -- 특정 상품 (null이면 전사)
  - priority INTEGER -- 우선순위
  - is_active BOOLEAN
  - created_at, created_by, updated_at, updated_by
  - is_deleted BOOLEAN

srm.promotion_usage (프로모션 사용 이력)
  - id UUID
  - promotion_id UUID (fk srm.promotions)
  - sales_order_id UUID (fk srm.sales_orders)
  - discount_applied NUMERIC(18,2)
  - applied_at TIMESTAMP
```

**스키마 적용:** `12_SRM`

---

#### 3-5. 환불/반품 정책 테이블 (SRM/ASM 모듈)

**현황:** ❌ 미정의 (srm.sales_returns는 있으나 정책 없음)
```
srm.sales_returns (반품 기록만 있음)
- 반품 정책, 반품 조건, 반품 기한 미정의
```

**필요성:**
- 반품 정책 관리 (기한, 조건, 환불액 계산)
- 반품 승인 워크플로우
- 반품 원인 분석

**추가 테이블:**
```sql
asm.return_policies (반품/환불 정책)
  - id UUID
  - policy_code VARCHAR(50)
  - policy_name VARCHAR(200)
  - product_category_id UUID (fk pim.categories)
  - return_period_days INTEGER -- 반품 가능 기간
  - restocking_fee_percent NUMERIC(5,2) -- 재가공 수수료
  - condition_required VARCHAR(100) -- 미개봉, 정상 등
  - refund_method VARCHAR(20) -- ORIGINAL_PAYMENT, STORE_CREDIT, EXCHANGE
  - is_active BOOLEAN
  - created_at, created_by, updated_at, updated_by
  - is_deleted BOOLEAN

srm.sales_return_approvals (반품 승인 이력)
  - id UUID
  - sales_return_id UUID (fk srm.sales_returns)
  - policy_id UUID (fk asm.return_policies)
  - approval_reason VARCHAR(500)
  - refund_amount NUMERIC(18,2)
  - approved_by UUID (fk hrm.employees)
  - approval_date TIMESTAMP
  - status VARCHAR(20)
```

**스키마 적용:** `12_SRM`, `13_ASM`

---

### 문제 4: 혼재된 책임

#### 현황
`crm.partner_banks` 테이블이 거래처 은행 정보를 관리하지만, `crm.rfqs`는 결제 조건을 텍스트로 저장

#### 평가
- 큰 문제는 아니나, 정규화 개선 가능

#### 권장사항
```sql
-- 권장: 결제 조건 마스터 테이블 추가 (COM 모듈)
com.payment_terms (결제 조건 마스터)
  - id UUID
  - code VARCHAR(50) -- NET30, COD, PREPAID 등
  - name VARCHAR(100)
  - description TEXT
  - days_to_pay INTEGER
  - is_active BOOLEAN
```

---

## 상세 분석

### 1. 모듈별 테이블 완성도 평가

| 모듈 | 완성도 | 주요 특징 | 개선점 |
|------|--------|----------|--------|
| **01_ADM** | ⭐⭐⭐⭐⭐ | 견고한 기본 구조 | 결제조건 코드 추가 |
| **02_HRM** | ⭐⭐⭐⭐ | 좋은 구조, 부족한 휴가/결근 | 결근/휴가, 휴직 테이블 추가 |
| **03_CRM** | ⭐⭐⭐⭐ | 포괄적인 거래처 관리 | 계약 관리 테이블 추가 |
| **04_PIM** | ⭐⭐⭐⭐⭐ | 완벽한 상품 정보 관리 | 추가 불필요 |
| **05_WMS** | ⭐⭐⭐⭐ | 창고 운영 기본 구조 | 창고 이동 이력 추가 고려 |
| **06_APM** | ⭐⭐⭐⭐ | 결재 워크플로우 | 문서 유형별 승인라인 관리 개선 |
| **10_IVM** | ⭐⭐⭐⭐⭐ | 완벽한 재고 관리 | 추가 불필요 |
| **11_PSM** | ⭐⭐⭐⭐ | 구매 프로세스 완전 | 추가 불필요 |
| **12_SRM** | ⭐⭐⭐ | 판매 기본, 부족한 정책 | 프로모션, 반품정책 테이블 추가 |
| **13_ASM** | ⭐⭐⭐ | 기본 서비스 구조 | 피드백, 반품정책 테이블 추가 |
| **14_FIM** | ⭐⭐⭐⭐⭐ | 완벽한 회계 관리 | 통합 세금계산서로 개선 |
| **15_FAM** | ⭐⭐⭐⭐ | 자산 관리 완전 | 추가 불필요 |
| **20_BIM** | ⭐⭐⭐ | 기본 분석 | 더 많은 KPI 정의 권장 |
| **21_COM** | ⭐⭐⭐⭐ | 좋은 공통 코드 관리 | 결제조건 추가 |
| **22_SYS** | ⭐⭐⭐⭐ | 견고한 권한 관리 | 추가 불필요 |

### 2. 비즈니스 프로세스 커버리지

#### ✅ 잘 지원되는 프로세스
- 상품 관리 (PIM)
- 거래처 관리 (CRM)
- 구매 프로세스 (PSM → IVM)
- 판매 프로세스 (SRM → WMS → IVM)
- 재무 회계 (FIM)
- 인사 관리 (HRM) - 기본
- 자산 관리 (FAM)

#### ❌ 부분적으로 지원되는 프로세스
- 판매 후 관리 (ASM) - 피드백 없음
- 인사 관리 (HRM) - 휴가/결근 없음
- 판매 정책 (SRM) - 프로모션/반품정책 없음
- 거래처 관리 (CRM) - 계약 관리 없음

---

## 권장사항

### 1. 우선순위별 개선안

#### 🔴 P1 (즉시 필요)

**1-1. 세금계산서 테이블 통합**
- **영향도**: 높음 (판매 + 회계 프로세스)
- **복잡도**: 높음 (기존 시스템 변경)
- **추천 방향**: fim.tax_invoices 중심으로 통합, srm.sales_invoices 제거

**수행 방법:**
```
단계 1: fim.tax_invoices에 sales 관련 필드 추가
  - sales_order_id
  - delivery_id
  - sales_delivery_id

단계 2: 뷰(VIEW) 생성
  - srm.vw_sales_invoices (하위 호환성)

단계 3: 애플리케이션 마이그레이션
  - SRM 모듈에서 fim.tax_invoices 직접 사용

단계 4: srm.sales_invoices 제거
```

**영향받는 파일:**
- `/packages/database/schemas/tenants/12_srm/07_sales_invoices.sql` (삭제)
- `/packages/database/schemas/tenants/14_fim/08_tax_invoices.sql` (수정)

---

**1-2. 결근/휴가 관리 테이블 추가**
- **영향도**: 중간 (급여 계산 연동)
- **복잡도**: 낮음 (새로운 테이블)
- **추천 방향**: hrm.absences, hrm.leave_policies 추가

**수행 방법:**
```sql
-- 추가될 파일:
/packages/database/schemas/tenants/02_hrm/08_absences.sql
/packages/database/schemas/tenants/02_hrm/09_leave_policies.sql

CREATE TABLE hrm.absences (
  id UUID PRIMARY KEY,
  employee_id UUID NOT NULL FK(hrm.employees),
  absence_type VARCHAR(20) NOT NULL,
  date_from DATE NOT NULL,
  date_to DATE NOT NULL,
  duration_hours INTEGER,
  reason TEXT,
  approved_by UUID FK(hrm.employees),
  status VARCHAR(20) DEFAULT 'DRAFT',
  created_at, created_by, updated_at, updated_by,
  is_deleted BOOLEAN
);

CREATE TABLE hrm.leave_policies (
  id UUID PRIMARY KEY,
  leave_type VARCHAR(20) NOT NULL UNIQUE,
  entitled_days_per_year INTEGER,
  is_paid BOOLEAN,
  description TEXT
);
```

---

**1-3. 고객 피드백 테이블 추가**
- **영향도**: 중간 (CRM 고도화)
- **복잡도**: 낮음 (새로운 테이블)
- **추천 방향**: asm.customer_feedback 추가

**수행 방법:**
```sql
-- 추가될 파일:
/packages/database/schemas/tenants/13_asm/07_customer_feedback.sql
/packages/database/schemas/tenants/13_asm/08_nps_surveys.sql
```

---

#### 🟡 P2 (중기 계획 - 3개월 이내)

**2-1. 계약 관리 테이블 추가 (CRM)**
```sql
/packages/database/schemas/tenants/03_crm/19_contracts.sql
/packages/database/schemas/tenants/03_crm/20_contract_items.sql
```

**2-2. 프로모션/할인 관리 테이블 추가 (SRM)**
```sql
/packages/database/schemas/tenants/12_srm/12_promotions.sql
/packages/database/schemas/tenants/12_srm/13_promotion_usage.sql
```

**2-3. 반품 정책 테이블 추가 (ASM)**
```sql
/packages/database/schemas/tenants/13_asm/09_return_policies.sql
/packages/database/schemas/tenants/13_asm/10_return_approvals.sql
```

---

#### 🟢 P3 (장기 계획 - 6개월 이상)

**3-1. KPI/분석 지표 확대 (BIM)**
- 거래처별 판매액 추이
- 상품별 수익성 분석
- 재고 회전율 분석
- 운영 효율성 지표

**3-2. 고급 기능 추가**
- 재고 예측 (머신러닝)
- 가격 최적화
- 고객 세그먼트 분석
- 공급망 최적화

---

### 2. 스키마 설계 개선 가이드

#### 2-1. 클래이드(한국)식 회계 구조 강화

**현황**: fim.tax_invoices가 존재하나, 한국 세무 요구사항 완벽 반영 필요

**개선안:**
```sql
-- 세금계산서 상태 정의 개선
CHECK (status IN (
  'DRAFT',        -- 임시저장
  'SUBMITTED',    -- 제출 (국세청 미전송)
  'CONFIRMED',    -- 승인 (국세청 전송)
  'CORRECTION',   -- 정정
  'CANCELLED'     -- 취소
))

-- 발행 유형 정의 개선
CHECK (issue_type IN (
  'NORMAL',       -- 정상
  'REVERSE',      -- 역발행
  'IMPORT',       -- 면세
  'ZERO_RATE',    -- 영세율
  'CORRECTION'    -- 정정발행
))
```

#### 2-2. 소규모 사업자 특화 필드 추가

**현황**: 일반 기업 기준의 스키마
**개선안**: 50인 미만 사업자 특화 필드

```sql
-- 예시: HRM 모듈
-- 작은 회사는 부서가 없을 수 있음
ALTER TABLE hrm.employees
  ALTER COLUMN department_id DROP NOT NULL;

-- 특화 필드: 수당, 보험료 등
ALTER TABLE hrm.employees
  ADD COLUMN allowance_amount NUMERIC(18,2);  -- 특별 수당
  ADD COLUMN insurance_code VARCHAR(20);      -- 보험 유형
```

#### 2-3. 문서 관리 통합

**현황**: 각 모듈에서 문서를 산발적으로 관리
**개선안**: 중앙화된 문서 관리 (비용 절감)

```sql
-- COM 모듈에 추가
com.documents (통합 문서 저장소)
  - id UUID
  - document_type VARCHAR(50) -- CONTRACT, INVOICE, PO, QUOTATION 등
  - related_module VARCHAR(20) -- crm, srm, fim 등
  - related_id UUID -- 해당 레코드 ID
  - file_name VARCHAR(500)
  - file_path VARCHAR(1000)
  - file_size BIGINT
  - mime_type VARCHAR(100)
  - uploaded_by UUID
  - uploaded_at TIMESTAMP
  - is_deleted BOOLEAN
```

---

### 3. 외래키 및 정규화 개선

#### 현황 확인
```
✅ 대부분 정규화가 잘 됨
❌ 일부 문자열 저장: payment_terms, delivery_terms 등
```

#### 개선안
```sql
-- 마스터 테이블 추가 (COM 모듈)
com.payment_terms
com.delivery_terms
com.shipping_methods
com.inspection_standards

-- 참조 변경
ALTER TABLE crm.partners
  MODIFY payment_terms UUID REFERENCES com.payment_terms(id);
```

---

## 실행 계획

### Phase 1: 긴급 개선 (2주)

**목표**: 세금계산서 통합, 기본 휴가 테이블 추가

```timeline
Week 1:
  - Mon: 세금계산서 통합 설계 검토
  - Tue: fim.tax_invoices 필드 추가 + 테스트
  - Wed: srm.sales_invoices → VIEW 변환
  - Thu: hrm.absences, leave_policies 생성
  - Fri: 테스트 + 문서화

Week 2:
  - Mon-Tue: 애플리케이션 코드 마이그레이션 (Backend)
  - Wed: 애플리케이션 테스트
  - Thu: 프로덕션 배포 준비
  - Fri: 배포 + 모니터링
```

**담당자**: 데이터베이스 아키텍트, 백엔드 리드

---

### Phase 2: 주요 개선 (4주)

**목표**: 고객 피드백, 계약 관리, 프로모션 테이블 추가

```timeline
Week 1:
  - asm.customer_feedback, nps_surveys 설계 및 생성
  - crm.contracts, contract_items 설계 및 생성

Week 2:
  - srm.promotions, promotion_usage 설계 및 생성
  - 모든 새 테이블 테스트 케이스 작성

Week 3:
  - 애플리케이션 기능 구현 (API, UI)

Week 4:
  - 통합 테스트
  - 문서화
  - 프로덕션 준비
```

**담당자**: 전체 개발팀

---

### Phase 3: 최적화 (지속적)

**목표**: BIM 확대, 마스터 데이터 정규화, 성능 튜닝

```timeline
분기별 진행:
  - Q1: KPI 정의 확대 (BIM)
  - Q2: 마스터 데이터 정규화 (COM)
  - Q3: 검색 및 보고 성능 최적화
  - Q4: 차년도 계획 수립
```

---

## 체크리스트

### 데이터 정합성 검증

- [ ] 세금계산서 통합 설계 리뷰
- [ ] 기존 srm.sales_invoices 데이터 마이그레이션 계획
- [ ] 코드 테이블 정규화 (payment_terms → 코드)
- [ ] 외래키 무결성 검사

### 비즈니스 로직 검증

- [ ] P1 테이블(휴가, 피드백) 추가의 업무 프로세스 영향도 검토
- [ ] 계약, 프로모션 테이블 추가의 필요성 재검토
- [ ] 각 모듈 담당자 검증

### 성능 및 보안

- [ ] 인덱스 전략 재검토 (새 테이블)
- [ ] 개인정보 필드 암호화 확인 (주민등록번호, 계좌 등)
- [ ] 감사 로그 정책 확인

---

## 결론

### 종합 평가

ConexGrow의 테넌트 데이터베이스 스키마는 **중소기업 ERP 시스템으로서 견고한 기초를 갖추고 있습니다.**

**강점:**
1. 일관된 설계 원칙과 명명 규칙
2. 완벽한 감사 필드 및 논리 삭제
3. 포괄적인 기본 비즈니스 프로세스 지원
4. 명확한 스키마 분리 (모듈화)

**개선점:**
1. 세금계산서 통합 (SRM ↔ FIM)
2. 휴가/결근, 피드백 테이블 추가
3. 거래처 계약 관리 추가
4. 판매 정책(프로모션, 반품) 추가

### 최종 권장안

**우선순위:**
```
1순위 (즉시): 세금계산서 통합
2순위 (1개월): 휴가/결근, 피드백 추가
3순위 (3개월): 계약, 프로모션 추가
```

**투자 대비 효과:**
- 세금계산서 통합: 높음 (데이터 일관성 + 회계 정확성)
- 휴가/피드백 추가: 높음 (필수 기능)
- 계약/프로모션: 중간 (비즈니스 기능 확대)

---

## 부록

### A. 모든 테이블 목록

총 140+ 테이블 (상세 목록은 [별도 Excel 제공])

### B. 스키마 다이어그램

```
┌─────────────────────────────────────────────────────────┐
│                   ADM (기본설정)                         │
├─────────────────────────────────────────────────────────┤
│  code_groups, codes, settings, currencies, units, ...   │
└────────────────┬──────────────┬──────────────┬──────────┘
                 │              │              │
         ┌───────▼─────┐ ┌──────▼──────┐ ┌───▼──────┐
         │  HRM(인사)  │ │ CRM(거래처) │ │PIM(상품) │
         └──────┬──────┘ └──────┬──────┘ └───┬──────┘
                │              │              │
         ┌──────▼──────────────▼──────────────▼────┐
         │  PSM(구매) → IVM(재고) ← WMS(창고)    │
         └──────┬──────────────┬──────────────────┘
                │              │
         ┌──────▼──────┐ ┌─────▼──────┐
         │ SRM(판매)   │ │ FIM(회계)  │
         └──────┬──────┘ └────────────┘
                │
         ┌──────▼──────┐
         │ ASM(서비스) │
         └─────────────┘
```

### C. 참고 자료

- 한국 전자세금계산서 표준: NTS 전송 형식
- 근로기준법: 근로시간, 휴가 관련 규정
- 회계법: 일반기업회계기준

---

**리포트 작성자**: Claude Code (AI Assistant)
**리포트 버전**: 1.0
**최종 검토일**: 2025-10-24
